<!DOCTYPE html>
<html lang="zh-CN">
  <head prefix="og: https://ogp.me/ns#">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  
  <title>ã€Vueã€‘Vue3é‡ä¿®ç¬”è®° - SHEN YING</title>
  
    <link rel="shortcut icon" href="/images/logo.svg">
  
  
  <link rel='manifest' href='/manifest.json'>
  

  <meta name="description" content="é‡æ–°å­¦ä¹ Vue3åå†™ä¸‹çš„ä¸€äº›ç¬”è®°">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€Vueã€‘Vue3é‡ä¿®ç¬”è®°">
<meta property="og:url" content="https://ccccooh.github.io/2025/02/09/%E5%89%8D%E7%AB%AF/Vue/%E3%80%90Vue%E3%80%91Vue3%E9%87%8D%E4%BF%AE%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="SHEN YING">
<meta property="og:description" content="é‡æ–°å­¦ä¹ Vue3åå†™ä¸‹çš„ä¸€äº›ç¬”è®°">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-02-09T23:01:41.000Z">
<meta property="article:modified_time" content="2025-10-06T16:11:50.754Z">
<meta property="article:author" content="Sy">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">

  <link rel="preconnect" href="https://rsms.me/">
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
  
  
<link rel="stylesheet" href="https://unpkg.com/simple-icons-font@15/font/simple-icons.min.css">

  
  
  
<link rel="stylesheet" href="https://unpkg.com/bootstrap-icons@1/font/bootstrap-icons.min.css">

  

  
<link rel="stylesheet" href="/css/var.css">

  
<link rel="stylesheet" href="/css/main.css">

  
<link rel="stylesheet" href="/css/typography.css">

  
<link rel="stylesheet" href="/css/code-highlighting.css">

  
  
  
<link rel="stylesheet" href="/css/components/card.css">

  
  
  
  
<link rel="stylesheet" href="/css/components/button.css">

  
  
  
  
<link rel="stylesheet" href="/css/components/badge.css">

  
  
  
  
<link rel="stylesheet" href="/css/components/utilities.css">

  
  
  
  
<link rel="stylesheet" href="/css/components/carousel.css">

  
  
  
<link rel="stylesheet" href="/css/nav.css">

  
<link rel="stylesheet" href="/css/paginator.css">

  
<link rel="stylesheet" href="/css/footer.css">

  
<link rel="stylesheet" href="/css/post-list.css">

  
  
  
<link rel="stylesheet" href="/css/toc.css">

  
  
  
  
  
<link rel="stylesheet" href="/css/post.css">

  
  
  
  
  
  
  
<link rel="stylesheet" href="/css/scroll-reveal.css">

  
  
  
<link rel="stylesheet" href="/css/view-transition.css">

  
  

  

  
<script src="/js/head.js"></script>

  
<meta name="generator" content="Hexo 7.3.0"></head>

  <body
    data-color-scheme="auto"
    data-uppercase-categories="true"
    
    data-config-root="/"
    
    data-toc="true"
    data-toc-max-depth="2"
    
    
    
    data-scroll-reveal-disappear="false"
    data-scroll-reveal-query=".scroll-reveal, .post-list-item, .card, .content p img, .content .block-large img"
    
    data-nav-blur-gradient="true"
  >
    
<script src="/js/body-top.js"></script>

    <a href="#main-content" id="skip-to-content">Skip to content</a>
    

<div class="nav-mask">
  <div order="1"></div>
  <div order="2"></div>
  <div order="3"></div>
  <div order="4"></div>
  <div order="5"></div>
  <div order="6"></div>
</div>

<nav id="theme-nav">
  <div class="inner">
    <a class="title" href="/">Sy_Blog&amp;Note</a>
    <div class="nav-arrow"></div>
    <div class="nav-items">
      <a class="nav-item nav-item-home" href="/" style="--index: 0">Home</a>

      
      <a class="nav-item" href="/archives" style="--index: 1">Archives</a>
      
      <a class="nav-item is-icon" href="/search" style="--index: 2"><i class="bi bi-search"></i></a>
      
      <a class="nav-item is-icon" target="_blank" rel="noopener" href="https://github.com/CCCCOOH" style="--index: 3"><i class="bi bi-github"></i></a>
      
      <a class="nav-item is-icon" target="_blank" rel="noopener" href="https://space.bilibili.com/450034908?spm_id_from=333.1007.0.0" style="--index: 4"><i class="bi bi-controller"></i></a>
      
    </div>
  </div>
</nav>

    <main id="main-content" data-pagefind-body>
      
<article class="post">
  
  <div class="meta">
    
    <div class="categories text-uppercase">
    
      <a href="/categories/å‰ç«¯/">å‰ç«¯</a>
    
      <a href="/categories/å‰ç«¯/Vue/">Vue</a>
    
    </div>
    

    
    <time class="date" datetime="2025-02-09T23:01:41+00:00">
      February 9, 2025
    </time>
    

    <h1 class="title" data-pagefind-meta="title">ã€Vueã€‘Vue3é‡ä¿®ç¬”è®°</h1>
  </div>

  <div class="content">
    <h2 id="ä¸€å‰è¨€">ä¸€ã€å‰è¨€</h2>
<p>åœ¨å¤§ä¸€ä¸Šè¿™æ®µæ—¶é—´ï¼Œçœ‹ç€å°šç¡…è°·å‰ç«¯è€å¸ˆçš„è¯¾è‡ªå­¦äº†<code>Vue2</code>ï¼Œå†å¾€åçš„<code>Vue3</code>è¯¾ç¨‹ç”±äºæœŸæœ«å‘¨çªç„¶è€Œè‡³æ²¡æœ‰æ·±æŒ–ã€‚</p>
<p>æ—¶éš”å‡ ä¸ªæœˆï¼Œæ—¶é—´è½¬çœ¼æ¥åˆ°å¯’å‡ï¼Œè·Ÿç€è“æ¡¥æ¯å›½èµ›ç­å†æ¬¡å­¦åˆ°äº†<code>Vue</code>çš„å†…å®¹ï¼Œåœ¨çœ‹åˆ°<code>Vue3</code>çš„å†…å®¹æ—¶å¤§éƒ¨åˆ†ä¹‹å‰å­¦è¿‡çš„çŸ¥è¯†éƒ½èƒ½åœ¨è„‘ä¸­çªç„¶ä¹ç°ï¼Œä¸è¿‡è¿˜æ˜¯ç•¥æœ‰é—å¿˜ï¼Œè¿™ä¸€æ¬¡å­¦ä¹ <code>Vue3</code>å†³å®šä»å¤´å¼€å§‹ç•™ä¸‹ä¸€äº›ç¬”è®°ä¾¿äºå¤ä¹ ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ç¬”è®°ğŸ“’å¤§éƒ¨åˆ†å†…å®¹å€Ÿé‰´äºå›½èµ›ç­çš„æ•™ç¨‹æ–‡æ¡£ã€‚</p>
</blockquote>
<h2 id="äºŒç¬¬ä¸€ä¸ª-vue-ç¨‹åº">äºŒã€ç¬¬ä¸€ä¸ª Vue ç¨‹åº</h2>
<p>åˆ›å»ºä¸€ä¸ªç®€å•çš„<code>Vue3</code>ç¨‹åºå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤æ‰§è¡Œï¼š</p>
<ol type="1">
<li>åˆ©ç”¨<code>script:src</code>åœ¨<code>head</code>ä¸­å¼•å…¥<code>Vue</code>çš„CDNæ–‡ä»¶ï¼š</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>åˆ›å»ºä¸€ä¸ªæ ¹<code>div</code>ï¼š</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;msg&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li>ç»“æ„<code>Vue</code>å¯¹è±¡å¾—åˆ°<code>createApp, ref</code>ï¼Œä½¿ç”¨<code>createApp</code>åˆ›å»ºä¸€ä¸ª<code>Vue</code>åº”ç”¨çš„å®ä¾‹å¯¹è±¡ï¼Œè¿™é‡Œèµ‹å€¼ç»™äº†<code>app</code>ã€‚åˆ©ç”¨<code>app.mount('#app')</code>æ–¹æ³•å°†<code>Vue</code>åº”ç”¨å®ä¾‹ä¸æˆ‘ä»¬çš„æ ¹<code>div</code>ç»‘å®šåœ¨ä¸€èµ·ï¼Œä¸ºå®ƒæœåŠ¡ã€‚åœ¨<code>setup()</code>ä¸­ä½¿ç”¨<code>ref</code>åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„å±æ€§<code>msg</code>ï¼Œ<code>return</code>å®ƒå¾—åˆ°å“åº”å¼çš„å˜é‡ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;Hello World!&#x27;</span>) <span class="comment">// Step 5ï¼šå£°æ˜ä¸€ä¸ªå±æ€§ msg å¹¶ä¸ºå…¶èµ‹äºˆåˆå§‹å€¼</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; msg &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>) </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šï¼Œä¸ºä½ çš„é¡¹ç›®å¼•å…¥<code>Vue</code>æ€»å…±æœ‰å››ç§æ–¹æ³•ï¼š</p>
<ol type="1">
<li>åœ¨é¡µé¢ä¸Šä»¥ <a
target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/quick-start#using-vue-from-cdn">CDN</a>
åŒ…çš„å½¢å¼å¯¼å…¥ã€‚</li>
<li>ä¸‹è½½<code>JavaScript</code>æ–‡ä»¶å¹¶<a
target="_blank" rel="noopener" href="https://www.jsdelivr.com/package/npm/vue">è‡ªè¡Œæ‰˜ç®¡</a>ã€‚</li>
<li>ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/vue">npm</a>
å®‰è£…å®ƒã€‚</li>
<li>ä½¿ç”¨å®˜æ–¹çš„ <a
target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/quick-start#creating-a-vue-application">CLI</a>
æ¥æ„å»ºä¸€ä¸ªé¡¹ç›®ã€‚</li>
</ol>
<p>ä¸‹é¢é¢å¤–è®²ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨<code>npm</code>å¼•å…¥<code>Vue</code>ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æœ€æ–°ç¨³å®šç‰ˆå®‰è£…</span></span><br><span class="line">npm install vue@next</span><br><span class="line"><span class="comment"># 2.æŒ‡å®šç‰ˆæœ¬å®‰è£…</span></span><br><span class="line">npm install vue@3.5.1</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰åŒå‘ç»‘å®š">ä¸‰ã€åŒå‘ç»‘å®š</h2>
<p>å­¦ä¹ <code>Vue</code>åŒå‘ç»‘å®šè¯­æ³•æ˜¯å‘æ–°æ‰‹å±•ç¤º<code>Vue</code>é­…åŠ›æœ€å¥½çš„æ–¹æ³•ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span> &#123;&#123; msg &#125;&#125; <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;msg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç åœ¨æ ¹<code>div</code>ä¸‹åˆ›å»ºäº†ä¸€ä¸ª<code>input</code>æ¡†ï¼Œè¿™ä¸ª<code>input</code>æ¡†çš„<code>value</code>å€¼ä¼šå’Œ<code>msg</code>è¿™ä¸ªå˜é‡åŒå‘çš„ç»‘å®šåœ¨ä¸€èµ·ï¼Œ<code>msg</code>æ”¹å˜ï¼Œ<code>input</code>çš„<code>value</code>å°±ä¼šæ”¹å˜ã€‚<code>input</code>ä¸­çš„<code>value</code>æ”¹å˜ï¼Œ<code>msg</code>ä¸­çš„å€¼ä¹Ÿä¼šæ”¹å˜ã€‚ä¸å¾—ä¸è®©äººæ„Ÿå¹ï¼šâ€œæ—©çŸ¥é“ï¼Œè¿˜å¾—æ˜¯<code>Vue</code>è™šæ‹Ÿç›—å¢“å¤§æ³•â€ã€‚</p>
<h2 id="å››æ–‡æœ¬æ’å€¼">å››ã€æ–‡æœ¬æ’å€¼</h2>
<p>æœ‰æ—¶å€™æˆ‘ä»¬æ¸²æŸ“çš„æ•°æ®å¯èƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡<code>ref(&#123;&#125;)</code>æ¥åˆ›å»ºï¼Œåœ¨èŠ‚ç‚¹ä¸­ä½¿ç”¨<code>&#123;&#123;userInfo.xxx&#125;&#125;</code>æ¥ä½¿ç”¨å³å¯ã€‚è¿™ç§å·®å€¼è¯­æ³•æ”¯æŒå„ç§<code>js</code>çš„è¡¨è¾¾å¼ï¼Œå…¶é€šç”¨æ€§å¯ä»¥ä¿è¯ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> userInfo = <span class="title function_">ref</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;å°ç‹&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">15</span>,</span><br><span class="line">        <span class="attr">pet</span>: &#123;<span class="attr">type</span>: <span class="string">&#x27;å°ç‹—&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;å–µå–µ&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;Evaç´«&#x27;</span>&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123; userInfo &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äº”å¸¸ç”¨æŒ‡ä»¤">äº”ã€å¸¸ç”¨æŒ‡ä»¤</h2>
<p><code>Vue3</code>æä¾›äº†è®¸å¤šå†…ç½®æŒ‡ä»¤æ¥å®ç°å„ç§å„æ ·çš„åŠŸèƒ½ï¼Œè¯¦ç»†ä½¿ç”¨æ–¹æ³•å‚è§<a
target="_blank" rel="noopener" href="https://cn.vuejs.org/api/built-in-directives">Vueå®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<p>æ¯”å¦‚ä¸Šé¢æåˆ°è¿‡åˆ©ç”¨<code>v-model</code>æ¥å®ç°åŒå‘ç»‘å®šï¼Œè¿™é‡Œçš„<code>v-model</code>å°±æ˜¯ä¸€ä¸ªæŒ‡ä»¤ã€‚</p>
<h3 id="v-bind">5.1 v-bind</h3>
<p>è¯¥æŒ‡ä»¤å¯ä»¥ä¸ºå±æ€§åŠ¨æ€ç»‘å®šä¸€ä¸ªè¡¨è¾¾å¼ã€‚ï¼Œä¾‹å¦‚è¿™é‡Œçš„<code>imgPath</code>æ˜¯ä¸€ä¸ª<code>Vue</code>ä¸­<code>ref</code>çš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯èƒ½ç”¨<code>v-bind</code>è¿™ä¸ªæŒ‡ä»¤åŠ¨æ€ç»‘å®šç»™<code>src</code>è¿™ä¸ªå±æ€§ã€‚</p>
<p>è¿™ä¸ªæŒ‡ä»¤éå¸¸å¸¸è§ï¼Œæ‰€ä»¥<code>Vue3</code>æä¾›äº†ä¸€ç§ç®€å†™ï¼Œç›´æ¥ç”¨<code>:</code>å°±èƒ½è¡¨ç¤º<code>v-bind:</code>ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">&quot;imgPath&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç®€å†™è¯­æ³•å¦‚ä¸‹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;imgPath&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="v-on">5.2 v-on</h3>
<p>è¯¥æŒ‡ä»¤ç”¨äºç»™å…ƒç´ ç»‘å®šäº‹ä»¶ï¼Œæ¯”å¦‚<code>v-on:click</code>å°±æ˜¯ç»‘å®šä¸€ä¸ª<code>click</code>ç‚¹å‡»äº‹ä»¶ï¼Œä»–çš„ç®€å†™æ˜¯ä¸€ä¸ª<code>@</code>ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç®€å†™è¯­æ³•å¦‚ä¸‹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œéœ€è¦æä¸€ä¸ªæ–°çš„äº‹æƒ…ï¼Œåœ¨ä¹‹å‰ç”³æ˜ä¸€ä¸ªå˜é‡æˆ‘ä»¬ä¸€ç›´ç”¨çš„éƒ½æ˜¯<code>const msg = ref('Hello')</code>è¿™ç§å†™æ³•ã€‚ä½†æ˜¯å¦‚æœæ˜¯å‡½æ•°ï¼Œå°±å¯ä»¥ç›´æ¥ç”³æ˜æˆï¼š<code>function myFn() &#123; ... &#125;</code>è¿™æ ·å†æ­£å¸¸å¯¼å‡ºå³å¯ã€‚å…·ä½“åŸå› æˆ‘è¯•äº†ä¸‹ï¼Œå¦‚æœç»™æ²¡æœ‰<code>ref</code>çš„å˜é‡è¿›è¡ŒåŒå‘ç»‘å®šï¼Œè¯¥å˜é‡ä¸ä¼šå“åº”å¼çš„æ›´æ–°ï¼Œä½†å¦‚æœæ˜¯<code>ref</code>ç”³æ˜å‡ºæ¥çš„å˜é‡å°±ä¼šå“åº”å¼çš„æ›´æ–°ã€‚æ‰€ä»¥æˆ‘æ¨æµ‹<code>ref</code>å’Œ<code>Vue</code>å†…çš„<code>MVVM</code>æ¨¡å‹çš„å“åº”å¼åŸç†æœ‰å…³ï¼Œå…·ä½“åŸç†ä»¥åä¼šè¯´ã€‚ä½†æ˜¯å‡½æ•°å°±ä¸éœ€è¦å‘å˜é‡ä¸€æ ·å“åº”å¼å˜åŒ–ï¼Œå‡½æ•°æ›´å¤šä½œä¸ºä¸€ç§å­˜å‚¨ç¨‹åºé€»è¾‘çš„æ¨¡æ¿çš„åŠŸèƒ½å­˜åœ¨ã€‚</p>
<p>è¿™é‡Œå’Œä¹‹å‰æœ‰ä¸€ç‚¹ä¸åŒä¹‹å¤„ï¼Œ<code>v-on:</code>çš„å†’å·åé¢è·Ÿç€ä¸€ä¸ª<code>click</code>å‚æ•°ï¼Œè¿™é‡Œå…¶å®æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å†™æ³•ã€‚å…¶ä¸­æ–¹æ‹¬å·ä¸­çš„å±æ€§åå«ä½œ<strong>åŠ¨æ€å‚æ•°</strong>ã€‚è¿™ä¸ªåŠ¨æ€å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶ä¸”è¡¨è¾¾å¼æœ€ç»ˆè¿”å›çš„ç»“æœä½œä¸ºæœ€ç»ˆçš„å‚æ•°æ¥ä½¿ç”¨ã€‚</p>
<p>ç”±æ­¤å¯è§ï¼ŒåŠ¨æ€å‚æ•°èƒ½å®ç°å°†ä¸€ä¸ªåŠ¨æ€çš„å¯ä»¥å˜åŒ–çš„äº‹ä»¶ç»‘å®šç»™å…ƒç´ ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:</span>[<span class="attr">attributeName</span>]=<span class="string">&quot;url&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="åŠ¨æ€å‚æ•°">5.3 åŠ¨æ€å‚æ•°</h3>
<p>åœ¨<code>v-on</code>ä¸­æˆ‘æåˆ°äº†åŠ¨æ€å‚æ•°ï¼Œä½†æˆ‘è®¤ä¸ºæœ‰å¿…è¦å•ç‹¬æ¥è®²ä¸€ä¸‹ï¼Œå› ä¸ºä½¿ç”¨åŠ¨æ€å‚æ•°çš„æ—¶å€™å­˜åœ¨ä¸€äº›è¯­æ³•ä¸Šçš„çº¦æŸéœ€è¦æ–°æ‰‹æ³¨æ„ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:</span>[<span class="attr">eventName</span>]=<span class="string">&quot;doSomething&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…ˆç”¨ä¸€ä¸ªä»£ç æ¥å½¢è±¡çš„è§£é‡Šä¸‹ä»–çš„ä½œç”¨ï¼Œå…¶å®æœ‰ç‚¹ç±»ä¼¼<code>ES6</code>ä¸­å¯¹è±¡çš„é”®åçš„å†™æ³•ã€‚ä¸Šé¢è¿™è¡Œä»£ç ä¸­çš„<code>eventName</code>çš„å€¼å¦‚æœæ˜¯<code>'focus'</code>ï¼Œ<code>focus</code>å°±ä¼šä½œä¸ºå€¼è¿”å›ï¼Œæ‰€ä»¥å°±ç­‰ä»·äºäº†<code>v-on:focus="doSomething"</code>ã€‚</p>
<h4 id="å¯¹åŠ¨æ€å‚æ•°å€¼çš„çº¦æŸ">5.3.1 å¯¹åŠ¨æ€å‚æ•°å€¼çš„çº¦æŸ</h4>
<p>åŠ¨æ€å‚æ•°é¢„æœŸä¼šæ±‚å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¼‚å¸¸æƒ…å†µä¸‹å€¼ä¸º
<code>null</code>ã€‚è¿™ä¸ªç‰¹æ®Šçš„ <code>null</code>
å€¼å¯ä»¥è¢«æ˜¾æ€§åœ°ç”¨äºç§»é™¤ç»‘å®šã€‚ä»»ä½•å…¶å®ƒéå­—ç¬¦ä¸²ç±»å‹çš„å€¼éƒ½å°†ä¼šè§¦å‘ä¸€ä¸ªè­¦å‘Šã€‚</p>
<h4 id="å¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸ">5.3.2 å¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸ</h4>
<p>åŠ¨æ€å‚æ•°è¡¨è¾¾å¼æœ‰ä¸€äº›è¯­æ³•çº¦æŸï¼Œå› ä¸ºæŸäº›å­—ç¬¦ï¼Œå¦‚ç©ºæ ¼å’Œå¼•å·ï¼Œæ”¾åœ¨ HTML
å±æ€§åé‡Œæ˜¯æ— æ•ˆçš„ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¿™ä¼šè§¦å‘ä¸€ä¸ªç¼–è¯‘è­¦å‘Š --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:</span>[&#x27;<span class="attr">foo</span>&#x27; + <span class="attr">bar</span>]=<span class="string">&quot;value&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å˜é€šçš„åŠæ³•æ˜¯ä½¿ç”¨æ²¡æœ‰ç©ºæ ¼æˆ–å¼•å·çš„è¡¨è¾¾å¼ï¼Œæˆ–ç”¨åé¢å°†ä¼šå­¦åˆ°çš„<strong>è®¡ç®—å±æ€§</strong>æ›¿ä»£è¿™ç§å¤æ‚è¡¨è¾¾å¼ã€‚</p>
<p>åœ¨ DOM
ä¸­ç¼–å†™æ¨¡æ¿æ—¶ï¼Œè¿˜éœ€è¦<strong>é¿å…ä½¿ç”¨å¤§å†™å­—ç¬¦æ¥å‘½åé”®å</strong>ï¼Œå› ä¸º<strong>æµè§ˆå™¨ä¼šæŠŠå±æ€§åå…¨éƒ¨å¼ºåˆ¶è½¬ä¸ºå°å†™</strong>ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">åœ¨ DOM ä¸­ä½¿ç”¨æ¨¡æ¿æ—¶è¿™æ®µä»£ç ä¼šè¢«è½¬æ¢ä¸º `v-bind:[someattr]`ã€‚</span></span><br><span class="line"><span class="comment">é™¤éåœ¨å®ä¾‹ä¸­æœ‰ä¸€ä¸ªåä¸ºâ€œsomeattrâ€çš„ propertyï¼Œå¦åˆ™ä»£ç ä¸ä¼šå·¥ä½œã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:</span>[<span class="attr">someAttr</span>]=<span class="string">&quot;value&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™é‡Œçš„<code>someAttr</code>å³ä½¿æ˜¯ä¸€ä¸ªå˜é‡å¹¶ä¸”å˜é‡çš„å€¼å…¨æ˜¯å°å†™å­—æ¯ä¹Ÿä¸è¡Œï¼Œå› ä¸ºæµè§ˆå™¨åœ¨çœ‹åˆ°è¿™æ®µä»£ç çš„æ—¶å€™ä¼šå»å¯»æ‰¾<code>someattr</code>è¿™ä¸ªå˜é‡ï¼Œä½†æ˜¯è¿™ä¸ªå˜é‡æ˜¾ç„¶ä¸å­˜åœ¨ï¼Œäºæ˜¯ä¼šå‡ºç°å¼‚å¸¸ã€‚</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502100438453.png"
alt="image-20250210043755185" />
<figcaption aria-hidden="true">image-20250210043755185</figcaption>
</figure>
<blockquote>
<p>å…·ä½“å°±æ˜¯é•¿è¿™ä¸ªæ ·å­ã€‚</p>
</blockquote>
<h4 id="ä½¿ç”¨åŠ¨æ€å‚æ•°">5.3.3 ä½¿ç”¨åŠ¨æ€å‚æ•°</h4>
<p>æ—¢ç„¶äº†è§£äº†é‚£ä¹ˆå¤šï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å†™ä¸€ä¸‹åŠ¨æ€å‚æ•°è¯­æ³•å§ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- htmléƒ¨åˆ† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:</span>[<span class="attr">attributename</span>]=<span class="string">&quot;msg&quot;</span> <span class="attr">v-on:</span>[<span class="attr">eventname</span>]=<span class="string">&quot;changeMsg&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; other &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¸‹é¢æ˜¯scriptéƒ¨åˆ† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;ä½ å¥½ï¼Œä¸–ç•Œ~&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> other = <span class="title function_">ref</span>(<span class="string">&quot;ä½ å¥½ï¼ŒVue!&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> attributename = <span class="title function_">ref</span>(<span class="string">&quot;title&quot;</span>); <span class="comment">// åŠ¨æ€å±æ€§åç§°</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">changeMsg</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¦‚change~&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> eventname = <span class="title function_">ref</span>(<span class="string">&quot;click&quot;</span>); <span class="comment">// åŠ¨æ€äº‹ä»¶åç§°</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; attributename, eventname, msg, changeMsg, other &#125;;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹çš„å‡ºæ¥ï¼Œä¸ä»…å¯ä»¥ä¸ºæŒ‡å®šçš„å±æ€§ç»‘å®šå€¼ï¼Œå°±è¿è¿™ä¸ªæ‰€è°“çš„â€œå±æ€§â€ä¹Ÿèƒ½åŠ¨æ€çš„æ”¹å˜ã€‚å“åº”å¼çš„ä¼˜è¶Šæ€§å¯è§ä¸€æ–‘äº†ã€‚</p>
<p>ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:</span>[<span class="attr">myatt</span>]=<span class="string">&quot;myurl&quot;</span>&gt;</span> &#123;&#123;msg&#125;&#125; <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Vueè„šæœ¬éƒ¨åˆ† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> myatt = <span class="title function_">ref</span>(<span class="string">&#x27;href&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;å»Sy.onlineçœ‹çœ‹&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> myurl = <span class="title function_">ref</span>(<span class="string">&#x27;https://shenying.online&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; myatt, myurl, msg &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¿®é¥°ç¬¦">5.4 ä¿®é¥°ç¬¦</h3>
<p>å¦‚æœæˆ‘ä»¬å®šä¹‰äº†è¿™æ ·ä¸€ä¸ª<code>a</code>æ ‡ç­¾ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:</span>[<span class="attr">attributename</span>]=<span class="string">&quot;msg&quot;</span> <span class="attr">v-on:</span>[<span class="attr">eventname</span>]=<span class="string">&quot;changeMsg&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://shenying.online&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; msg &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> attributename = <span class="title function_">ref</span>(<span class="string">&#x27;title&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> eventname = <span class="title function_">ref</span>(<span class="string">&#x27;click&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;ä½ å¥½ï¼Œä¸–ç•Œ!&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">changeMsg</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                msg.<span class="property">value</span> = <span class="string">&#x27;ä½ å¥½ï¼ŒVue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; attributename, eventname, msg, changeMsg &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½ ä¼šå‘ç°ï¼Œåœ¨ç‚¹å‡»è¯¥æ ‡ç­¾æ—¶ï¼Œé»˜è®¤çš„é¡µé¢è·³è½¬ä¹Ÿä¼šåŒæ—¶æ‰§è¡Œï¼Œåœ¨<code>Javascript</code>ä¸­æˆ‘ä»¬å°è¯•ç”¨<code>event.preventDefault()</code>æ¥é˜»æ­¢é»˜è®¤çš„è¡Œä¸ºã€‚</p>
<p>ä¹Ÿå°±æ˜¯æŠŠ<code>changeMsg()</code>æ–¹æ³•æ”¹ä¸ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">changeMsg</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  event.<span class="title function_">preventDefault</span>() <span class="comment">// é˜»æ­¢äº‹ä»¶é»˜è®¤è¡Œä¸º</span></span><br><span class="line">  msg.<span class="property">value</span> = <span class="string">&#x27;ä½ å¥½è“æ¡¥ï¼&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®ï¼ŒVue
ä¸ºäº†æ–¹ä¾¿ï¼Œç›´æ¥æŠŠâ€œé˜»æ­¢äº‹ä»¶é»˜è®¤è¡Œä¸ºâ€è¿™æ ·çš„æ“ä½œå˜æˆäº†æŒ‡ä»¤çš„ä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡æŒ‡ä»¤ä¿®é¥°ç¬¦å¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:</span>[<span class="attr">attributename</span>]=<span class="string">&quot;msg&quot;</span> <span class="attr">v-on:</span>[<span class="attr">eventname</span>]<span class="attr">.prevent</span>=<span class="string">&quot;changeMsg&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://shenying.online&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123; msg &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸ä½¿ç”¨åŠ¨æ€å‚æ•°å°±æ˜¯<code>v-on:click.prevent</code>ã€‚</p>
<h3 id="v-html">5.5 v-html</h3>
<p>ä¸Šé¢å·²ç»å±•ç¤ºè¿‡æ–‡æœ¬æ’å€¼çš„ä¾¿æ·æ€§äº†ï¼Œä½†å¦‚æœä¸€ä¸ªå˜é‡ä¸­å­˜å‚¨çš„æ˜¯<code>DOM</code>ç»“æ„ï¼Œæƒ³ä½¿ç”¨è¯¥ç»“æ„æ’å…¥æŸä¸ªå…ƒç´ ï¼Œå°±æ— æ³•ä½¿ç”¨æ–‡æœ¬æ’å€¼æ¥æ­£å¸¸æ˜¾ç¤ºä»–ï¼Œå› ä¸ºæ–‡æœ¬æ’å€¼ä¸ä¼šè§£æ<code>HTML</code>å…ƒç´ ï¼Œåªä¼šå°†å˜é‡ä½œä¸ºæ­£å¸¸çš„æ–‡æœ¬è¾“å‡ºã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å°±æœ‰äº†<code>v-html</code>ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span> &#123;&#123;htmlValue&#125;&#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-html</span>=<span class="string">&quot;htmlValue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> htmlValue = <span class="title function_">ref</span>(<span class="string">`&lt;h1&gt;æˆ‘æ˜¯ä¸€ä¸ªæ ‡é¢˜&#123;&#123;msg&#125;&#125;&lt;/h1&gt;`</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;ä½ å¥½ï¼Œä¸–ç•Œ.&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> &#123; htmlValue, msg &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>v-html</code>ç¡®å®è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¯ä»¥æ›´æ–°å…ƒç´ çš„<code>innerHtml</code>ã€‚ä½†è¿˜æ˜¯æœ‰å±€é™å­˜åœ¨ï¼Œå®ƒçš„å†…å®¹åªèƒ½ä½œä¸ºæ™®é€šçš„<code>html</code>è§£æï¼Œä¸èƒ½è§£ææˆ<code>Vue</code>æ¨¡æ¿ã€‚</p>
<blockquote>
<p>å½“ç„¶ï¼Œç›´æ¥åŠ¨æ€æ¸²æŸ“ä»»æ„çš„<code>html</code>æ˜¯éå¸¸å±é™©çš„ï¼Œä¼šé€ æˆ<a
target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Cross-site_scripting">XSS
æ”»å‡»</a>ï¼Œè¿™ä¹Ÿæ˜¯è€ç”Ÿå¸¸è°ˆçš„è¯é¢˜äº†ã€‚é¡ºä¾¿æä¸€å˜´ï¼ŒXSS æ˜¯ 2017 å¹´<a
target="_blank" rel="noopener" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A7-Cross-Site_Scripting_(XSS)">ç¬¬ä¸ƒåæœ€å¸¸è§çš„
Web åº”ç”¨ç¨‹åºæ¼æ´</a>ã€‚</p>
</blockquote>
<p>çœ‹åˆ° innerHTML çš„åŒå­¦è‚¯å®šä¼šè”æƒ³åˆ°å®ƒçš„å§å¦¹ innerTextï¼Œæ²¡é”™ï¼Œåœ¨
JavaScript ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°è¿™ä¸¤ä¸ªå±æ€§å»æ›´æ–°å…ƒç´ å†…å®¹ã€‚åŒæ ·ï¼ŒVue
ä¸­ä¹Ÿæœ‰å®ƒç›¸å¯¹åº”çš„æŒ‡ä»¤â€”â€” <code>v-text</code>ï¼Œä¸€èµ·æ¥çœ‹ä¸‹ã€‚</p>
<h3 id="v-text">5.6 v-text</h3>
<p><code>v-text</code> æŒ‡ä»¤ç”¨äºæ›´æ–°å…ƒç´ çš„ <a
target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent">textContent</a>ï¼Œä¼šå°†æ•´ä¸ªå…ƒç´ ä¸­çš„å†…å®¹è¿›è¡Œæ›¿æ¢ã€‚å¦‚æœåªéœ€è¦æ›´æ–°å…ƒç´ å†…å®¹ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™éœ€è¦ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; msg &#125;&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªç”¨äºä¼˜åŒ–æ›´æ–°æ€§èƒ½çš„æŒ‡ä»¤â€”â€”
<code>v-once</code>ã€‚</p>
<h3 id="v-once">5.7 v-once</h3>
<p>åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ <code>v-once</code>
æŒ‡ä»¤çš„å…ƒç´ ï¼Œä¸ç®¡é‡Œé¢çš„æ•°æ®å¦‚ä½•å‘ç”ŸåŠ¨æ€å˜åŒ–ï¼Œä¹Ÿåªä¼šæ¸²æŸ“ä¸€æ¬¡ã€‚éšåçš„é‡æ–°æ¸²æŸ“ï¼Œå…ƒç´ åŠå…¶<strong>æ‰€æœ‰çš„å­èŠ‚ç‚¹</strong>å°†è¢«è§†ä¸ºé™æ€å†…å®¹å¹¶è·³è¿‡ã€‚è¯¥æŒ‡ä»¤å¯ä»¥ç”¨äºä¼˜åŒ–æ›´æ–°æ€§èƒ½ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•ä¸ªå…ƒç´  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-once</span>&gt;</span>This will never change: &#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœ‰å­å…ƒç´  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-once</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>comment<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> &#123;&#123;msg&#125;&#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;msg&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¾‹å­ä¸­ï¼Œé€šè¿‡<code>input</code>æ¥æ”¹å˜<code>msg</code>çš„å€¼ï¼Œæ˜æ˜¾å¯ä»¥å‘ç°<code>v-once</code>ä¸‹çš„æ‰€æœ‰çš„ç»“ç‚¹ä¸ä¼šå†æ¬¡æ”¹å˜å’Œæ¸²æŸ“ã€‚</p>
<h2 id="å…­ç»„åˆå¼api">å…­ã€ç»„åˆå¼Api</h2>
<p>Vueå®˜æ–¹æä¾›äº†ä¸¤ç§ä»£ç ä¹¦å†™é£æ ¼ï¼š<strong>é€‰é¡¹å¼ API</strong>
å’Œ<strong>ç»„åˆå¼ API</strong>ã€‚å®ƒä»¬çš„ç®€è¦ä»‹ç»å¯ä»¥æŸ¥çœ‹<a
target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/introduction.html#api-styles">å®˜ç½‘çš„è¯´æ˜</a>ã€‚è€ƒè™‘åˆ°æ˜“ç”¨æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ¥ä¸‹æ¥çš„å®éªŒå†…å®¹å‡é‡‡ç”¨<strong>ç»„åˆå¼
API</strong> ã€‚</p>
<p>é¦–å…ˆæ˜¯<code>setup()</code>æ–¹æ³•ã€‚</p>
<h3 id="setup-æ–¹æ³•">6.1 setup() æ–¹æ³•</h3>
<p>å› ä¸ºåœ¨æˆ‘ä»¬å‰é¢çš„ä¾‹å­ä¸­ï¼Œå®ƒå‡ºç°çš„é¢‘ç‡å¾ˆé«˜ï¼Œè€Œä¸”æˆ‘ä»¬å‘ç°æ‰€æœ‰çš„å“åº”å¼æ•°æ®çš„å£°æ˜å’Œå‡½æ•°çš„å®šä¹‰è²Œä¼¼éƒ½å†™åœ¨å®ƒé‡Œé¢ã€‚</p>
<p><strong><code>setup</code> å‡½æ•°æ˜¯ä¸€ä¸ªç»„ä»¶é€‰é¡¹ï¼Œä½œä¸ºç»„ä»¶ä¸­ç»„åˆå¼ API
çš„èµ·ç‚¹ï¼ˆå…¥å£ï¼‰ï¼Œåœ¨ç»„ä»¶è¢«åˆ›å»ºä¹‹å‰æ‰§è¡Œ</strong>ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡æ¡£<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; createApp &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ä¸Šé¢è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬åœ¨åº”ç”¨é…ç½®ä¸­æ·»åŠ äº†ä¸€ä¸ª <code>setup()</code>
æ–¹æ³•ï¼Œè¯¥å‡½æ•°ç”¨äºå®šä¹‰åç»­å°†è¦ä½¿ç”¨çš„å“åº”å¼æ•°æ®å’Œæ–¹æ³•ç­‰ï¼Œå¹¶å°†è¿™äº›æ•°æ®å’Œæ–¹æ³•æ•´ä½“æ‰“åŒ…æˆä¸€ä¸ªå¯¹è±¡è¿”å›å‡ºå»ï¼Œä¾›è¯¥ç»„ä»¶çš„å…¶å®ƒéƒ¨åˆ†ä½¿ç”¨ã€‚</p>
<p>æ‰€ä»¥å°±å¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;dog.imgPath&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> @<span class="attr">click</span>=<span class="string">&quot;change&quot;</span>&gt;</span>&#123;&#123; dog.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> dog = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>: <span class="string">&#x27;äºŒå“ˆ&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">imgPath</span>: <span class="string">&#x27;https://labfile.oss.aliyuncs.com/courses/5428/1.jpg&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">change</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(dog)</span></span><br><span class="line"><span class="language-javascript">                dog.<span class="property">name</span> = <span class="string">&#x27;å°æ±ª&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(dog)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; dog, change &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å´å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œç‚¹å‡»â€äºŒå“ˆâ€åé¡µé¢ä¸Šçš„äºŒå“ˆå¹¶ä¸ä¼šå“åº”å¼çš„æ”¹å˜ã€‚é‚£æ˜¯å› ä¸ºæ™®é€šçš„ç”³æ˜æ–¹å¼åœ¨<code>setup()</code>ä¸­ä¸å…·å¤‡å“åº”å¼çš„æ¸²æŸ“èƒ½åŠ›ã€‚</p>
<ol type="1">
<li>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦åœ¨Vueä¸­å¼•å…¥<code>Reactive</code>å‡½æ•°ï¼š</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createApp, reactive &#125; = <span class="title class_">Vue</span></span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>åœ¨<code>setup()</code>å‡½æ•°ä¸­è°ƒç”¨<code>reactive()</code>å‡½æ•°ï¼Œå°†å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥å³å¯ï¼š</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dog = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;äºŒå“ˆ&#x27;</span>,</span><br><span class="line">  <span class="attr">imgPath</span>: <span class="string">&#x27;https://labfile.oss.aliyuncs.com/courses/5428/1.jpg&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li>åœ¨ <code>setup()</code> ä¸­å°† <code>reactive()</code>
å‡½æ•°è°ƒç”¨ä¹‹åçš„è¿”å›å€¼ï¼Œä»¥å¯¹è±¡å±æ€§çš„å½¢å¼è¿”å›å‡ºå»ã€‚</li>
</ol>
<h3 id="ref-æ–¹æ³•">6.2 ref() æ–¹æ³•</h3>
<p>å¯æƒœ <code>reactive()</code>
å‡½æ•°æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå®ƒæ— æ³•å°†ä¸€ä¸ªç®€å•ç±»å‹çš„æ•°æ®è½¬åŒ–ä¸ºå“åº”å¼æ•°æ®ï¼Œä¸”ä¸€çº§å±æ€§ä¸å¯å˜ã€‚ä¸€èµ·æ¥éªŒè¯ä¸€ä¸‹ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å˜é‡ï¼š&#123;&#123;msg&#125;&#125; <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;myFn&quot;</span>&gt;</span>msg++<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, reactive &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> msg = <span class="title function_">reactive</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">myFn</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                msg.<span class="property">value</span>++;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; msg, myFn &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ä¸­çš„<code>msg</code>ä¸ä¼šå“åº”å¼çš„å˜åŒ–ï¼Œæ§åˆ¶å°ä¼šä¸€ç›´è¾“å‡º<code>0</code>ï¼Œç”±æ­¤å¯è§<code>reactive</code>ä¸é€‚ç”¨äºç®€å•åœºæ™¯ä¸‹çš„å“åº”å¼æ¸²æŸ“ã€‚</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502100606812.png"
alt="image-20250210060605741" />
<figcaption aria-hidden="true">image-20250210060605741</figcaption>
</figure>
<p>å…¶æ„æ€ä¹Ÿå°±æ˜¯ä¸èƒ½ä½¿ç”¨ <code>reactive()</code> å£°æ˜ä¸€ä¸ªå€¼ä¸º 0
çš„å“åº”å¼æ•°æ®ï¼Œå› ä¸ºå®ƒåªèƒ½ç”¨äºå£°æ˜å¤æ‚ç±»å‹çš„å“åº”å¼å¯¹è±¡ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>ref()</code> å‡½æ•°ã€‚</p>
<p><code>ref()</code>
å‡½æ•°æ¥å—ä¸€ä¸ªç®€å•ç±»å‹æˆ–è€…å¤æ‚ç±»å‹çš„ä¼ å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªå“åº”å¼ä¸”å¯å˜çš„å¯¹è±¡ã€‚</p>
<p>å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ref &#125; = <span class="title class_">Vue</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">const</span> num = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºæ˜¯ä¸€ä¸ªå“åº”å¼çš„å¯å˜å¯¹è±¡ï¼Œéœ€è¦æ”¹å˜<code>num</code>çš„å€¼çš„æ—¶å€™é€šè¿‡æ”¹å˜<code>num.value</code>æ¥æ”¹å˜å®ƒã€‚</p>
<blockquote>
<p>æ¨èä¸€ç§å†™æ³•ï¼šåªæœ‰æˆ‘ä»¬æ˜ç¡®çŸ¥é“è¦è½¬æ¢çš„å¯¹è±¡å†…éƒ¨çš„å­—æ®µåç§°æˆ‘ä»¬æ‰ä½¿ç”¨
<code>reactive()</code>ï¼Œå¦åˆ™å°±ä¸€å¾‹ä½¿ç”¨
<code>ref()</code>ï¼Œä»è€Œé™ä½åœ¨è¯­æ³•é€‰æ‹©ä¸Šçš„å¿ƒç†è´Ÿæ‹…ã€‚</p>
</blockquote>
<h3 id="torefs-å‡½æ•°">6.3 toRefs() å‡½æ•°</h3>
<p><code>reactive()</code>
å‡½æ•°å¤„ç†åçš„è¿”å›å¯¹è±¡è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ï¼šå¦‚æœç»™è¿™ä¸ªå¯¹è±¡è§£æ„æˆ–è€…å±•å¼€ï¼Œä¼šè®©æ•°æ®ä¸¢å¤±å“åº”å¼çš„èƒ½åŠ›ã€‚</p>
<p>æ¯”å¦‚ï¼Œåœ¨â€œä¸ªäººä¸­å¿ƒé¡µâ€æˆ‘ä»¬æœ‰ä¸ªå“åº”å¼æ•°æ®å¯¹è±¡ <code>user</code>
ç”¨äºå­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸­ã€‚æˆ‘ä»¬æœ‰å¦‚ä¸‹å†™æ³•ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä¸ªäººä¸­å¿ƒé¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hi, &#123;&#123; user.nickname &#125;&#125;!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; user.phone &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, reactive &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> user = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">phone</span>: <span class="string">&#x27;13211111111&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">nickname</span>: <span class="string">&#x27;Tom&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; user &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>user</code>å¯¹è±¡åå¥½åƒæ²¡æœ‰èµ·åˆ°å¤ªå¤§çš„ä½œç”¨ï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½åœ¨æ¨¡ç‰ˆä¸­çœç•¥<code>user</code>ç›´æ¥ä¹¦å†™
<code>nickname</code> å’Œ <code>phone</code>
å‘¢ï¼Ÿä¸ºæ­¤ï¼Œåœ¨<code>setup()</code>è¿”å›çš„æ—¶å€™æŠŠ<code>user</code>å¯¹è±¡çš„å±æ€§å±•å¼€æ˜¯ä¸æ˜¯å°±å¯ä»¥äº†å‘¢ï¼Ÿæˆ‘ä»¬å°è¯•åšå¦‚ä¸‹çš„ä¿®æ”¹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä¸ªäººä¸­å¿ƒé¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hi, &#123;&#123; nickname &#125;&#125;!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; phone &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, reactive &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> user = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">phone</span>: <span class="string">&#x27;13211111111&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">nickname</span>: <span class="string">&#x27;Tom&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; ...user &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>çœ‹ä¼¼æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚</p>
<p>ä½†æ˜¯ï¼Œäº‹æƒ…å¹¶ä¸å¦‚æˆ‘ä»¬æ‰€æƒ³çš„é‚£æ ·ç®€å•ã€‚</p>
<p>æˆ‘ä»¬æ¥åˆ°äº†ä¸€ä¸ªå¯ä»¥åœ¨é¡µé¢ä¸­ä¿®æ”¹æ˜µç§°çš„éœ€æ±‚ï¼Œäºæ˜¯åˆåœ¨é¡µé¢ä¸Šæ·»åŠ äº†ä¸€ä¸ªç”¨äºä¿®æ”¹æ˜µç§°çš„æŒ‰é’®ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;nickname=&#x27;lily&#x27;&quot;</span>&gt;</span>ä¿®æ”¹æ˜µç§°<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬é—æ†¾çš„å‘ç°é¡µé¢ä¸Šæ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥å¦ä¸€ä¸ªå‡½æ•°â€”â€”<code>toRefs()</code>ã€‚</p>
<p>å®ƒå¯ä»¥ä¿è¯è¢«å±•å¼€çš„å“åº”å¼å¯¹è±¡çš„<strong>æ¯ä¸ªå±æ€§éƒ½æ˜¯å“åº”å¼</strong>çš„ï¼Œå…¶ç”¨æ³•ä¹Ÿæ¯”è¾ƒç®€å•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; toRefs &#125; = <span class="title class_">Vue</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">return</span> &#123; ...<span class="title function_">toRefs</span>(user) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åé¡µé¢ä¸Šå°±èƒ½æ­£ç¡®æ¸²æŸ“å‡ºæ¥äº†ã€‚</p>
<h2 id="ä¸ƒäº‹ä»¶å¤„ç†">ä¸ƒã€äº‹ä»¶å¤„ç†</h2>
<h3 id="å†…è”äº‹ä»¶å¤„ç†å™¨">7.1 å†…è”äº‹ä»¶å¤„ç†å™¨</h3>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>v-on</code> æŒ‡ä»¤ ï¼ˆé€šå¸¸ç¼©å†™ä¸º <code>@</code>
ç¬¦å·ï¼‰ æ¥ç›‘å¬ DOM äº‹ä»¶ï¼Œå¹¶åœ¨è§¦å‘äº‹ä»¶æ—¶æ‰§è¡Œä¸€äº› JavaScriptã€‚</p>
<p>å…¶ç”¨æ³•ä¸º <code>@click="JavaScript è¡¨è¾¾å¼"</code>ã€‚</p>
<p>ä¾‹å¦‚è¿™æ ·ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡æ¡£<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä¸€å…±æœ‰ &#123;&#123; count &#125;&#125; ä¸ªèµğŸ‘<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;count++&quot;</span>&gt;</span>ç‚¹èµ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123; count &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502100625168.gif"
alt="å›¾ç‰‡æè¿°" />
<figcaption aria-hidden="true">å›¾ç‰‡æè¿°</figcaption>
</figure>
<h3 id="æ–¹æ³•äº‹ä»¶å¤„ç†å™¨">7.2 æ–¹æ³•äº‹ä»¶å¤„ç†å™¨</h3>
<p>æœ‰æ—¶ï¼Œè®¸å¤šäº‹ä»¶å¤„ç†é€»è¾‘ä¼šæ›´ä¸ºå¤æ‚ï¼Œæ‰€ä»¥ç›´æ¥æŠŠ JavaScript ä»£ç å†™åœ¨
<code>v-on</code> æŒ‡ä»¤ä¸­ä¸æ˜¯é•¿ä¹…ä¹‹è®¡ã€‚å…¶å® <code>v-on</code>
è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªéœ€è¦è°ƒç”¨çš„æ–¹æ³•åç§°ã€‚</p>
<p>å…¶ç”¨æ³•ä¸º <code>@click="methodName"</code>ã€‚</p>
<p>åœ¨<code>setup()</code>ä¸­å®šä¹‰ä¸€ä¸ªåŒåçš„æ–¹æ³•å³å¯ä½¿ç”¨ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä¸€å…±æœ‰ &#123;&#123; count &#125;&#125; ä¸ªèµğŸ‘<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;like&quot;</span>&gt;</span>ç‚¹èµ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">9995</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">like</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                count.<span class="property">value</span>++;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (count.<span class="property">value</span> == <span class="number">10000</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">alert</span>(<span class="string">&#x27;æ­å–œç‚¹èµæ¬¡æ•°çªç ´ 1w å¤§å…³ï¼ğŸ‰&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; count, like &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">	&#125;)</span></span><br><span class="line"><span class="language-javascript">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="å†…è”äº‹ä»¶å¤„ç†å™¨ä¸­è°ƒç”¨æ–¹æ³•">7.3 å†…è”äº‹ä»¶å¤„ç†å™¨ä¸­è°ƒç”¨æ–¹æ³•</h3>
<p>é™¤äº†ç›´æ¥æ¥æ”¶ä¸€ä¸ªéœ€è¦è°ƒç”¨çš„æ–¹æ³•åç§°ï¼Œä¹Ÿå¯ä»¥åœ¨å†…è” JavaScript
è¯­å¥ä¸­è°ƒç”¨è¯¥æ–¹æ³•ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³åœ¨è°ƒç”¨æ–¹æ³•çš„åŒæ—¶ä¼ é€’ç»™æ–¹æ³•ä¸€äº›å¿…è¦çš„å‚æ•°ã€‚</p>
<p>å…¶ç”¨æ³•ä¸º <code>@click="methodName(å‚æ•°)"</code>ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä¸€å…±æœ‰ &#123;&#123; count &#125;&#125; ä¸ªèµğŸ‘<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;change(-1)&quot;</span>&gt;</span>å‡å°‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;change(1)&quot;</span>&gt;</span>å¢åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">100</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">change</span>(<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                count.<span class="property">value</span> += val</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; count, change &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é¡µé¢æ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502100636010.gif"
alt="å›¾ç‰‡æè¿°" />
<figcaption aria-hidden="true">å›¾ç‰‡æè¿°</figcaption>
</figure>
<h3 id="äº‹ä»¶å¯¹è±¡-event">7.4 äº‹ä»¶å¯¹è±¡ $event</h3>
<p>æœ‰æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨å†…è”äº‹ä»¶å¤„ç†å™¨ä¸­è®¿é—®åŸå§‹çš„ DOM
äº‹ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³é€šè¿‡ç‚¹å‡»è·å–å½“å‰å…ƒç´ çš„ä¿¡æ¯æ—¶ã€‚æ­¤æ—¶å¯ä»¥ç”¨ç‰¹æ®Šå˜é‡
<code>$event</code> æŠŠå®ƒä¼ å…¥æ–¹æ³•ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-show</span>=<span class="string">&quot;!isEdit&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;showEdit($event)&quot;</span>&gt;</span>ç‚¹æˆ‘ç¼–è¾‘<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-show</span>=<span class="string">&quot;isEdit&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;inputVal&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> inputVal = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>) <span class="comment">// å­˜å‚¨ç”¨æˆ·è¾“å…¥çš„å†…å®¹</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> isEdit = <span class="title function_">ref</span>(<span class="literal">false</span>) <span class="comment">// æ§åˆ¶è¾“å…¥æ¡†å’Œæ–‡æœ¬æ˜¾éšåˆ‡æ¢</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">showEdit</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(event);</span></span><br><span class="line"><span class="language-javascript">                inputVal.<span class="property">value</span> = event.<span class="property">target</span>.<span class="property">innerText</span> <span class="comment">// è·å– span æ ‡ç­¾ä¸­çš„æ–‡æœ¬</span></span></span><br><span class="line"><span class="language-javascript">                isEdit.<span class="property">value</span> = <span class="literal">true</span> <span class="comment">// éšè—æ–‡æœ¬ï¼Œæ˜¾ç¤ºè¾“å…¥æ¡†</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; inputVal, isEdit, showEdit &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™é‡Œçš„<code>v-show</code>æ˜¯ä¸€ä¸ªæ ¹æ®å¸ƒå°”å€¼å†³å®šæ˜¯å¦æ¸²æŸ“å…ƒç´ çš„æŒ‡ä»¤ã€‚</p>
</blockquote>
<h3 id="äº‹ä»¶ä¿®é¥°ç¬¦">7.5 äº‹ä»¶ä¿®é¥°ç¬¦</h3>
<p>åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­è°ƒç”¨ <code>event.preventDefault()</code> æˆ–
<code>event.stopPropagation()</code> æ˜¯éå¸¸å¸¸è§çš„éœ€æ±‚ã€‚</p>
<p>å°½ç®¡æˆ‘ä»¬å¯ä»¥åœ¨æ–¹æ³•ä¸­è½»æ¾å®ç°è¿™ç‚¹ï¼Œä½†æ›´å¥½çš„æ–¹å¼æ˜¯ï¼šæ–¹æ³•åªæœ‰çº¯ç²¹çš„æ•°æ®é€»è¾‘ï¼Œè€Œä¸æ˜¯å»å¤„ç†
DOM äº‹ä»¶ç»†èŠ‚ã€‚</p>
<p>è®°ä½ï¼Œä½¿ç”¨<code>Vue</code>çš„æ—¶å€™æ°¸è¿œå‘Šè¯‰è‡ªå·±ä¸€å¥è¯ï¼šâ€œå°½é‡ä¸è¦è‡ªå·±å»æ“çºµ
DONç»“æ„ã€‚â€æƒ³æƒ³è¿™ä¸ªæ“ä½œçœŸçš„éœ€è¦è‡ªå·±ç”¨åŸç”ŸJsæ“ä½œDOMå—ï¼Ÿèƒ½å¦ç”¨<code>Vue</code>çš„æ–¹å¼æ¥è§£å†³ï¼Ÿ</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒVue ä¸º <code>v-on</code>
æä¾›äº†<strong>äº‹ä»¶ä¿®é¥°ç¬¦</strong>ã€‚ä¹‹å‰æè¿‡ï¼Œä¿®é¥°ç¬¦æ˜¯ç”±ç‚¹å¼€å¤´çš„æŒ‡ä»¤åç¼€æ¥è¡¨ç¤ºçš„ã€‚</p>
<p>æ¥çœ‹ä¸‹ Vue éƒ½ä¸ºæˆ‘ä»¬æä¾›äº†å“ªäº›<strong>äº‹ä»¶ä¿®é¥°ç¬¦</strong>ï¼š</p>
<ul>
<li><code>.stop</code></li>
<li><code>.prevent</code></li>
<li><code>.capture</code></li>
<li><code>.self</code></li>
<li><code>.once</code></li>
<li><code>.passive</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é˜»æ­¢å•å‡»äº‹ä»¶ç»§ç»­ä¼ æ’­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click.stop</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;onSubmit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä¿®é¥°ç¬¦å¯ä»¥ä¸²è” --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click.stop.prevent</span>=<span class="string">&quot;doThat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åªæœ‰ä¿®é¥°ç¬¦ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å³å†…éƒ¨å…ƒç´ è§¦å‘çš„äº‹ä»¶å…ˆåœ¨æ­¤å¤„ç†ï¼Œç„¶åæ‰äº¤ç”±å†…éƒ¨å…ƒç´ è¿›è¡Œå¤„ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.capture</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åªå½“åœ¨ event.target æ˜¯å½“å‰å…ƒç´ è‡ªèº«æ—¶è§¦å‘å¤„ç†å‡½æ•° --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å³äº‹ä»¶ä¸æ˜¯ä»å†…éƒ¨å…ƒç´ è§¦å‘çš„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.self</span>=<span class="string">&quot;doThat&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://shenying.online&quot;</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;msg=&#x27;å·²ç‚¹å‡»ï¼&#x27;&quot;</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> clicked = <span class="title function_">ref</span>(<span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;ç­‰å¾…ç‚¹å‡»ï¼&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; msg &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502100646433.gif"
alt="å›¾ç‰‡æè¿°" />
<figcaption aria-hidden="true">å›¾ç‰‡æè¿°</figcaption>
</figure>
<p>å¯ä»¥çœ‹åˆ°é“¾æ¥å¤±å»äº†è·³è½¬çš„èƒ½åŠ›ã€‚</p>
<h3 id="å…¶ä»–ä¿®é¥°ç¬¦">7.6 å…¶ä»–ä¿®é¥°ç¬¦</h3>
<p>æˆ‘ä»¬åœ¨å­¦ä¹  JavaScript
äº‹ä»¶çš„æ—¶å€™å·²ç»çŸ¥é“ï¼Œé™¤äº†å¸¸ç”¨çš„é¼ æ ‡äº‹ä»¶ä¹‹å¤–ï¼Œè¿˜æœ‰é”®ç›˜ï¼ˆæŒ‰é”®ï¼‰äº‹ä»¶ã€UIï¼ˆç³»ç»Ÿï¼‰äº‹ä»¶ç­‰ã€‚Vue
ä¸ºè¿™äº›äº‹ä»¶åŒæ ·ä¹Ÿæä¾›äº†ä¿®é¥°ç¬¦ã€‚</p>
<h4 id="é”®ç›˜æŒ‰é”®ä¿®é¥°ç¬¦">7.6.1 é”®ç›˜æŒ‰é”®ä¿®é¥°ç¬¦</h4>
<p>åœ¨ç›‘å¬é”®ç›˜äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ£€æŸ¥è¯¦ç»†çš„æŒ‰é”®ã€‚Vue å…è®¸ä¸º
<code>v-on</code>
æŒ‡ä»¤åœ¨ç›‘å¬é”®ç›˜äº‹ä»¶æ—¶æ·»åŠ <strong>æŒ‰é”®ä¿®é¥°ç¬¦</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª <code>&lt;input&gt;</code>
è¾“å…¥æ¡†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç‚¹å‡»â€œå›è½¦é”®â€çš„æ—¶å€™æ‰“å° <code>&lt;input&gt;</code>
è¾“å…¥æ¡†é‡Œé¢çš„å€¼ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;handleEnter&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">handleEnter</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">target</span>.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; handleEnter &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é™¤äº† <code>.enter</code> æŒ‰é”®ä¿®é¥°ç¬¦å¤–ï¼Œå¸¸ç”¨çš„è¿˜æœ‰ä¸‹é¢è¿™äº›ï¼š</p>
<ul>
<li><code>.enter</code></li>
<li><code>.tab</code></li>
<li><code>.delete</code> ï¼ˆæ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®ï¼‰</li>
<li><code>.esc</code></li>
<li><code>.space</code></li>
<li><code>.up</code></li>
<li><code>.down</code></li>
<li><code>.left</code></li>
<li><code>.right</code></li>
</ul>
<h4 id="ç³»ç»Ÿä¿®é¥°ç¬¦">7.6.2 ç³»ç»Ÿä¿®é¥°ç¬¦</h4>
<p>æˆ‘ä»¬è¿˜å¯ä»¥æ­é…ç€ä»¥ä¸‹ç³»ç»Ÿä¿®é¥°é”®æ¥å®ç°å¤šä¸ªæŒ‰é”®ç»„åˆæ•ˆæœï¼š</p>
<ul>
<li><code>.ctrl</code></li>
<li><code>.alt</code></li>
<li><code>.shift</code></li>
<li><code>.meta</code></li>
</ul>
<p>ä¾‹å¦‚å½“ ctrl+enter é”®åŒæ—¶æŠ¬èµ·çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰“å°
<code>&lt;input&gt;</code> å…ƒç´ çš„å€¼ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter.ctrl</span>=<span class="string">&quot;handleEnter&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå½“æœ‰å¤šä¸ªä¿®é¥°ç¬¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨ <code>.</code>
ç¬¦å·è¿æ¥å°±å¯ä»¥äº†ã€‚</p>
<h4 id="exact-ä¿®é¥°ç¬¦">7.6.3 <code>.exact</code> ä¿®é¥°ç¬¦</h4>
<p><code>.exact</code>
ä¿®é¥°ç¬¦å…è®¸æˆ‘ä»¬æ§åˆ¶ç”±ç²¾ç¡®çš„ç³»ç»Ÿä¿®é¥°ç¬¦ç»„åˆè§¦å‘çš„äº‹ä»¶ã€‚</p>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter.ctrl</span>=<span class="string">&quot;handleEnter&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¸Œæœ›å½“ enter+ctrl é”®åŒæ—¶æŠ¬èµ·çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘
<code>handleEnter</code> äº‹ä»¶ã€‚ä½†æ˜¯å½“æˆ‘ä»¬åŒæ—¶æŠ¬èµ· enter+ctrl+shift
ä¸‰ä¸ªé”®çš„æ—¶å€™ï¼Œ <code>handleEnter</code>
äº‹ä»¶ä¹Ÿä¼šè¢«è§¦å‘ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸ç®¡æˆ‘ä»¬æŠ¬èµ·å‡ ä¸ªé”®ï¼Œåªè¦åŒ…å«äº† enter+ctrl
é”®æ—¶ï¼Œäº‹ä»¶éƒ½ä¼šè§¦å‘ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502100656101.gif"
alt="å›¾ç‰‡æè¿°" />
<figcaption aria-hidden="true">å›¾ç‰‡æè¿°</figcaption>
</figure>
<p>å¦‚æœæˆ‘ä»¬æ˜ç¡®è§„å®šåªéœ€è¦æŠ¬èµ· enter+ctrl é”®æ‰èƒ½è§¦å‘
<code>handleEnter</code> äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>.exact</code>
ä¿®é¥°ç¬¦ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter.ctrl.exact</span>=<span class="string">&quot;handleEnter&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é¡µé¢çš„æ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502100656032.gif"
alt="å›¾ç‰‡æè¿°" />
<figcaption aria-hidden="true">å›¾ç‰‡æè¿°</figcaption>
</figure>
<h2 id="å…«ç”Ÿå‘½å‘¨æœŸ">å…«ã€ç”Ÿå‘½å‘¨æœŸ</h2>
<h3 id="ä»‹ç»">8.1 ä»‹ç»</h3>
<p>ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼Ÿ</p>
<p>é¦–å…ˆæ¥çœ‹ä¸‹<code>Vue</code>å®˜æ–¹çš„ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/uid1889095-20240830-1725010317320.png"
alt="Vueå®˜æ–¹ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾" />
<figcaption aria-hidden="true">Vueå®˜æ–¹ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾</figcaption>
</figure>
<p>æˆ‘ä»¬å¯ä»¥æŠŠ Vue
å®ä¾‹çœ‹ä½œä¸€ä¸ªæœ‰ç”Ÿå‘½çš„ä¸ªä½“ï¼Œå®ƒä»è¢«åˆ›å»ºï¼ˆ<code>createApp()</code>ï¼‰åˆ°è¢«é”€æ¯
GCï¼ˆGarbage Collectionï¼šåƒåœ¾å›æ”¶ï¼‰å›æ”¶çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œè¢«ç§°ä¸º Vue
å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>Vue
å®ä¾‹æœ‰ä¸€ä¸ªå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬ï¼šå¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡ç‰ˆã€æŒ‚è½½
DOMã€åˆæ¬¡æ¸²æŸ“ç»„ä»¶-æ›´æ–°æ•°æ®-é‡æ–°æ¸²æŸ“ç»„ä»¶ã€å¸è½½ç­‰ä¸€ç³»åˆ—è¿‡ç¨‹ã€‚</p>
<p>ä»ä¸Šé¢çš„å›¾ä¸­ï¼Œæˆ‘ä»¬èƒ½æ¸…æ™°åœ°çœ‹åˆ° Vue å®ä¾‹çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p>
<h3 id="ç”Ÿå‘½å‘¨æœŸé’©å­">8.2 ç”Ÿå‘½å‘¨æœŸé’©å­</h3>
<p>Vueæä¾›çš„é’©å­å‡½æ•°æœ‰å“ªäº›ï¼Ÿ</p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header">
<th>é’©å­å‡½æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>onBeforeMount()</code></td>
<td>ç»„ä»¶æŒ‚è½½åˆ°çœŸå® DOM æ ‘ä¹‹å‰è¢«è°ƒç”¨ã€‚</td>
</tr>
<tr class="even">
<td><code>onMounted()</code></td>
<td>ç»„ä»¶è¢«æŒ‚è½½åˆ°çœŸå® DOM æ ‘ä¸­æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œå¯è¿›è¡Œ DOM æ“ä½œã€‚</td>
</tr>
<tr class="odd">
<td><code>onBeforeUpdate()</code></td>
<td>æ•°æ®æœ‰æ›´æ–°è¢«è°ƒç”¨ã€‚</td>
</tr>
<tr class="even">
<td><code>onUpdated()</code></td>
<td>æ•°æ®æ›´æ–°åè¢«è°ƒç”¨ã€‚</td>
</tr>
<tr class="odd">
<td><code>onBeforeUnmount()</code></td>
<td>ç»„ä»¶é”€æ¯å‰è°ƒç”¨ï¼Œå¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹æ•°æ®ã€‚</td>
</tr>
<tr class="even">
<td><code>onUnmounted()</code></td>
<td>ç»„ä»¶é”€æ¯åè°ƒç”¨ã€‚</td>
</tr>
</tbody>
</table>
<p>å¦‚æœå°†æ•´ä¸ªç”Ÿå‘½å‘¨æœŸæŒ‰ç…§é˜¶æ®µåˆ’åˆ†çš„è¯ï¼Œæ€»å…±åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šåˆå§‹åŒ–ã€è¿è¡Œä¸­ã€é”€æ¯ã€‚</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/uid1889095-20240830-1725010439152.png"
alt="ç”Ÿå‘½å‘¨æœŸç¼©ç•¥å›¾" />
<figcaption aria-hidden="true">ç”Ÿå‘½å‘¨æœŸç¼©ç•¥å›¾</figcaption>
</figure>
<h3 id="ä½¿ç”¨æ–¹æ³•">8.3 ä½¿ç”¨æ–¹æ³•</h3>
<ol type="1">
<li>é¦–å…ˆéœ€è¦å¯¼å…¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆä»¥<code>onBeforeMount</code>ğŸªä¸ºä¾‹ï¼‰ï¼š</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createApp, ref, onBeforeMount &#125; = <span class="title class_">Vue</span></span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>åœ¨<code>setup()</code>ä¸­è°ƒç”¨ï¼Œå¹¶å°†æ‰§è¡Œçš„å‡½æ•°ä½œä¸ºå‚æ•°ä¼ ç»™é’©å­å‡½æ•°ï¼š</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> num = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="title function_">onBeforeMount</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="onbeforemount-é’©å­å‡½æ•°">8.4 onBeforeMount() é’©å­å‡½æ•°</h3>
<p>å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œä»å­—é¢æ„æ€ä¸Šç†è§£å°±æ˜¯â€œæŒ‚è½½ä¹‹å‰â€ã€‚</p>
<p>åœ¨ <code>onBeforeMount()</code> é’©å­å‡½æ•°ä¸­ï¼Œè™šæ‹Ÿ DOM
å·²ç»åˆ›å»ºå®Œæˆï¼Œé©¬ä¸Šå°±è¦æ¸²æŸ“ï¼ˆæŒ‚è½½ï¼‰åˆ°çœŸå® DOM
æ ‘ä¸Šã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥è®¿é—®å’Œæ“ä½œç»„ä»¶æ•°æ®ï¼Œä¸”ä¸ä¼šè§¦å‘
<code>onUpdated()</code>
ç­‰å…¶ä»–çš„é’©å­å‡½æ•°ï¼Œä¸€èˆ¬å¯ä»¥åœ¨è¿™é‡Œåšåˆå§‹æ•°æ®çš„è·å–ï¼Œä¾‹å¦‚è°ƒç”¨<code>ajax</code>è¯·æ±‚æ•°æ®ä»€ä¹ˆçš„ã€‚</p>
<p>ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥å°è¯•åœ¨è¿™ä¸ªæ—¶æœŸæ¥è®¿é—®æ•°æ®æ˜¯å¦å­˜åœ¨ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡æ¡£<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;counter&quot;</span>&gt;</span>è®¡æ•°å™¨ï¼š&#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; createApp, ref, onBeforeMount &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> num = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">onBeforeMount</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-------- onBeforeMount() --------&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[ç»„ä»¶å±æ€§] <span class="subst">$&#123;num.value&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;counter&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[ç»„ä»¶ DOM] <span class="subst">$&#123;el?.innerText&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123; num &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œåå‘ç°è¿”å›çš„æ˜¯<code>undefined</code>ï¼Œè¯´æ˜è¿™ä¸ªæ—¶æœŸçš„<code>num</code>çš„<code>value</code>å€¼å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œä½†æ˜¯ç”±äºè¿˜æ²¡æœ‰æŒ‚è½½åˆ°<code>DOM</code>ä¸Šçš„åŸå› ï¼Œ<code>el.innerText</code>æ˜¯ä¸å­˜åœ¨çš„ã€‚</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2025-02-10%2007.14.29.png"
alt="æˆªå±2025-02-10 07.14.29" />
<figcaption aria-hidden="true">æˆªå±2025-02-10 07.14.29</figcaption>
</figure>
<blockquote>
<p><code>?.</code>æ˜¯å¯¹è±¡çš„å®‰å…¨è®¿é—®ä¿®é¥°ç¬¦ï¼Œæ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œå¦‚æœå¯¹è±¡ä¸­éœ€è¦è®¿é—®çš„æ•°æ®ä¸å­˜åœ¨å°±ä¼šè¿”å›ä¸€ä¸ª<code>undefined</code>å¦åˆ™æ­£å¸¸è¿”å›ã€‚</p>
</blockquote>
<h3 id="onmounted-é’©å­å‡½æ•°">8.5 onMounted() é’©å­å‡½æ•°</h3>
<p>å­—é¢ä¸Šæ¥ç†è§£å°±æ˜¯ï¼Œâ€œæŒ‚è½½äº†ä¹‹åâ€ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œ<strong>ed</strong>åœ¨è‹±æ–‡ä¸­æ˜¯è¿‡å»å¼çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯è¡¨ç¤ºåŠ¨è¯å·²ç»å®Œæˆäº†âœ…ã€‚</p>
<p>åœ¨ <code>onBeforeMount()</code> é’©å­å‡½æ•°è¢«è°ƒç”¨ä¹‹åï¼Œå¼€å§‹æ¸²æŸ“å‡ºçœŸå®
DOMï¼Œç„¶åæ‰§è¡Œ <code>onMounted()</code> é’©å­å‡½æ•°ã€‚</p>
<p>æ­¤æ—¶ï¼Œç»„ä»¶å·²ç»æ¸²æŸ“å®Œæˆï¼Œåœ¨é¡µé¢ä¸­å·²ç»çœŸå®å­˜åœ¨äº†ï¼Œå¯ä»¥åœ¨è¿™é‡Œåšä¿®æ”¹ç»„ä»¶ä¸­å±æ€§ï¼ˆæ¯”å¦‚å¼‚æ­¥è¯·æ±‚æ•°æ®ï¼‰ã€è®¿é—®çœŸå®
DOM ç­‰æ“ä½œã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡æ¡£<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;counter&quot;</span>&gt;</span>è®¡æ•°å™¨ï¼š&#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; createApp, ref, onBeforeMount &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> num = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">onBeforeMount</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-------- onBeforeMount() --------&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[ç»„ä»¶å±æ€§] <span class="subst">$&#123;num.value&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;counter&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[ç»„ä»¶ DOM] <span class="subst">$&#123;el?.innerText&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123; num &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œèƒ½æ­£å¸¸è®¿é—®åˆ°<code>DOM</code>ä¸­çš„<code>innerText</code>ï¼Œå› ä¸ºæ­¤æ—¶æ•°æ®å·²ç»è¢«æŒ‚è½½åˆ°<code>DOM</code>æ•°ä¸Šäº†ã€‚</p>
<h3 id="onbeforeupdate-é’©å­å‡½æ•°">8.6 onBeforeUpdate() é’©å­å‡½æ•°</h3>
<p>å½“ç»„ä»¶æˆ–å®ä¾‹çš„æ•°æ®æ›´æ”¹ä¹‹åï¼Œä¼šç«‹å³æ‰§è¡Œ <code>onBeforeUpdate()</code>
é’©å­å‡½æ•°ï¼Œç„¶å Vue çš„è™šæ‹Ÿ DOM ä¼šé‡æ–°æ„å»ºã€‚è™šæ‹Ÿ DOM ä¸ä¸Šä¸€æ¬¡çš„è™šæ‹Ÿ DOM
æ ‘åˆ©ç”¨ diff ç®—æ³•è¿›è¡Œå¯¹æ¯”ä¹‹åé‡æ–°æ¸²æŸ“æ¶‰åŠåˆ°æ•°æ®æ›´æ–°çš„ DOMã€‚</p>
<p>æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šåœ¨ <code>onBeforeUpdate()</code>
é’©å­å‡½æ•°ä¸­åšä»»ä½•æ“ä½œã€‚</p>
<p>å…·ä½“çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒä¸‹é¢è¿™æ®µä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;counter&quot;</span>&gt;</span>è®¡æ•°å™¨ï¼š&#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;change&quot;</span>&gt;</span>ä¿®æ”¹è®¡æ•°<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, ref, onBeforeUpdate &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> num = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">change</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-------- change() --------&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        num.<span class="property">value</span> = <span class="number">99</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">onBeforeUpdate</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-------- onBeforeUpdate() --------&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[ç»„ä»¶å±æ€§] <span class="subst">$&#123;num.value&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;counter&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[ç»„ä»¶ DOM] <span class="subst">$&#123;el?.innerText&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; num, change &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2025-02-10%2007.30.41.png"
alt="æˆªå±2025-02-10 07.30.41" />
<figcaption aria-hidden="true">æˆªå±2025-02-10 07.30.41</figcaption>
</figure>
<p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œå› ä¸ºæ˜¯â€œBeforeUpdate()â€œï¼Œæ‰€ä»¥æ­¤æ—¶<code>DOM</code>è¿˜æ²¡æœ‰æ›´æ–°ï¼Œ<code>num</code>çš„æ•°å€¼è™½ç„¶æ”¹å˜äº†ä½†æ˜¯<code>innerText</code>æš‚æ—¶æ²¡æœ‰æ›´æ–°ã€‚</p>
<p>å¹¶ä¸”ï¼Œç”±äº<code>Vue</code>ä¼šæ ¹æ®<strong>diffç®—æ³•</strong>æ¥èªæ˜çš„åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“<strong>domç»“æ„</strong>ï¼Œæ‰€ä»¥å†æ¬¡ç‚¹å‡»æŒ‰é’®æ—¶<code>num</code>æ•°å€¼æ²¡æœ‰æ”¹å˜ï¼Œ<code>Vue</code>å°±ä¼šè®¤ä¸ºä¸éœ€è¦é‡æ–°æ›´æ–°å’Œæ¸²æŸ“<code>DOM</code>ï¼Œä»è€Œä¸åœ¨è°ƒç”¨<code>onBeforeUpdate</code>äº†ã€‚</p>
<h3 id="onupdated-é’©å­å‡½æ•°">8.7 onUpdated() é’©å­å‡½æ•°</h3>
<p>å½“æ•°æ®æ›´æ–°å®Œæˆåï¼Œ<code>onUpdated()</code>
é’©å­å‡½æ•°ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚æ­¤æ—¶ï¼Œæ•°æ®å·²ç»æ›´æ”¹å®Œæˆï¼ŒDOM
ä¹Ÿé‡æ–°æ¸²æŸ“å®Œæˆã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ“ä½œæ›´æ–°åçš„è™šæ‹Ÿ DOM äº†ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;counter&quot;</span>&gt;</span>è®¡æ•°å™¨ï¼š&#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;change&quot;</span>&gt;</span>ä¿®æ”¹è®¡æ•°<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, ref, onUpdated &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> num = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">change</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-------- change() --------&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        num.<span class="property">value</span> = <span class="number">99</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">onUpdated</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-------- onUpdated() --------&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[ç»„ä»¶å±æ€§] <span class="subst">$&#123;num.value&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;counter&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[ç»„ä»¶ DOM] <span class="subst">$&#123;el?.innerText&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; num, change &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒåŒ <code>onBeforeUpdate()</code> ä¸€æ ·ï¼Œå†æ¬¡ç‚¹å‡»æŒ‰é’®å¯¹
<code>num</code> åšç›¸åŒå€¼çš„ä¿®æ”¹æ—¶ï¼Œ<code>onUpdated()</code>
ä¸ä¼šè¢«è§¦å‘ã€‚<code>onUpdated()</code> ä¸­å¯ä»¥é€šè¿‡è®¿é—®çœŸå® DOM
è·å–åˆ°æ›´æ–°åçš„ <code>num</code> çš„å€¼ã€‚</p>
<h3 id="onbeforeunmount-é’©å­å‡½æ•°">8.8 onBeforeUnmount() é’©å­å‡½æ•°</h3>
<p>ç»è¿‡æŸç§é€”å¾„è°ƒç”¨ç»„ä»¶ <code>unmount()</code> æ–¹æ³•åï¼Œä¼šç«‹å³æ‰§è¡Œ
<code>onBeforeUnmount()</code>
é’©å­å‡½æ•°ã€‚å¼€å‘è€…ä¸€èˆ¬ä¼šåœ¨è¿™é‡Œåšä¸€äº›å–„åå·¥ä½œï¼Œä¾‹å¦‚æ¸…é™¤è®¡æ—¶å™¨ã€æ¸…é™¤éæŒ‡ä»¤ç»‘å®šçš„äº‹ä»¶ç­‰ç­‰ã€‚</p>
<p>æˆ‘ä»¬å®ç°ä¸€ä¸ªè®¡æ•°å™¨æ•ˆæœï¼Œå¹¶åœ¨æŒ‡å®šæ—¶é—´åå°† Vue ç»„ä»¶å®ä¾‹é”€æ¯ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡æ¡£<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;counter&quot;</span>&gt;</span>è®¡æ•°å™¨ï¼š&#123;&#123; i &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; createApp, ref, onBeforeUnmount &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> i = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(i.<span class="property">value</span>++);</span></span><br><span class="line"><span class="language-javascript">          &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---- onBeforeUnmount ---&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">clearInterval</span>(timer);</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123; i &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        app.<span class="title function_">unmount</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">3000</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸åœ¨<code>onBeforeUnmount()</code>ä¸­æ¸…é™¤<code>timer</code>ï¼Œæ§åˆ¶å°ä¸Šå°±ä¼šç»§ç»­æ‰“å°æ•°å­—ã€‚ä½†æ˜¯å¾ˆæ˜¾ç„¶ï¼Œåº”ç”¨å·²ç»è¢«é”€æ¯äº†ï¼Œ<code>DOM</code>ä¸åœ¨æ›´æ–°ï¼Œæœ‰æ—¶å€™è¿™æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p>
<h3 id="onunmounted-é’©å­å‡½æ•°">8.9 onUnmounted() é’©å­å‡½æ•°</h3>
<p>ç»„ä»¶çš„æ•°æ®ç»‘å®šã€ç›‘å¬ç­‰ç­‰å»æ‰ä¹‹åï¼Œé¡µé¢ä¸­åªå‰©ä¸‹ä¸€ä¸ª DOM
çš„ç©ºå£³ã€‚è¿™ä¸ªæ—¶å€™ï¼Œ<code>onUnmounted()</code>
é’©å­å‡½æ•°è¢«è‡ªåŠ¨è°ƒç”¨äº†ï¼Œåœ¨è¿™é‡Œåšå–„åå·¥ä½œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ¯”å¦‚æ¸…é™¤è®¡æ—¶å™¨ã€æ¸…é™¤éæŒ‡ä»¤ç»‘å®šçš„äº‹ä»¶ç­‰ç­‰ã€‚</p>
<p>ç”±äºä»£ç åŸºæœ¬ä¸€æ ·ï¼Œè¿™é‡Œä¸åˆ—ä¸¾ï¼Œä¸¾ä¸€åä¸‰å³å¯ã€‚</p>
<h2 id="ä¹è®¡ç®—å±æ€§">ä¹ã€è®¡ç®—å±æ€§</h2>
<p>è™½ç„¶æ¨¡ç‰ˆå†…çš„è¡¨è¾¾å¼éå¸¸ä¾¿åˆ©ï¼Œä½†æ˜¯å®ƒä»¬çš„è®¾è®¡åˆè¡·æ˜¯ç”¨äºç®€å•è¿ç®—çš„ã€‚å¦‚æœåœ¨æ¨¡ç‰ˆä¸­æ”¾å…¥å¤ªå¤šé€»è¾‘ï¼Œä¼šè®©æ¨¡ç‰ˆè¿‡é‡ä¸”éš¾ä»¥ç»´æŠ¤ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨è´­ç‰©è½¦ä¸­æœ‰ä¸€ç§å•†å“ï¼Œæˆ‘ä»¬å¸Œæœ›æ ¹æ®å•ä»·å’Œæ•°é‡æ¥è®¡ç®—å®ƒçš„æ€»ä»·ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¸Œæœ›æ·»åŠ ä¸€äº›å…³é”®æ€§åˆ¤æ–­ï¼Œåœ¨å•†å“å•ä»·æˆ–æ•°é‡æ˜¯è´Ÿå€¼çš„æ—¶å€™ä»¤è®¡ç®—ç»“æœä¸º
<code>NaN</code>ã€‚</p>
<p>æˆ‘ä»¬çš„å®ç°å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡æ¡£<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å•†å“åï¼š&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å•†å“å•ä»·ï¼š&#123;&#123; price &#125;&#125; å…ƒ<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å•†å“æ•°é‡ï¼š&#123;&#123; num &#125;&#125; ä¸ª<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å•†å“â€œ&#123;&#123; name &#125;&#125;â€çš„æ€»ä»·ä¸ºï¼š&#123;&#123; price &gt;= 0 &amp;&amp; num &gt;= 0 ? price * num : NaN &#125;&#125; å…ƒ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addNum&quot;</span>&gt;</span>å¢åŠ å•†å“æ•°é‡<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;è‹¹æœ&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> price = <span class="title function_">ref</span>(<span class="number">5</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> num = <span class="title function_">ref</span>(-<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">function</span> <span class="title function_">addNum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            num.<span class="property">value</span>++</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123; name, price, num, addNum &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é¡µé¢æ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/uid1889095-20240826-1724641092408.gif"
alt="å›¾ç‰‡æè¿°" />
<figcaption aria-hidden="true">å›¾ç‰‡æè¿°</figcaption>
</figure>
<p>è™½ç„¶è¿™æ ·å†™å¯ä»¥å®ç°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†æ˜¯å¤§å®¶ä¼šå‘ç°æ’å€¼è¡¨è¾¾å¼è¿‡äºåºå¤§ï¼Œçœ‹ç€è®©äººæ™•çœ©ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬æ¨èä½¿ç”¨<strong>è®¡ç®—å±æ€§</strong>æ¥ä»£æ›¿æ¨¡æ¿ä¸­å¤æ‚çš„æ’å€¼è¡¨è¾¾å¼ã€‚</p>
<h3 id="ä½¿ç”¨æ–¹æ³•-1">9.1 ä½¿ç”¨æ–¹æ³•</h3>
<p>åœ¨ Vue ä¸­ï¼Œè®¡ç®—å±æ€§ä½¿ç”¨ <code>computed()</code>
å‡½æ•°å®šä¹‰ï¼Œå®ƒæœŸæœ›æ¥æ”¶ä¸€ä¸ªç”¨äºåŠ¨æ€è®¡ç®—å“åº”å¼æ•°æ®çš„å‡½æ•°ã€‚</p>
<p>ä¿®æ”¹ä¸Šæ–‡çš„ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å•†å“åç§°ï¼š&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å•†å“å•ä»·ï¼š&#123;&#123; price &#125;&#125; å…ƒ<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å•†å“æ•°é‡ï¼š&#123;&#123; num &#125;&#125; ä¸ª<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å•†å“â€œ&#123;&#123; name &#125;&#125;â€çš„æ€»ä»·ä¸ºï¼š&#123;&#123; totalPrice &#125;&#125; å…ƒ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addNum&quot;</span>&gt;</span>å¢åŠ å•†å“æ•°é‡<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref, computed &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&quot;è‹¹æœ&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> price = <span class="title function_">ref</span>(<span class="number">5</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> num = <span class="title function_">ref</span>(-<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> totalPrice = <span class="title function_">computed</span>(<span class="function">() =&gt;</span></span></span><br><span class="line"><span class="language-javascript">                                        price.<span class="property">value</span> &gt;= <span class="number">0</span> &amp;&amp; num.<span class="property">value</span> &gt;= <span class="number">0</span> ? price.<span class="property">value</span> * num.<span class="property">value</span> : <span class="title class_">NaN</span></span></span><br><span class="line"><span class="language-javascript">                                       );</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">addNum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                num.<span class="property">value</span>++;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; name, price, num, totalPrice, addNum &#125;;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>computed</code>æ–¹æ³•éœ€è¦åœ¨æœ€ä¸Šæ–¹è§£æ„<code>Vue</code>å¹¶å¼•å…¥ã€‚</p>
<p>ä½¿ç”¨è®¡ç®—å±æ€§è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯<code>Vue</code>çŸ¥é“<code>totalPrice</code>ä¾èµ–äº<code>num</code>å’Œ<code>price</code>ï¼Œå¦‚æœåä¸¤è€…å‘ç”Ÿäº†æ”¹åŠ¨ï¼Œ<code>totalPrice</code>ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°å’Œæ¸²æŸ“ã€‚</p>
<h3 id="è®¡ç®—å±æ€§å’Œæ™®é€šæ–¹æ³•">9.2 è®¡ç®—å±æ€§å’Œæ™®é€šæ–¹æ³•</h3>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨ <code>setup()</code>
ä¸­å®šä¹‰æ™®é€šæ–¹æ³•çš„æ–¹å¼å®ç°å‰é¢çš„åŠŸèƒ½ï¼Œä¸è¿‡è¿™ç§æ–¹å¼åªå»ºè®®åœ¨è®¡ç®—å±æ€§æ— æ³•æ»¡è¶³éœ€æ±‚çš„å¤æ‚æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>å•†å“åç§°ï¼š&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>å•†å“å•ä»·ï¼š&#123;&#123; price &#125;&#125; å…ƒ<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>å•†å“æ•°é‡ï¼š&#123;&#123; num &#125;&#125; ä¸ª<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å•†å“â€œ&#123;&#123; name &#125;&#125;â€çš„æ€»ä»·ä¸ºï¼š&#123;&#123; countTotal() &#125;&#125; å…ƒ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addNum&quot;</span>&gt;</span>å¢åŠ å•†å“æ•°é‡<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, ref, computed &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;è‹¹æœ&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> price = <span class="title function_">ref</span>(<span class="number">5</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> num = <span class="title function_">ref</span>(-<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">countTotal</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> price.<span class="property">value</span> &gt;= <span class="number">0</span> &amp;&amp; num.<span class="property">value</span> &gt;= <span class="number">0</span> ? price.<span class="property">value</span> * num.<span class="property">value</span> : <span class="title class_">NaN</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">addNum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        num.<span class="property">value</span>++</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; name, price, num, countTotal, addNum &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å°†åŒä¸€å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ï¼Œä¸¤ç§æ–¹å¼çš„æœ€ç»ˆç»“æœç¡®å®æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚</p>
<p>ç„¶è€Œä¸åŒçš„æ˜¯ï¼Œè®¡ç®—å±æ€§åªåœ¨ç›¸å…³å“åº”å¼ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚è¿™å°±æ„å‘³ç€åªè¦
<code>price</code> å’Œ <code>num</code> è¿˜æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¤šæ¬¡è®¿é—®
<code>totalPrice</code>
è®¡ç®—å±æ€§ä¼šç«‹å³è¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœï¼Œè€Œä¸å¿…å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥éªŒè¯ä¸‹è®¡ç®—å±æ€§å’Œæ™®é€šæ–¹æ³•åœ¨ç¼“å­˜åˆ©ç”¨ä¸Šçš„åŒºåˆ«ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è®¡æ•°å€¼ï¼š&#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addNum&quot;</span>&gt;</span>å¢åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä½¿ç”¨è®¡ç®—å±æ€§ï¼š&#123;&#123; getByComputed &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä½¿ç”¨æ™®é€šæ–¹æ³•ï¼š&#123;&#123; getByMethod() &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref, computed &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> num = <span class="title function_">ref</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">addNum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                num.<span class="property">value</span>++;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> getByComputed = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®¡ç®—å±æ€§è¢«è°ƒç”¨....&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="title class_">Date</span>.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">getByMethod</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ™®é€šå‡½æ•°æ–¹æ³•è¢«è°ƒç”¨....&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="title class_">Date</span>.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; num, addNum, getByComputed, getByMethod &#125;;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åŒæ—¶ç”¨æ™®é€šçš„å‡½æ•°å’Œè®¡ç®—å±æ€§å†™äº†ä¸€ä¸ªè·å–å½“å‰æ—¶é—´çš„åŠŸèƒ½ã€‚å¹¶ä¸”å¯ä»¥çœ‹åˆ°ï¼Œè®¡ç®—å±æ€§ç”±äºæ²¡æœ‰ä»»ä½•ä¾èµ–çš„å“åº”å¼å±æ€§ï¼Œæ— è®ºç‚¹å‡»å¤šå°‘æ¬¡æŒ‰é’®éƒ½åªä¼šè°ƒç”¨ä¸€æ¬¡ã€‚è€Œæ™®é€šå‡½æ•°å´ä¼šä¸€ç›´è°ƒç”¨ã€‚</p>
<p>è¿™ä¸ªä¾‹å­è¯´æ˜ï¼Œåœ¨æ€§èƒ½å¼€é”€æ¯”è¾ƒå¤§çš„è®¡ç®—åœºæ™¯ä¸‹å°½é‡ä½¿ç”¨è®¡ç®—å±æ€§ï¼Œå› ä¸ºå¦‚æœä¾èµ–çš„å“åº”å¼å±æ€§æ²¡æœ‰æ”¹å˜ï¼ŒVueä¼šä½¿ç”¨ç¼“å­˜ï¼Œå¯ä»¥èŠ‚çœå¤§é‡çš„è®¡ç®—ã€‚ä½†åœ¨å®æ—¶æ€§æ¯”è¾ƒå¼ºçš„åœºæ™¯ä¸‹å¯ä»¥ä½¿ç”¨æ™®é€šå‡½æ•°ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©æ°å½“çš„å®ç°æ–¹æ¡ˆã€‚</p>
<h3 id="å¯å†™çš„è®¡ç®—å±æ€§">9.3 å¯å†™çš„è®¡ç®—å±æ€§</h3>
<p>åœ¨å‰æ–‡çš„ç¤ºä¾‹ä¸­ï¼Œå®šä¹‰è®¡ç®—å±æ€§æ—¶ä¼ å…¥çš„å‡½æ•°ï¼Œå®é™…ä¸Šæ˜¯è¯¥è®¡ç®—å±æ€§çš„ <a
target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get">getter</a>
å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¿…é¡»å…·æœ‰è¿”å›å€¼ï¼Œä¸”åœ¨è®¿é—®è®¡ç®—å±æ€§æ—¶å¿…é¡»è°ƒç”¨çš„å‡½æ•°ã€‚å®ƒä¸åº”æœ‰å‰¯ä½œç”¨ï¼Œä»¥æ˜“äºæµ‹è¯•å’Œç†è§£ã€‚</p>
<p>è®¡ç®—å±æ€§çš„å®Œæ•´å†™æ³•æ˜¯ä¸€ä¸ªå…·æœ‰ getter å’Œ setter
å‡½æ•°çš„å¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹åªæœ‰ getterï¼Œä¸è¿‡åœ¨éœ€è¦æ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ª
setterã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">        firstName: &#123;&#123;firstName&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">        lastName: &#123;&#123;lastName&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">        fullName: &#123;&#123;fullName&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;change&quot;</span>&gt;</span>æ›´æ”¹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref, computed &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> firstName = <span class="title function_">ref</span>(<span class="string">&#x27;John&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> lastName = <span class="title function_">ref</span>(<span class="string">&#x27;Smith&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> fullName = <span class="title function_">computed</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">get</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span> firstName.<span class="property">value</span> + lastName.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    [firstName.<span class="property">value</span>, lastName.<span class="property">value</span>] = newValue.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">change</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                fullName.<span class="property">value</span> = <span class="string">&#x27;Dig Big&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; firstName, lastName, fullName, change &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="åä¾¦å¬å™¨">åã€ä¾¦å¬å™¨</h2>
<p>åœ¨Vueä¸­æˆ‘ä»¬ä½¿ç”¨<code>watch</code>å¯¹æ•°æ®è¿›è¡Œä¾¦å¬ï¼Œä¸€æ—¦æ•°æ®æ”¹å˜å°±èƒ½æ•æ‰åˆ°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> n = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_">watch</span>(n, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>æ¯”å¦‚è¿™æ®µä»£ç ï¼Œå°±æ˜¯ä¾¦å¬<code>n</code>çš„å˜åŒ–ã€‚å¦‚æœéœ€è¦å¯¹æ•°æ®è¿›è¡Œé™åˆ¶å°±å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚ä¸å¸Œæœ›<code>n</code>èƒ½è¶…è¿‡5ï¼š<code>if (newValue &gt; 5) n.value = oldValue;</code>ã€‚</p>
<p>å¯¹äº<code>v-model</code>æŒ‡ä»¤æ¥è¯´ï¼Œ<code>watch</code>çš„å­˜åœ¨åˆšå¥½å¯ä»¥èƒœä»»åŸæ¥<code>input</code>äº‹ä»¶çš„å·¥ä½œã€‚</p>
<p>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å¯èƒ½å°±ä¼šæœ‰äººæœ‰è¿™æ ·çš„é—®é¢˜äº†ï¼šâ€œä»€ä¹ˆæ—¶å€™ç”¨è®¡ç®—å±æ€§ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ä¾¦å¬å™¨å‘¢ï¼Ÿâ€</p>
<p>æ˜¾ç„¶ï¼Œå½“æ•°æ®å­˜åœ¨ä¾èµ–å…³ç³»æ—¶ï¼Œä½¿ç”¨è®¡ç®—å±æ€§æ˜¯æœ€ä½³é€‰æ‹©ã€‚å› ä¸ºåœ¨å¤šä¸ªä¾èµ–å…³ç³»ä¹‹é—´æ·»åŠ å¤šä¸ªä¾¦å¬å™¨è¿‡äºç¹çã€‚ä½†å¦‚æœæ•°æ®æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œåªæ˜¯éœ€è¦ç›‘å¬æ•°æ®çš„åŠ¨æ€å°±å¯ä»¥ä½¿ç”¨ä¾¦å¬å™¨ã€‚ä»–æœ¬è´¨ä¸Šç±»ä¼¼<strong>ES6</strong>ä¸­çš„æ•°æ®ä»£ç†<strong>Proxy</strong>ã€‚</p>
<h3 id="å³æ—¶ä¾¦å¬å™¨">10.1 å³æ—¶ä¾¦å¬å™¨</h3>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒVueä¸ºäº†æé«˜æ€§èƒ½åªä¼šåœ¨æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šæ‰§è¡Œ<code>watch</code>å†…çš„å›è°ƒå‡½æ•°ã€‚æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨åˆ›å»ºä¾¦å¬å™¨çš„æ—¶å€™å°±ç«‹å³æ‰§è¡Œä¸€æ¬¡å›è°ƒå°±éœ€è¦åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  num,</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;num å‘ç”Ÿäº†å˜åŒ–&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125; <span class="comment">// å³æ—¶ä¾¦å¬å™¨</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™ä¸ªæ—¶å€™<code>newValue</code>æ˜¯<code>num</code>çš„èµ·å§‹å€¼ï¼Œè€Œ<code>oldValue</code>æ˜¯<code>undefined</code>ã€‚</p>
</blockquote>
<h3 id="æ·±å±‚ä¾¦å¬å™¨">10.2 æ·±å±‚ä¾¦å¬å™¨</h3>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨<code>watch</code>ä¾¦å¬å¯¹è±¡å¯¹è±¡å†…éƒ¨çš„å±æ€§å‘ç”Ÿå˜åŒ–ä¸ä¼šè¢«ä¾¦å¬å™¨æ•æ‰åˆ°ã€‚éœ€è¦åœ¨<code>watch</code>çš„é…ç½®é¡¹ä¸­ä¼ å…¥ä¸€ä¸ª<code>deep</code>å‚æ•°å¹¶è®¾ç½®ä¸º<code>true</code>è¡¨ç¤ºæ·±å±‚ä¾¦å¬ã€‚æ¯”å¦‚è¿™é‡Œçš„<code>const list = ref(['a', 'b'])</code>æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚</p>
<p>å‘<code>list</code>ä¸­æ·»åŠ æ•°æ®æ—¶é¡µé¢èƒ½å¤Ÿå“åº”å¼çš„æ¸²æŸ“ï¼Œä½†<code>watch</code>æ²¡æœ‰ååº”ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  list,</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;list å‘ç”Ÿäº†å˜åŒ–&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125; <span class="comment">// æ·±å±‚ä¾¦å¬å™¨</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å®æµ‹æ—¶å€™ä¹Ÿèƒ½å‘ç°ï¼ŒåŠ å…¥<code>deep: true</code>åæˆåŠŸè®©ä¾¦å¬å™¨æ·±å±‚ä¾¦å¬äº†ã€‚</p>
<h2 id="åä¸€æ¡ä»¶æ¸²æŸ“">åä¸€ã€æ¡ä»¶æ¸²æŸ“</h2>
<h3 id="v-if-æŒ‡ä»¤">11.1 v-if æŒ‡ä»¤</h3>
<p><code>v-if</code>æŒ‡ä»¤è¯­æ³•ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;isRender&quot;</span>&gt;</span>è¿™æ˜¯ä¸€æ®µéšè—æ–‡æœ¬ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>&lt;p&gt;</code>åªä¼šåœ¨<code>isRender=true</code>çš„æƒ…å†µä¸‹æ¸²æŸ“ã€‚</p>
<h3 id="v-else-æŒ‡ä»¤">11.2 v-else æŒ‡ä»¤</h3>
<p>æœ‰â€ifâ€å°±æœ‰â€elseâ€ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code>v-else</code>æŒ‡ä»¤æ·»åŠ ä¸€ä¸ª<code>else</code>ä»£ç å—ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;isSunny&quot;</span>&gt;</span>ä»Šå¤©è‰³é˜³é«˜ç…§ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span>ä»Šå¤©å¯èƒ½ä¸‹é›¨ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="v-else-if-æŒ‡ä»¤">11.3 v-else-if æŒ‡ä»¤</h3>
<p>é‚£å½“ç„¶ä¹Ÿå°‘ä¸äº†<code>v-else-if</code>æŒ‡ä»¤ã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨<code>status</code>æ¥åˆ¤æ–­å¿«é€’çŠ¶æ€çš„å¤šæ¡ä»¶åˆ¤æ–­ä»£ç ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;status == 0&quot;</span>&gt;</span>å¾…æ½æ”¶<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else-if</span>=<span class="string">&quot;status == 1&quot;</span>&gt;</span>å·²æ½æ”¶<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else-if</span>=<span class="string">&quot;status == 2&quot;</span>&gt;</span>è¿è¾“ä¸­<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else-if</span>=<span class="string">&quot;status == 3&quot;</span>&gt;</span>é€è´§ä¸­<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else-if</span>=<span class="string">&quot;status == 4&quot;</span>&gt;</span>å·²ç­¾æ”¶<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span>ç‰©æµä¿¡æ¯æš‚æ—¶ç¼ºå¸­ï¼Œè¯·å’¨è¯¢å®¢æœå°å§å§<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="v-show-æŒ‡ä»¤">11.4 v-show æŒ‡ä»¤</h3>
<p>è¿™ä¸ªæŒ‡ä»¤ç”¨äºåšæ˜¾ç¤ºå’Œéšè—çš„åˆ‡æ¢ï¼Œä¾‹å¦‚é€‰é¡¹å¡çš„åŠŸèƒ½å°±å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•å®ç°ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502102012957.jpeg"
alt="å›¾ç‰‡æè¿°" />
<figcaption aria-hidden="true">å›¾ç‰‡æè¿°</figcaption>
</figure>
<p>ä»£ç ä¸Šå’Œ<code>v-if</code>åŸºæœ¬ä¸€è‡´ï¼Œè¿™é‡Œè¯´è¯´ä¸»è¦çš„åŒºåˆ«ï¼š</p>
<ol type="1">
<li><code>v-if</code>
æ˜¯â€œçœŸæ­£â€çš„æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒä¼šç¡®ä¿åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­ï¼Œæ¡ä»¶å—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶é€‚å½“åœ°è¢«é”€æ¯å’Œé‡å»ºã€‚</li>
<li><code>v-if</code>
ä¹Ÿæ˜¯æƒ°æ€§çš„ï¼šå¦‚æœåœ¨åˆå§‹æ¸²æŸ“æ—¶æ¡ä»¶ä¸ºå‡ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšâ€”â€”ç›´åˆ°æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“æ¡ä»¶å—ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>v-show</code>
å°±ç®€å•å¾—å¤šâ€”â€”ä¸ç®¡åˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Œå…ƒç´ æ€»æ˜¯ä¼šè¢«æ¸²æŸ“ï¼Œå¹¶ä¸”åªæ˜¯ç®€å•åœ°åŸºäº CSS
è¿›è¡Œåˆ‡æ¢ã€‚</li>
<li>ä¸€èˆ¬æ¥è¯´ï¼Œ<code>v-if</code> æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œè€Œ <code>v-show</code>
æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦éå¸¸é¢‘ç¹åœ°åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨
<code>v-show</code> è¾ƒå¥½ï¼›å¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œåˆ™ä½¿ç”¨
<code>v-if</code> è¾ƒå¥½ã€‚</li>
<li>å¦å¤–ï¼Œ<code>v-show</code> ä¸æ”¯æŒ <code>&lt;template&gt;</code>
å…ƒç´ ï¼Œä¹Ÿä¸æ”¯æŒ <code>v-else</code>ã€‚</li>
</ol>
<p>åœ¨ä½¿ç”¨ä¸Šï¼Œåƒå‰é¢ç¤ºä¾‹ä¸­æ ¹æ®å¤©æ°”æƒ…å†µå±•ç¤ºå¯¹åº”ä¿¡æ¯ä»¥åŠæ ¹æ®å“åº”å¼å±æ€§çš„å€¼æ˜¾ç¤ºå¯¹åº”ç‰©æµçŠ¶æ€çš„éœ€æ±‚ï¼Œç”±äºåªéœ€è¦åœ¨é¡µé¢åˆå§‹æ—¶æ¸²æŸ“ä¸€æ¬¡ï¼Œè€Œä¸ä¼šåƒé€‰é¡¹å¡é‚£æ ·é¢‘ç¹åˆ‡æ¢çš„æƒ…å†µï¼Œå»ºè®®ä½¿ç”¨
<code>v-if</code>ã€‚å¦‚æœä¸€ä¸ªé¡µé¢ä¸­éœ€è¦é¢‘ç¹åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨
<code>v-show</code>ã€‚</p>
<p><code>v-if</code>åœ¨æ¸²æŸ“æ—¶å¦‚æœæ¡ä»¶ä¸ºå‡ï¼Œåˆ™çœŸçš„ä¼šåœ¨DOMæ ‘ä¸Šè¢«ç§»é™¤ï¼Œè€Œ<code>v-show</code>åªæ˜¯å¤šäº†ä¸ª<code>display=none</code>çš„<code>style</code>å±æ€§ã€‚</p>
<h2 id="åäºŒåˆ—è¡¨æ¸²æŸ“">åäºŒã€åˆ—è¡¨æ¸²æŸ“</h2>
<h3 id="v-for-æŒ‡ä»¤">12.1 v-for æŒ‡ä»¤</h3>
<p><code>v-for</code>æŒ‡ä»¤èƒ½åƒç”¨<code>for</code>å¾ªç¯éå†æ•°ç»„ä¸€æ ·ç®€å•åœ°æ¸²æŸ“ä¸€æ•´ä¸ªæ•°ç»„ä¸­çš„æ•°æ®ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>item</code>å°±ä»£è¡¨ç€æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œ<code>items</code>å°±æ˜¯ç­‰å¾…éå†çš„æ•°ç»„ã€‚</p>
<p>ä¹Ÿå¯ä»¥ç”¨<code>of</code>ä»£æ›¿<code>in</code>æ•ˆæœä¸€è‡´ï¼Œæ›´æ¥è¿‘<code>JavaScript</code>çš„è¯­æ³•ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">&quot;item of items&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>v-for</code>è¿˜æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œæ•°ç»„ç´¢å¼•<code>index</code>ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in items&quot;</span>&gt;</span>&#123;&#123;index&#125;&#125; - &#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç±»ä¼¼äº <code>v-if</code>ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨å¸¦æœ‰ <code>v-for</code> çš„
<code>&lt;template&gt;</code> æ¥å¾ªç¯æ¸²æŸ“ä¸€æ®µåŒ…å«å¤šä¸ªå…ƒç´ çš„å†…å®¹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.name&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; item.msg &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>key</code>æ˜¯æ¯ä¸€ä¸ª<code>item</code>çš„å”¯ä¸€æ ‡è¯†ã€‚</p>
<h3 id="v-for-ä½œç”¨åŸŸ">12.2 v-for ä½œç”¨åŸŸ</h3>
<p>å’Œæ™®é€šçš„<code>for</code>å¾ªç¯ä¸€æ ·ï¼Œ<code>v-for</code>æŒ‡ä»¤ä¹Ÿæœ‰ä½œç”¨åŸŸã€‚Vueä¸­çš„<code>v-for</code>èƒ½è®¿é—®åˆ°<code>setup()</code>ä¸­ç”³æ˜çš„å˜é‡ã€‚</p>
<p>ä¸‹é¢è¿™æ®µä»£ç ä¸­çš„<code>parentValue</code>èƒ½è¢«æ­£å¸¸è®¿é—®ï¼Œå°±åƒå…¶ä»–çš„æ–‡æœ¬æ’å€¼é‚£æ ·ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) of myList&quot;</span>&gt;</span></span><br><span class="line">    å§“å: &#123;&#123;item&#125;&#125; ç´¢å¼•: &#123;&#123;index&#125;&#125; -- &#123;&#123;parentValue&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="v-for-éå†å¯¹è±¡">12.3 v-for éå†å¯¹è±¡</h3>
<p>éå¸¸ç±»ä¼¼äº<code>JavaScript</code>ä¸­çš„<code>for</code>å¾ªç¯ï¼Œä½¿ç”¨<code>v-for</code>è¯­å¥éå†å¯¹è±¡æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;value in person&quot;</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;value of person&quot;</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(info, key) of person&quot;</span>&gt;</span>&#123;&#123;key&#125;&#125;ï¼š&#123;&#123;info&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(info, keyï¼Œ index) of person&quot;</span>&gt;</span>&#123;&#123;key&#125;&#125;ï¼š&#123;&#123;info&#125;&#125; - &#123;&#123;index&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç±»ä¼¼äº<code>for</code>å¾ªç¯ï¼Œ<code>v-for</code>æŒ‡ä»¤ä¹Ÿå¯ä»¥ä½¿ç”¨åµŒå¥—çš„å†™æ³•ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;user in userList&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; user.name &#125;&#125;çš„ä¿¡æ¯<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å§“åï¼š&#123;&#123; user.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹´é¾„ï¼š&#123;&#123; user.age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>çˆ±å¥½<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;hobby in user.hobbies&quot;</span>&gt;</span>&#123;&#123; hobby &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> userList = <span class="title function_">ref</span>([</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">name</span>: <span class="string">&#x27;å°ç‹&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">hobbies</span>: [<span class="string">&#x27;åƒé¥­&#x27;</span>, <span class="string">&#x27;ç¡è§‰&#x27;</span>, <span class="string">&#x27;æ‰“æ¸¸æˆ&#x27;</span>] &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">name</span>: <span class="string">&#x27;å°èŠ±&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">hobbies</span>: [<span class="string">&#x27;å”±æ­Œ&#x27;</span>, <span class="string">&#x27;ç”»ç”»&#x27;</span>] &#125;,</span></span><br><span class="line"><span class="language-javascript">      ])</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; userList &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è‰¯å¥½çš„ä»£ç ä¹ æƒ¯æ˜¯å¹³æ—¶å…»æˆçš„ï¼Œå»ºè®®ä¸è¶…è¿‡ä¸‰å±‚åµŒå¥—ã€‚ä¸€æ˜¯ç®—æ³•æ•ˆç‡ä½ï¼ŒäºŒæ˜¯ä¸åˆ©äºä»£ç åæœŸçš„ç»´æŠ¤å·¥ä½œã€‚</p>
<h3 id="å°±åœ°æ›´æ–°ç­–ç•¥">12.4 å°±åœ°æ›´æ–°ç­–ç•¥</h3>
<p>Vueçš„åˆ—è¡¨æ¸²æŸ“é‡‡ç”¨å°±åœ°æ›´æ–°çš„ç­–ç•¥ã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœæ•°ç»„å‘ç”Ÿäº†æ”¹å˜ï¼ŒVueä¸ä¼šé‡æ–°æ¸²æŸ“æ‰€æœ‰çš„æ•°æ®é¡¹ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ›´æ–°æ•°ç»„ä¸­ä¸åŸæ•°ç»„ç›¸æ¯”å˜åŒ–çš„å…ƒç´ ã€‚</p>
<p>ä¾‹å¦‚ä¸‹å›¾ä¸­æ’å…¥äº†ä¸€ä¸ª<code>f</code>ï¼ŒæŒ‡æŒ¥æ›´æ”¹ä¸åŸæ•°ç»„ä¸åŒçš„å…ƒç´ ï¼Œä»è€Œå°±åœ°æ›´æ–°ã€‚åé¦ˆåˆ°DOMä¸Šå¯ä»¥æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œæ’å…¥å…ƒç´ ååªæœ‰<code>b</code>å¼€å§‹çš„å…ƒç´ çš„DOMç»“æ„æœ‰ç´«è‰²é—ªè¿‡ã€‚</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502110205823.jpeg"
alt="å›¾ç‰‡æè¿°" />
<figcaption aria-hidden="true">å›¾ç‰‡æè¿°</figcaption>
</figure>
<h3 id="é€šè¿‡-key-ç®¡ç†çŠ¶æ€">12.5 é€šè¿‡ key ç®¡ç†çŠ¶æ€</h3>
<p>ç»‘å®šäº†<code>key</code>ä¹‹åçš„å…ƒç´ ç›¸å½“äºæœ‰äº†ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ã€‚</p>
<p>è¿™æ˜¯ç»‘å®šçš„æ–¹å¼ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;user in userList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;user.name&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;user.name&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºkeyæœ‰å‡ ä¸ªå»ºè®®éµå¾ªçš„å‡†åˆ™ï¼š</p>
<ul>
<li>æœ€å¥½ä¸è¦ä½¿ç”¨<code>index</code>ä½œä¸ºå”¯ä¸€æ ‡è¯†ï¼Œ<code>index</code>å¯èƒ½ä¼šå˜åŠ¨ã€‚</li>
<li>å¦‚æœä¸æ˜¯æ•…æ„çš„ï¼Œæœ€å¥½ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„<code>key</code>ï¼Œå› ä¸ºå¯ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ul>
<p>è¿™æ˜¯ä¸ç»‘å®š<code>key</code>çš„æ¸²æŸ“åŸç†å›¾ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502110220397.jpeg"
alt="å›¾ç‰‡æè¿°" />
<figcaption aria-hidden="true">å›¾ç‰‡æè¿°</figcaption>
</figure>
<p>è¿™æ˜¯ç»‘å®šäº†<code>key</code>ä¹‹åçš„åŸç†å›¾ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502110220539.jpeg"
alt="å›¾ç‰‡æè¿°" />
<figcaption aria-hidden="true">å›¾ç‰‡æè¿°</figcaption>
</figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤æƒ…å†µä¸‹éœ€è¦é‡æ–°æ¸²æŸ“çš„å…ƒç´ ç”±äºæœ‰äº†å”¯ä¸€çš„æ ‡è¯†ï¼ŒVueè®¤è¯†å®ƒå¯ä»¥é‡ç”¨<code>DOM</code>ç»“æ„ï¼Œä»è€ŒèŠ‚çœäº†å†…å­˜å¼€æ”¯ã€‚</p>
<h3 id="v-for-å’Œ-v-if-åŒæ—¶ä½¿ç”¨">12.6 v-for å’Œ v-if åŒæ—¶ä½¿ç”¨</h3>
<p>å¦‚æœä½ åœ¨ä¸€ä¸ªå…ƒç´ ä¸­åŒæ—¶ç”¨äº†<code>v-if</code>å’Œ<code>v-for</code>æŒ‡ä»¤ï¼Œä¸è¦è®©ä»–ä»¬åŒæ—¶å¤„ç†åŒä¸€ä¸ªç»“ç‚¹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä»»åŠ¡åˆ—è¡¨<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;todo in todoList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;todo&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;index == 0&quot;</span>&gt;</span>&#123;&#123; todo &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> todoList = <span class="title function_">ref</span>([<span class="string">&#x27;ä¹°èœ&#x27;</span>, <span class="string">&#x27;æ´—è¡£æœ&#x27;</span>]) <span class="comment">// ç”¨äºå­˜å‚¨æ‰€æœ‰æ·»åŠ çš„ä»»åŠ¡</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; todoList &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œæ— æ³•æ‰¾åˆ°<code>index</code>ã€‚è¿™æ˜¯å› ä¸º<code>v-for</code>å’Œ<code>v-if</code>åŒæ—¶ä½¿ç”¨æ—¶ï¼Œ<code>v-if</code>çš„ä¼˜å…ˆçº§è¦é«˜äº<code>v-for</code>ï¼Œæ‰€ä»¥<code>v-if</code>æ‰¾ä¸åˆ°<code>v-for</code>èº«ä¸Šçš„å˜é‡ã€‚</p>
<p>è§£å†³æ–¹æ³•å°±æ˜¯å°†<code>v-for</code>æ”¾åˆ°å¾ªç¯çš„å¤–å±‚ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;(todo, index) in todoList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;todo&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">&quot;index == 0&quot;</span>&gt;</span>&#123;&#123; todo &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="åä¸‰æ¨¡æ¿å¼•ç”¨">åä¸‰ã€æ¨¡æ¿å¼•ç”¨</h2>
<p>è™½ç„¶Vueå¼€å‘è€…åŸºæœ¬ä¸æ€ä¹ˆéœ€è¦è‡ªå·±æ“ä½œDOMç»“æ„ï¼Œä½†åœ¨çœŸå®å¼€å‘ä¸­æ€»èƒ½ç¢°åˆ°ä¸€äº›æƒ…å†µæ˜¯éœ€è¦è‡ªå·±æ“ä½œDOMçš„ã€‚è¦å®ç°è¿™ä¸€ç‚¹å¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„æ¨¡æ¿å¼•ç”¨åŠŸèƒ½ã€‚</p>
<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡µé¢æ¸²æŸ“åå°†å…‰æ ‡å®šä½åˆ°ä¸€ä¸ªç‰¹å®šçš„<code>&lt;input&gt;</code>æ¡†ä¸Šå»ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    å…‰æ ‡å®šä½ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;input&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myInput&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref, onMounted &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> myInput = <span class="title function_">ref</span>(<span class="literal">null</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(myInput.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">                myInput.<span class="property">value</span>.<span class="title function_">focus</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; myInput &#125;;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;).<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åªæ˜¯ç»™<code>input</code>æ·»åŠ äº†ä¸€ä¸ª<code>ref</code>çš„å±æ€§ï¼Œé€šè¿‡å®ƒå°†<code>myInput</code>å’Œ<code>&lt;input&gt;</code>ç»‘å®šåœ¨äº†ä¸€èµ·ã€‚ç„¶åæˆ‘ä»¬åœ¨<code>onMounted</code>ä¹Ÿå°±æ˜¯æ¸²æŸ“å®Œæˆçš„é’©å­å‡½æ•°ä¸­æ‰§è¡Œé€»è¾‘<code>focus()</code>å³å¯ã€‚</p>
<p>è¿™æ®µä»£ç ä¸­çš„<code>ref</code>ä¼šåœ¨DOMæŒ‚è½½åå°†<code>myInput</code>çš„å€¼æŒ‡å‘ä½¿ç”¨<code>ref</code>å±æ€§çš„é‚£ä¸ªå…ƒç´ ã€‚</p>
<h3 id="ä¾¦å¬æ¨¡æ¿å¼•ç”¨">13.1 ä¾¦å¬æ¨¡æ¿å¼•ç”¨</h3>
<p>é™¤äº†ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­<code>onMounted</code>ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½ä½¿ç”¨<code>watchEffect</code>æ¥ä¾¦å¬æ¨¡æ¿å¼•ç”¨çš„å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯<code>ref</code>å˜é‡çš„å˜åŒ–ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createApp, ref, watchEffect &#125; = <span class="title class_">Vue</span>;</span><br><span class="line"><span class="title function_">createApp</span>(&#123;</span><br><span class="line">	<span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> myInput = <span class="title function_">ref</span>(<span class="literal">null</span>)</span><br><span class="line">    <span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(myInput.<span class="property">value</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">	<span class="keyword">return</span> &#123; myInput &#125;;</span><br><span class="line">&#125;,</span><br><span class="line">&#125;).<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œåå‘ç°ç»ˆç«¯è¾“å‡ºäº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡åˆ›å»º<code>myInput</code>è¿™ä¸ªæ¨¡æ¿å¼•ç”¨çš„æ—¶å€™è¢«Vueä¾¦å¬åˆ°ä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡æŒ‚è½½åå…ƒç´ ç»‘å®šå®ƒçš„æ—¶å€™ä¹Ÿè¢«ä¾¦å¬åˆ°äº†ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; null</span><br><span class="line">&gt;&gt; <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;input&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œä¸ºäº†ç¡®ä¿ä¾¦å¬åœ¨æ­£å¸¸DOMæŒ‚è½½åè¿›è¡Œï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹åˆå§‹åŒ–çš„<code>null</code>ã€‚éœ€è¦ä¸ºä¾¦å¬å™¨æ·»åŠ ä¸€ä¸ª<code>flushï¼š 'post'</code>çš„é…ç½®é¡¹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾¦å¬æ¨¡ç‰ˆå¼•ç”¨</span></span><br><span class="line"><span class="title function_">watchEffect</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// DOM å…ƒç´ å°†åœ¨åˆå§‹æ¸²æŸ“ååˆ†é…ç»™ ref</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(focusInput.<span class="property">value</span>)</span><br><span class="line">    <span class="comment">// focusInput.value.focus() // å…‰æ ‡å®šä½</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">flush</span>: <span class="string">&#x27;post&#x27;</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="v-for-ä¸­çš„æ¨¡æ¿å¼•ç”¨">13.2 v-for ä¸­çš„æ¨¡æ¿å¼•ç”¨</h3>
<p>åœ¨<code>v-for</code>ä¸­ç»‘å®š<code>ref</code>æ—¶ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ã€‚è¢«ç»‘å®šçš„<code>itemRefs</code>å°†ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ¨¡æ¿ï¼Œè€Œæ˜¯å°†<code>v-for</code>éå†çš„æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°è¿™ä¸ª<code>itemRefs</code>ä¸­å»ã€‚</p>
<p><code>itemRefs.value</code>æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯è¿™é‡Œ<code>v-for</code>éå†çš„æ‰€æœ‰çš„<code>&lt;li&gt;</code>çš„å¼•ç”¨ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;itemRefs&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;index&#125;&#125; - &#123;&#123;item&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥æ‰“å°ä¸€ä¸‹<code>itemRefs</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(itemRefs.<span class="property">value</span>));</span><br></pre></td></tr></table></figure>
<p>çœ‹åˆ°ç¡®å®æ˜¯ä¸€ä¸ªrefä»£ç†çš„æ•°ç»„ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502110313474.png"
alt="image-20250211031320975" />
<figcaption aria-hidden="true">image-20250211031320975</figcaption>
</figure>
<h2 id="åå››æ ·å¼ç»‘å®š">åå››ã€æ ·å¼ç»‘å®š</h2>
<p>å­¦äº†è¿™ä¹ˆå¤šæ¯ç‡¥çš„<code>Vue</code>å†…å®¹ï¼Œä½ æ˜¯å¦è¿˜è®°å¾—å½“åˆé‚£ä¸ªä»¤ä½ ç¥å¾€çš„è®©ä½ è¿·æ‹å‰ç«¯çš„äºšå½“çš„è‹¹æœ
- â€œCSSâ€ã€‚æ²¡é”™ï¼Œæ¥ä¸‹æ¥å°±å›´ç»•åœ¨Vueä¸­ç»‘å®šæ ·å¼ï¼ˆä¹Ÿå°±æ˜¯styleå±æ€§ï¼‰å±•å¼€ã€‚</p>
<h3 id="å†…è”æ ·å¼ç»‘å®š">14.1 å†…è”æ ·å¼ç»‘å®š</h3>
<p>å…ˆæ¥å›é¡¾ä¸€ä¸‹ï¼Œåœ¨æ²¡æœ‰Vueä¹‹å‰æˆ‘ä»¬æ˜¯æ€ä¹ˆå†™<code>style</code>çš„ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #87cefa; width: 100px; height: 40px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³è¦ä¿®æ”¹è¿™ä¸ªæ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>JavaScript</code>çš„<code>DOM</code>æ“ä½œæ¥è·å–å®ƒï¼Œå¹¶ä¿®æ”¹å®ƒçš„<code>style</code>ã€‚</p>
<p>å¦‚æœæ˜¯Vueå‘¢ï¼Ÿæˆ‘ä»¬å¾ˆå®¹æ˜“ä¼šæƒ³åˆ°<code>v-bind</code>è¿™ä¸ªæŒ‡ä»¤ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; backgroundColor: &#x27;#87CEFA&#x27;, width: &#x27;100px&#x27;, height: &#x27;40px&#x27; &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œæˆ‘ä»¬åœ¨Vueä¸­ä¸º<code>style</code>ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­é”®æ˜¯ä¹‹å‰çš„<code>style</code>å±æ€§ï¼Œé”®å¯¹åº”çš„å€¼æ˜¯è¯¥å±æ€§çš„å€¼ã€‚å¹¶ä¸”é”®çš„å†™æ³•ä½¿ç”¨äº†å°é©¼å³°çš„è§„èŒƒ(ä¹Ÿå¯ä»¥ç”¨å¼•å·æ‹¬èµ·æ¥è¡¨ç¤ºï¼Œå¦‚ï¼š<code>'background-color': '#87CEFA'</code>)ã€‚</p>
<blockquote>
<p>ä¸è¦å°è¯•å°†ä¸€ä¸ª<code>reative</code>çš„å¯¹è±¡ä½œä¸ºå†…è”æ ·å¼ä¼ å…¥ã€‚</p>
</blockquote>
<p>å®Œæˆä¸Šè¿°çš„å­¦ä¹ åï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•åšä¸€ä¸ªé˜…è¯»ç½‘ç«™ä¸»é¢˜èƒŒæ™¯è‰²å˜æ¢çš„åŠŸèƒ½ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡æ¡£<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; width: &#x27;100%&#x27;, height: &#x27;100%&#x27;, backgroundColor: isBlack ? &#x27;black&#x27; : &#x27;white&#x27; &#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; color: isBlack ? &#x27;white&#x27; : &#x27;black&#x27; &#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;isBlack = !isBlack&quot;</span>&gt;</span></span><br><span class="line">          å½“å‰ä¸º&#123;&#123; isBlack ? &#x27;é»‘å¤œæ¨¡å¼&#x27; : &#x27;ç™½å¤©æ¨¡å¼&#x27; &#125;&#125;ï¼Œç‚¹æˆ‘åˆ‡æ¢</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> isBlack = <span class="title function_">ref</span>(<span class="literal">false</span>) <span class="comment">// æ˜¯å¦ä¸ºä¸ºé»‘å¤œæ¨¡å¼</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123; isBlack &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">html</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">body</span>,</span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="style-æ•°ç»„è¯­æ³•">14.2 :style æ•°ç»„è¯­æ³•</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;[defaultStyles, &#123; backgroundColor: isBlack ? &#x27;black&#x27; : &#x27;white&#x27; &#125;]&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; color: isBlack ? &#x27;white&#x27; : &#x27;black&#x27; &#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;isBlack = !isBlack&quot;</span>&gt;</span></span><br><span class="line">      å½“å‰ä¸º&#123;&#123; isBlack ? &#x27;é»‘å¤œæ¨¡å¼&#x27; : &#x27;ç™½å¤©æ¨¡å¼&#x27; &#125;&#125;ï¼Œç‚¹æˆ‘åˆ‡æ¢</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> isBlack = <span class="title function_">ref</span>(<span class="literal">false</span>) <span class="comment">// æ˜¯å¦ä¸ºä¸ºé»‘å¤œæ¨¡å¼</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> defaultStyles = <span class="title function_">ref</span>(&#123; <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;100%&#x27;</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; isBlack, defaultStyles &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œå°†å›ºå®šä¸å˜çš„æ ·å¼å­˜åœ¨äº†ä¸€ä¸ªå¯¹è±¡å½“ä¸­ã€‚å¹¶åˆ©ç”¨ä¸€ä¸ªå­˜å‚¨<strong>style</strong>å¯¹è±¡çš„æ•°ç»„æ¥è¡¨ç¤ºï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;[defaultStyles, &#123; backgroundColor: isBlack ? &#x27;black&#x27; : &#x27;white&#x27; &#125;]&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœéœ€è¦æŠŠ<code>&#123; backgroundColor: isBlack ? 'black' : 'white' &#125;</code>ä¹Ÿå­˜èµ·æ¥ï¼Œéœ€è¦ä½¿ç”¨è®¡ç®—å±æ€§æ¥å®ç°ï¼Œä¸ç„¶ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ— æ³•å¼•èµ·Vueçš„é‡è§†ï¼Œä¹Ÿå°±ä¸ä¼šæ›´æ–°é¡µé¢çš„ä¸»é¢˜äº†ã€‚</p>
<p>æ”¹ä¸ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> activeStyles = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">backgroundColor</span>: isBlack.<span class="property">value</span> ? <span class="string">&#x27;black&#x27;</span> : <span class="string">&#x27;white&#x27;</span> &#125;))</span><br><span class="line">	<span class="keyword">return</span> &#123; isBlack, defaultStyles, activeStyles &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>å’Œ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;[defaultStyles, activeStyles]&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; color: isBlack ? &#x27;white&#x27; : &#x27;black&#x27;&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;isBlack = !isBlack&quot;</span>&gt;</span></span><br><span class="line">      å½“å‰ä¸º&#123;&#123; isBlack ? &#x27;é»‘å¤œæ¨¡å¼&#x27; : &#x27;ç™½å¤©æ¨¡å¼&#x27; &#125;&#125;ï¼Œç‚¹æˆ‘åˆ‡æ¢</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="ç±»åæ ·å¼ç»‘å®š">14.3 ç±»åæ ·å¼ç»‘å®š</h3>
<p>æ›¾æœ‰å‰è¾ˆè¯´è¿‡ï¼Œæˆ‘ä»¬çš„ä»£ç ä¸åªæœ‰codeï¼Œè¿˜æœ‰è¯—å’Œè¿œæ–¹ã€‚ä»€ä¹ˆæ„æ€ï¼Ÿæˆ‘ä»¬çš„ä»£ç è¦åƒè¯—ä¸€æ ·ä¼˜é›…ï¼æ‰€ä»¥å°±æœ‰äº†ï¼Œ<code>html</code>,<code>CSS</code>,<code>JavaScript</code>åˆ†ç¦»ï¼Œå†…è”æ ·å¼èƒ½ä¸ç”¨å°±ä¸ç”¨è¿™æ ·çš„è§„èŒƒã€‚</p>
<p>æ—¢ç„¶å†…è”æ ·å¼è¿™ä¹ˆåƒåœ¾ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç”¨<code>class</code>æ›¿æ¢æ‰å®ƒå§ã€‚</p>
<p>æˆ‘ä»¬ä¸ä»…å¯ä»¥å¯¹<code>style</code>ä½¿ç”¨<code>v-bind</code>æŒ‡ä»¤ã€‚å¯¹<code>class</code>ä½¿ç”¨<code>v-bind</code>å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; active: isActive &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œç»™<code>class</code>ä¼ å…¥äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­é”®è¡¨ç¤ºç±»åï¼Œå€¼è¡¨ç¤ºä¸é”®åŒåçš„ç±»æ˜¯å¦å¯ç”¨/æ¿€æ´»ã€‚</p>
<p>æ”¹å†™å‰é¢é‚£ä¸ªåˆ‡æ¢ä¸»é¢˜ä¾‹å­ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; default: true, active: isBlack &#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; &#x27;active-color&#x27;: isBlack &#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;isBlack = !isBlack&quot;</span>&gt;</span></span><br><span class="line">      å½“å‰ä¸º&#123;&#123; isBlack ? &#x27;é»‘å¤œæ¨¡å¼&#x27; : &#x27;ç™½å¤©æ¨¡å¼&#x27; &#125;&#125;ï¼Œç‚¹æˆ‘åˆ‡æ¢</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> isBlack = <span class="title function_">ref</span>(<span class="literal">false</span>) <span class="comment">// æ˜¯å¦ä¸ºä¸ºé»‘å¤œæ¨¡å¼</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; isBlack &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">html</span>,</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">body</span>,</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.default</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.active</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: black;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.active-color</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="class-æ•°ç»„è¯­æ³•">14.4 :class æ•°ç»„è¯­æ³•</h3>
<p>ä¸ä¸Šé¢çš„<code>style</code>ä¸€æ ·ï¼Œ<code>class</code>ä¹Ÿèƒ½ä½¿ç”¨æ•°ç»„è¯­æ³•ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;[&#x27;default&#x27;, isBlack ? &#x27;active&#x27; : &#x27;&#x27;]&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºåŒºåˆ«åœ¨äº<code>class</code>ä¸­çš„æ•°ç»„å…ƒç´ ä¸æ˜¯ä¸€ä¸ªä¸ªçš„å¯¹è±¡(<strong>styleObj</strong>)ï¼Œè€Œæ˜¯éœ€è¦å¯ç”¨çš„ç±»çš„ç±»åã€‚</p>
<p>ä¹Ÿå°±æ˜¯ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯è¯¥å…ƒç´ éœ€è¦åº”ç”¨çš„ç±»çš„åˆ—è¡¨ï¼Œå¦‚æœä¸éœ€è¦æŸä¸ªç±»äº†ï¼Œå°±ä»æ•°ç»„ä¸­ç§»é™¤ï¼Œåä¹‹æ·»åŠ åˆ°æ•°ç»„ä¸­ã€‚</p>
<h2 id="åäº”è¡¨å•ç»‘å®š">åäº”ã€è¡¨å•ç»‘å®š</h2>
<p>åœ¨æœ¬æ–‡çš„ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬å°±è®²åˆ°äº†<code>v-model</code>è¯­æ³•ï¼Œä½†ä¸èƒ½åªæ˜¯åœç•™åœ¨<code>input:text</code>ä¸Šï¼Œæˆ‘ä»¬æ¥æ‰©å±•ä¸€ä¸‹è¯¥æŒ‡ä»¤çš„åº”ç”¨ã€‚</p>
<h3 id="æ–‡æœ¬è¾“å…¥æ¡†text">15.1 æ–‡æœ¬è¾“å…¥æ¡†ï¼ˆTextï¼‰</h3>
<p>é¦–å…ˆæ¥çœ‹çœ‹åŒå‘ç»‘å®šçš„åŸç†å›¾ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/202502110406925.png"
alt="å›¾ç‰‡æè¿°" />
<figcaption aria-hidden="true">å›¾ç‰‡æè¿°</figcaption>
</figure>
<p>emmmï¼Œçœ‹äº†åˆå¥½åƒæ²¡çœ‹å¯¹å§ã€‚å…¶å®å®ƒæœ¬è´¨ä¸Šåªæ˜¯ä¸€ä¸ªåˆ©ç”¨äº†ç”¨æˆ·ä»£ç†å®ç°çš„è¯­æ³•ç³–è€Œå·²ã€‚ä»è¿™ä¸ªå›¾ä¸­ä¹Ÿèƒ½ä¸€ç¥<code>v-model</code>çš„å‘½ä»¤ç”±æ¥ï¼Œâ€œ<strong>view-model</strong>â€ä»£è¡¨è§†å›¾å’Œæ¨¡å‹çš„åŒå‘å¥”èµ´ã€‚</p>
<p>ç”¨äº†<code>v-model</code>åæˆ‘ä»¬å°±ä¸å†éœ€è¦è¡¨å•çš„<code>value</code>å€¼äº†ï¼Œåªéœ€è¦æŠŠ<code>Model</code>ä¸­ç»´æŠ¤çš„å˜é‡ä½œä¸º<code>value</code>ä½¿ç”¨å³å¯ã€‚</p>
<h3 id="æ–‡æœ¬åŸŸtextarea">15.2 æ–‡æœ¬åŸŸï¼ˆTextAreaï¼‰</h3>
<p>ä½¿ç”¨æ–¹æ³•å’Œ<code>Text</code>ä¸€è‡´ï¼Œç›´æ¥ç”¨<code>v-model</code>ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡ä¸Šå³å¯ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸èƒ½ä½¿ç”¨è¿™æ ·çš„è¯­æ³•ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span>&#123;&#123;myArea&#125;&#125;<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¸ç­‰åŒäºä¸‹æ–¹çš„å†™æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">v-model</span>=<span class="string">&quot;myArea&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="å¤é€‰æ¡†checkbox">15.3 å¤é€‰æ¡†ï¼ˆCheckBoxï¼‰</h3>
<h4 id="å•ä¸ªå¤é€‰æ¡†">15.3.1 å•ä¸ªå¤é€‰æ¡†</h4>
<p>å•ä¸ªå¤é€‰æ¡†å¯ä»¥ç›´æ¥è¿™æ ·ç»‘å®šï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å•ä¸ªï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;checked&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>checked</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> checked = <span class="title function_">ref</span>(<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<h4 id="å¤šä¸ªå¤é€‰æ¡†">15.3.2å¤šä¸ªå¤é€‰æ¡†</h4>
<p>é‚£å¦‚æœå¤šä¸ªå¤é€‰æ¡†ä¹‹é—´æœ‰å…³è”å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    è¯·é€‰æ‹©ä½ çš„çˆ±å¥½ï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;mountaineering&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç™»å±±&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;mountaineering&quot;</span>&gt;</span>ç™»å±±<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;basketball&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç¯®çƒ&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;basketball&quot;</span>&gt;</span>ç¯®çƒ<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;parachute&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è·³ä¼&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;parachute&quot;</span>&gt;</span>è·³ä¼<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>ä½ çš„çˆ±å¥½æœ‰: &#123;&#123; hobbies &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> hobbies = <span class="title function_">ref</span>([])</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; hobbies &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªçˆ±å¥½éƒ½æ˜¯ä¸€ä¸ªå¤é€‰æ¡†å¹¶æœ‰è‡ªå·±çš„å€¼ã€‚ä»–ä»¬éƒ½ä¸ä¸€ä¸ªæ•°ç»„ç»‘å®šåœ¨äº†ä¸€èµ·ï¼Œå‹¾é€‰æ—¶ä¼šè¢«æ·»åŠ åˆ°è¿™ä¸ªæ•°ç»„ä¸­ï¼Œåä¹‹ç§»é™¤ã€‚</p>
<h3 id="å•é€‰æ¡†radio">15.4 å•é€‰æ¡†ï¼ˆRadioï¼‰</h3>
<p>å•é€‰æ¡†ä¹‹é—´æ˜¯äº’æ–¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½å°†å¤šä¸ªå•é€‰æ¡†ç»‘å®šç»™ä¸€ä¸ª<code>radio</code>ï¼Œæ ¹æ®ä¸åŒçš„é€‰å–ï¼Œç»‘å®šçš„å€¼å°†ä¼šæ˜¯å¤šä¸ªäº’æ–¥å•é€‰æ¡†ä¸­çš„å…¶ä¸­ä¸€ä¸ªã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>æ€§åˆ«ï¼š&#123;&#123;gender&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;sex&quot;</span>&gt;</span>ç”·ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;gender&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;sex&quot;</span>&gt;</span>å¥³ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&quot;å¥³&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;gender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> gender = <span class="title function_">ref</span>(<span class="string">&#x27;æœªé€‰æ‹©&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; gender &#125;;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="é€‰æ‹©æ¡†select">15.5 é€‰æ‹©æ¡†ï¼ˆSelectï¼‰</h3>
<p>é€‰æ‹©æ¡†ä¹Ÿåˆ†ä¸¤ç§ï¼š</p>
<ul>
<li>å•é€‰</li>
<li>å¤šé€‰</li>
</ul>
<p>å…¶ä¸­å•é€‰æ¡†æœ€ä¸ºä¸»æµã€‚</p>
<h4 id="å•é€‰é€‰æ‹©æ¡†">15.5.1 å•é€‰é€‰æ‹©æ¡†</h4>
<p>æ¥çœ‹ä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>é€‰æ‹©çš„åŸå¸‚ï¼š&#123;&#123;city&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">disabled</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>-- è¯·é€‰æ‹©ä½ çš„åŸå¸‚ --<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>åŒ—äº¬<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>æ­å·<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>ä¸Šæµ·<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> city = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; city &#125;;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé€‰æ‹©çš„å€¼æœ€ç»ˆè½åœ¨<code>select</code>èº«ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬å°†<code>&lt;select&gt;</code>ä¸æˆ‘ä»¬çš„å˜é‡<code>city(Ref)</code>ç»‘å®šèµ·æ¥ã€‚</p>
<h4 id="å¤šé€‰é€‰æ‹©æ¡†">15.5.2 å¤šé€‰é€‰æ‹©æ¡†</h4>
<p>åªéœ€è¦åœ¨<code>&lt;select&gt;</code>ä¸­æ·»åŠ ä¸€ä¸ª<code>multiple</code>å±æ€§å°±èƒ½è®©é€‰æ‹©æ¡†å˜æˆå¤šé€‰é€‰æ‹©æ¡†ã€‚æˆ‘ä»¬å†å‚ç…§å¤šé€‰æ¡†çš„æ–¹æ³•ï¼Œå°†<code>&lt;select&gt;</code>ä¸ä¸€ä¸ªæ•°ç»„åŒç»‘å®šå³å¯ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>é€‰æ‹©çš„åŸå¸‚ï¼š&#123;&#123;city&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;city&quot;</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">disabled</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>-- è¯·é€‰æ‹©ä½ çš„åŸå¸‚ --<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>åŒ—äº¬<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>æ­å·<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span>&gt;</span>ä¸Šæµ·<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> city = <span class="title function_">ref</span>([<span class="string">&#x27;æµ™æ±Ÿ&#x27;</span>]);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; city &#125;;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¿®é¥°ç¬¦-1">15.6 ä¿®é¥°ç¬¦</h3>
<p><code>v-model</code> çš„ä¿®é¥°ç¬¦åŒ…æ‹¬ä»¥ä¸‹ä¸‰ç§ï¼š</p>
<table>
<thead>
<tr class="header">
<th>ä¿®é¥°ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>.lazy</code></td>
<td>åœ¨ <code>change</code> äº‹ä»¶ä¹‹åå°†è¾“å…¥æ¡†çš„å€¼ä¸æ•°æ®è¿›è¡ŒåŒæ­¥ã€‚</td>
</tr>
<tr class="even">
<td><code>.number</code></td>
<td>è‡ªåŠ¨å°†ç”¨æˆ·çš„è¾“å…¥å€¼è½¬ä¸ºæ•°å€¼ç±»å‹ã€‚</td>
</tr>
<tr class="odd">
<td><code>.trim</code></td>
<td>è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–å°¾ç©ºç™½å­—ç¬¦ã€‚</td>
</tr>
</tbody>
</table>
<p>ä»¥<code>lazy</code>ä¸ºä¾‹ï¼Œè§£é‡Šä¸€ä¸‹åŒå‘ç»‘å®šä¿®é¥°ç¬¦çš„ç”¨æ³•ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model.lazy</span>=<span class="string">&quot;msg&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;Hello World!&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; msg &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œä½ ä¼šå‘ç°åœ¨æ–‡æœ¬æ¡†çš„<code>change</code>äº‹ä»¶åç»‘å®šçš„æ•°æ®æ‰è¢«æ›´æ–°ï¼Œå…¶å®å°±æ˜¯è¾“å…¥å¤±ç„¦æ‰æ›´æ–°æ•°æ®ã€‚</p>
<p>å®é™…ä¸Šï¼Œ<code>lazy</code>çš„æ„ä¹‰åœ¨äºæ€§èƒ½ã€‚åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­éœ€è¦å®æ—¶æ›´æ–°<code>input</code>æ¡†çš„åœºæ™¯å¾ˆå°‘ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦è¾“å…¥æ”¹å˜å°±ç«‹å³æ›´æ–°ç»‘å®šçš„æ•°æ®ã€‚åœ¨æäº¤è¡¨å•åå†æ›´æ–°å°±å¥½äº†ã€‚</p>
<h2 id="åå…­ç»„ä»¶æ³¨å†Œæœºåˆ¶">åå…­ã€ç»„ä»¶æ³¨å†Œæœºåˆ¶</h2>
<p>Vueä¸­çš„ç»„ä»¶æ³¨å†Œåˆ†ä¸ºå…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œ - å…¨å±€æ³¨å†Œ <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;t1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span>&gt;</span>Click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">my-button</span>&gt;</span><span class="tag">&lt;/<span class="name">my-button</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title class_">MyButton</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">template</span>: <span class="string">`#t1`</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> msg = <span class="title function_">ref</span>(<span class="string">&quot;HEllo WOlrd!&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> &#123;msg&#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        app.<span class="title function_">component</span>(<span class="string">&#x27;my-button&#x27;</span>, <span class="title class_">MyButton</span>)</span></span><br><span class="line"><span class="language-javascript">        app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œæˆ‘è¸©äº†ä¸€ä¸ªå‘ã€‚åœ¨ç»‘å®šappæ—¶ä¸èƒ½è¿™æ ·å†™ï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> msg = <span class="title function_">ref</span>(<span class="string">&quot;HEllo WOlrd!&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;msg&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;).<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">component</span>(<span class="string">&#x27;my-button&#x27;</span>, <span class="title class_">MyButton</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
è¿™æ ·çš„å†™æ³•ä¼šå¯¼è‡´é¡µé¢æ— æ³•æ˜¾ç¤ºï¼Œæ­£ç¡®çš„æ–¹å¼åº”æ˜¯å°†æ³¨å†Œç»„ä»¶æ”¾åœ¨æŒ‚åœ¨åˆ°appä¸Šä¹‹å‰ï¼ˆamountï¼‰ã€‚</p>
<ul>
<li>å±€éƒ¨æ³¨å†Œ åœ¨ä»»ä½•ä¸€ä¸ªå®ä¾‹å¯¹è±¡ä¸­ç”¨ï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">components: &#123; MyButton &#125;, // æ³¨å†Œå±€éƒ¨ç»„ä»¶ MyButton</span><br></pre></td></tr></table></figure>
å¯ä»¥ä¸ºå½“å‰å®ä¾‹æ³¨å†Œä¸€ä¸ªå±€éƒ¨çš„ç»„ä»¶ã€‚
å…¨å±€ç»„ä»¶å’Œå±€éƒ¨ç»„ä»¶çš„åŒºåˆ«åœ¨äºå…¶ä½œç”¨åŸŸä»¥åŠæ€§èƒ½ã€‚ å®é™…ä½¿ç”¨å°±æ˜¯ï¼š
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> msg = <span class="title function_">ref</span>(<span class="string">&quot;HEllo WOlrd!&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;msg&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">MyButton</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>å½“ç„¶ï¼Œç”±äºå…¶å®šä¹‰çš„ä¸€è‡´æ€§ï¼Œä¸Šè¿°ä»£ç çœç•¥äº†ç»„ä»¶çš„å®šä¹‰éƒ¨åˆ†ã€‚</p>
<p>ç»„ä»¶çš„å‘½åæœ‰ä¸¤ç§æ–¹å¼ï¼Œå…¶ä¸­å¤§é©¼å³°ä¼šè¢«Vueè½¬åŒ–ä¸ºçŸ­æ¨ªçº¿å¤„ç†ï¼Œå¹¶ä¸”ä¸èƒ½åœ¨HTMLæ ‡ç­¾ä¸­ä½¿ç”¨é©¼å³°å‘½åã€‚å› ä¸ºæµè§ˆå™¨å¤§å°å†™ä¸åŒºåˆ†ï¼Œæ‰€ä»¥è¾ƒå¥½çš„æ–¹å¼æ˜¯ä¸€è‡´ä½¿ç”¨çŸ­æ¨ªçº¿å‘½åã€‚ï¼ˆJSä¸­å¯ä»¥ä½¿ç”¨é©¼å³°æ³•å‘½åå¯¹è±¡ï¼‰</p>
<h2 id="åä¸ƒç»„ä»¶çš„-prop">åä¸ƒã€ç»„ä»¶çš„ prop</h2>
<p>ç»„ä»¶å¯ä»¥é€šè¿‡propæ¥ä¼ å…¥å˜é‡ï¼Œå°±åƒå‡½æ•°çš„å‚æ•°é‚£æ ·ã€‚ ä½¿ç”¨æ–¹æ³•ä¸ºï¼š
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»„ä»¶ MyButton --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-button&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span>&gt;</span>&#123;&#123; text &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> <span class="title class_">MyButton</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">template</span>: <span class="string">`#my-button`</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">props</span>: [<span class="string">&#x27;text&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ ¹ç»„ä»¶ App --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">my-button</span> <span class="attr">text</span>=<span class="string">&quot;ç™»å½•&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">my-button</span> <span class="attr">text</span>=<span class="string">&quot;æ³¨å†Œ&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">my-button</span> <span class="attr">text</span>=<span class="string">&quot;æœç´¢&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123; <span class="title class_">MyButton</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
ç®€å•æ¥è¯´å°±æ˜¯åœ¨ç»„ä»¶å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ª<code>props</code>å±æ€§ï¼Œå±æ€§å€¼ä¸ºä¼ å…¥å‚æ•°åçš„å­—ç¬¦ä¸²ã€‚</p>
<p>ç„¶åç›´æ¥åœ¨htmlæ ‡ç­¾ä½¿ç”¨ä½ç½®ä½œä¸ºæ ‡ç­¾å±æ€§ä¼ å…¥å³å¯ã€‚</p>
<p>ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œpropsçš„å‘½åéµå¾ªå’Œç»„ä»¶å‘½åä¸€æ ·çš„é€»è¾‘ã€‚</p>
<p>ç»„ä»¶çš„propä¸­å¯ä»¥å°†å¯¹è±¡ç›´æ¥ä½œä¸ºå˜é‡ä¼ å…¥ï¼Œä¸”ç»„ä»¶çš„propéµå¾ªå•å‘æ•°æ®æµåŸåˆ™ã€‚ç»„ä»¶ä¸­ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ å…¥çš„å˜é‡ä¸ä¼šç›´æ¥ä½œç”¨åŸŸçˆ¶ç»„ä»¶ã€‚</p>
<p>ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯å°†çˆ¶ç»„ä»¶ä¼ å…¥çš„å˜é‡ä½œä¸ºåˆå§‹å€¼æˆ–è€…åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰ä¸€ä¸ªä¿®æ”¹çˆ¶ç»„ä»¶å˜é‡çš„å‡½æ•°å¹¶å°†è¿™ä¸ªå‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶ã€‚</p>
<p>å¦‚æœæƒ³è¦æ”¹å˜propï¼Œå¯ä»¥è¿™æ ·å°†propsä¼ é€’ç»™setopä½œä¸ºå‚æ•°: <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»„ä»¶ Counter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;counter&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>[Prop] num = &#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>[Ref] counter = &#123;&#123; counter &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter++&quot;</span>&gt;</span>å¢åŠ  counter<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> <span class="title class_">Counter</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">template</span>: <span class="string">`#counter`</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">props</span>: [<span class="string">&#x27;num&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params">props</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> counter = <span class="title function_">ref</span>(props.<span class="property">num</span>) <span class="comment">// ä½¿ç”¨ Prop ä½œä¸ºåˆå§‹å€¼</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; counter &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
ç¤ºä¾‹çš„computedæ–¹æ³•åœ¨ç»„ä»¶ä¸­ä¾ç„¶å®ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨è®¡ç®—æ–¹æ³•æ¥åˆ›å»ºç»„ä»¶å±æ€§ã€‚</p>
<p><code>props</code>ä¹Ÿå¯ä»¥è¿›è¡Œæ•°æ®çš„æ ¡éªŒï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">  name: String,</span><br><span class="line">  price: Number,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<p>ä¹Ÿå°±æ˜¯å°†<code>props</code>æ¢æˆå¯¹è±¡çš„å†™æ³•ï¼Œé”®ä¸ºå˜é‡åï¼Œå€¼ä¸ºæ ¡éªŒçš„å˜é‡ç±»å‹ã€‚</p>
<p>è¿™æ ·ä»¥åæ§åˆ¶å°åœ¨ç±»å‹ä¸åŒæ—¶å°±ä¼šäº§ç”Ÿè­¦å‘Šä¿¡æ¯ã€‚</p>
<h2 id="åå…«ç»„ä»¶äº‹ä»¶">åå…«ã€ç»„ä»¶äº‹ä»¶</h2>
<p>ç”±äºå•å‘æ•°æ®æµçš„é™åˆ¶ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ç»™çˆ¶ç»„ä»¶ä¼ é€’å˜é‡ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œæµè§ˆå™¨ä¸­çš„äº‹ä»¶å‡½æ•°å¯ä»¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚ç»„ä»¶äº‹ä»¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
<h3 id="æ³¨å†Œäº‹ä»¶å’Œä½¿ç”¨">18.1 æ³¨å†Œäº‹ä»¶å’Œä½¿ç”¨</h3>
<p>å…·ä½“åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š -
æ³¨å†Œäº‹ä»¶åï¼šä½¿ç”¨ç»„ä»¶çš„<code>emits</code>æ–¹æ³•æ³¨å†Œäº‹ä»¶å -
ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°ï¼šä½¿ç”¨<code>v-on</code>ç»™äº‹ä»¶ç»‘å®šè‡ªå®šä¹‰å‡½æ•°-
è§¦å‘äº‹ä»¶ï¼šåœ¨ç»„ä»¶çš„<code>setup()</code>æ–¹æ³•ä¸­ä¼ å…¥<code>emit()</code>å‡½æ•°æ¥è§¦å‘ã€‚</p>
<ol type="1">
<li>æ³¨å†Œäº‹ä»¶ <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡æ¡£<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç»„ä»¶ MyButton --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-button&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;onClick&quot;</span>&gt;</span>&#123;&#123; text &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> <span class="title class_">MyButton</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">template</span>: <span class="string">`#my-button`</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">props</span>: [<span class="string">&#x27;text&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">emits</span>: [<span class="string">&#x27;myClick&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params">props, &#123; emit &#125;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">function</span> <span class="title function_">onClick</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">emit</span>(<span class="string">&#x27;myClick&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123; onClick &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ ¹ç»„ä»¶ App --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">my-button</span> <span class="attr">text</span>=<span class="string">&quot;ç™»å½•&quot;</span> @<span class="attr">my-click</span>=<span class="string">&quot;login&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; createApp &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">components</span>: &#123; <span class="title class_">MyButton</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ­£åœ¨ç™»å½•...&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123; login &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>æˆ‘ä»¬åˆ©ç”¨<code>emits: [...]</code>æ¥æ³¨å†Œäº†ä¸€ä¸ªäº‹ä»¶ï¼Œåœ¨æ ‡ç­¾ä¸­ä¼ å…¥åŒåçš„äº‹ä»¶ã€‚ç„¶ååœ¨<code>@my-click="..."</code>çš„å€¼ä¸­ä¼ å…¥æˆ‘ä»¬éœ€è¦åœ¨çˆ¶ç»„ä»¶ä¸Šè°ƒç”¨åŠŸèƒ½ã€‚</p>
<p>ä¸è¿‡è¿™åªåšåˆ°äº†å‘çˆ¶ç»„ä»¶é€šçŸ¥çš„ä½œç”¨ã€‚</p>
<p>å¦‚æœéœ€è¦é€šçŸ¥çˆ¶ç»„ä»¶çš„è¿‡ç¨‹æºå¸¦æ•°æ®å°±éœ€è¦ä¿®æ”¹æœ€å¼€å§‹<code>emit</code>å’Œæœ€åçˆ¶ç»„ä»¶ä¸­ç”¨äº‹ä»¶æ‰§è¡Œçš„å‡½æ•°ï¼š
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">emit</span>(<span class="string">&quot;login&quot;</span>, <span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;login&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>é¿å…ä½¿ç”¨åŸç”Ÿäº‹ä»¶åä½œä¸ºç»„ä»¶çš„äº‹ä»¶åæ³¨å†Œã€‚</p>
</blockquote>
<h3 id="äº‹ä»¶åé—®é¢˜">18.2 äº‹ä»¶åé—®é¢˜</h3>
<p>ä¸è¿‡è¿™é‡Œè¿˜æ˜¯æ¥è®²ä¸€ä¸‹ä½¿ç”¨åŸç”Ÿäº‹ä»¶åæ³¨å†Œç»„ä»¶çš„å¯èƒ½æ€§ã€‚</p>
<p>å¦‚æœä½¿ç”¨äº†åŒåŸç”Ÿç»„ä»¶åŒåçš„ç»„ä»¶åï¼Œä¼šè¦†ç›–æ‰å¯¹åº”çš„åŸç”Ÿç»„ä»¶ä¸”å¯ä»¥æ­£å¸¸è°ƒç”¨ã€‚ä½†å¦‚æœå•ç‹¬å°†<code>emits: [...]</code>è¿™é‡Œåˆ å»ï¼Œåˆ™ä¼šå‘ç”Ÿå¤šæ¬¡è°ƒç”¨ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºå¦‚æœå†™äº†<code>emits</code>å°±åªä¼šæ‰§è¡Œè¦†ç›–çš„ï¼Œå¦åˆ™éƒ½ä¼šæ‰§è¡Œã€‚</p>
<h3 id="äº‹ä»¶åéªŒè¯">18.3 äº‹ä»¶åéªŒè¯</h3>
<p>ç±»ä¼¼äº<code>props</code>çš„æ ¡éªŒæ–¹æ³•ï¼Œäº‹ä»¶ä¹Ÿå¯ä»¥å¯¹è¿”å›å‡ºå»çš„æ•°æ®è¿›è¡Œæ ¡éªŒã€‚
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">emits</span>: &#123;</span><br><span class="line">    <span class="attr">login</span>: <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> value.<span class="title function_">startsWith</span>(<span class="string">&quot;E&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
æ¯”å¦‚ä¸Šè¿°ä»£ç å°±æ£€éªŒäº†<code>emit("...", ...)</code>ä¸­è¿”å›çš„ç¬¬äºŒå‚æ•°ï¼Œä¹Ÿå°±æ˜¯æ•°æ®æ˜¯å¦æ»¡è¶³æ¡ä»¶ã€‚å¦‚æœä¸æ»¡è¶³æ¡ä»¶åˆ™ä¼šåœ¨æ§åˆ¶å°æŠ›å‡ºè­¦å‘Šã€‚</p>
<h2 id="åä¹ç»„ä»¶-v-model">åä¹ã€ç»„ä»¶ v-model</h2>
<h3 id="v-modelçš„ä½¿ç”¨">19.1 v-modelçš„ä½¿ç”¨</h3>
<p>å¦‚æœåœ¨ç»„ä»¶ä¸Šä½¿ç”¨<code>v-model</code>: <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CustomInput</span> <span class="attr">v-model</span>=<span class="string">&quot;searchText&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
Vueä¼šå°†å…¶è½¬åŒ–æˆï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CustomInput</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:model-value</span>=<span class="string">&quot;searchText&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">update:model-value</span>=<span class="string">&quot;newValue =&gt; searchText = newValue&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>
å…¶ä¸­ï¼Œ<code>model-vlaue</code>æ˜¯ä¸€ä¸ª<code>prop</code>,<code>update:model-value</code>æ˜¯ä¸€ä¸ªç»„ä»¶äº‹ä»¶ã€‚</p>
<p>æ‰€ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨<code>v-model</code>æˆ‘ä»¬åªéœ€è¦åšä¸¤ä»¶äº‹æƒ…ï¼š -
æ¥å—propå˜é‡ - è°ƒç”¨<code>emit</code>å‘Šè¯‰vueå¦‚ä½•ç”¨ç»„ä»¶æ›´æ–°å€¼
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">props: [&#x27;modelValue&#x27;],</span><br><span class="line">emits: [&#x27;update:model-value&#x27;]</span><br></pre></td></tr></table></figure>
ç„¶åå†é€šè¿‡å‘é€ä¿¡å·(<strong>emit</strong>)æ¥æ›´æ–°å€¼å°±å¯ä»¥äº†ï¼š
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;t1&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;updateInput&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">const</span> <span class="title class_">MyInput</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="attr">template</span>: <span class="string">&quot;#t1&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">       <span class="title function_">setup</span>(<span class="params">props, &#123;emit&#125;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">function</span> <span class="title function_">updateInput</span>(<span class="params">$event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="title function_">emit</span>(<span class="string">&#x27;update:model-value&#x27;</span>, $event.<span class="property">target</span>.<span class="property">value</span>) </span></span><br><span class="line"><span class="language-javascript">           &#125;</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">return</span> &#123;updateInput&#125;</span></span><br><span class="line"><span class="language-javascript">       &#125;,</span></span><br><span class="line"><span class="language-javascript">       <span class="attr">props</span>: [<span class="string">&#x27;modelValue&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">       <span class="attr">emits</span>: [<span class="string">&#x27;update:model-value&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">   &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure> ### 19.2 v-modelä¼ å‚ä½œä¸ºå˜é‡å
æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å‘<code>v-model</code>ä¼ å…¥ä¸€ä¸ªå‚æ•°æ¥è‡ªå®šä¹‰å­ç»„ä»¶ä¸­çš„<code>prop</code>å˜é‡åï¼š
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-input</span> <span class="attr">v-model:my-prop-value</span>=<span class="string">&quot;inputValue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-input</span>&gt;</span></span><br></pre></td></tr></table></figure>
ç„¶åå°†æ‰€æœ‰ä½¿ç”¨<code>model-value</code>æ”¹ä¸º<code>myPropValue</code>ã€‚ ###
19.3 ç»„ä»¶v-model ä¿®é¥°ç¬¦</p>
<p>è®°å¾—ä¹‹å‰æˆ‘ä»¬åœ¨å­¦<code>v-model</code>çš„æ—¶å€™å­¦åˆ°è¿‡<code>v-model</code>ä¿®é¥°ç¬¦ï¼Œç»„ä»¶çš„<code>v-model</code>ä¹Ÿå¯ä»¥å®šä¹‰ä¿®é¥°ç¬¦ã€‚</p>
<p>å…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š 1.
åœ¨<code>props</code>ä¸­åŠ å…¥ä¸€ä¸ªæ–°çš„<code>prop</code>ï¼š<code>modelModifiers</code>
2.
å¦‚æœä¼ å…¥ä¿®é¥°ç¬¦ï¼Œ<code>modelModifiers.modifyName</code>å°±ä¼šè¢«è®¾ç½®ä¸º<code>True</code>
å…·ä½“ä¾‹å­å¦‚ä¸‹ï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;t1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>components: &#123;&#123;modelValue&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;MyUpdate&quot;</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title class_">Counter</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params">props, &#123;emit&#125;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">MyUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (props.<span class="property">modelModifiers</span>.<span class="property">double</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">emit</span>(<span class="string">&#x27;update:modelValue&#x27;</span>, props.<span class="property">modelValue</span>+<span class="number">2</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">emit</span>(<span class="string">&#x27;update:modelValue&#x27;</span>, props.<span class="property">modelValue</span>+<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;<span class="title class_">MyUpdate</span>&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">template</span>: <span class="string">`#t1`</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">props</span>: [<span class="string">&#x27;modelValue&#x27;</span>, <span class="string">&#x27;modelModifiers&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">emits</span>: [<span class="string">&#x27;update:modelValue&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">counter</span> <span class="attr">v-model.double</span>=<span class="string">&quot;count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">counter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123;createApp, ref&#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;count&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">Counter</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>double</code>ModelModifierï¼Œå¹¶åœ¨ç»„ä»¶ä¸­è°ƒç”¨äº†<code>if</code>è¯­å¥æ¥åˆ¤æ–­æ˜¯å¦æ·»åŠ è¯¥ä¿®é¥°ç¬¦ï¼Œå¦‚æœæœ‰è°ƒç”¨è¯¥ä¿®é¥°ç¬¦ï¼Œåˆ¤æ–­è¯­å¥å°±ä¼šè¢«æ‰§è¡Œä»è€Œå®ç°è®¡æ•°å™¨åŒå€å¢åŠ çš„æ•ˆæœã€‚
### 19.4 å¸¦å‚æ•°ä¿®é¥°ç¬¦
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨äº†è‡ªå®šä¹‰<code>modelValue</code>çš„å†™æ³•ï¼Œéœ€è¦å°†éƒ¨åˆ†ä»£ç åšå¦‚ä¸‹ä¿®æ”¹ï¼š</p>
<blockquote>
<p>è¿™é‡Œä»¥<code>num</code>å‚æ•°åä¸ºä¾‹ã€‚</p>
</blockquote>
<ol type="1">
<li>å°†<code>modelValue</code>éƒ¨åˆ†å…¨éƒ¨ä¿®æ”¹ä¸ºæ‰€å®šä¹‰çš„åå­—
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">counter</span> <span class="attr">v-model:num.double</span>=<span class="string">&quot;numP&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>å°†<code>modelModifiers</code>æ”¹ä¸º<code>numModifiers</code>çš„ç»“æ„ï¼Œå…¶ä¸­<code>Modifiers</code>å‰æ‹¼æ¥å®šä¹‰åï¼Œä½¿ç”¨å°é©¼å³°å‘½å:
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const Counter = &#123;</span><br><span class="line">    template: `#counter`,</span><br><span class="line">    props: [&#x27;num&#x27;, &#x27;numModifiers&#x27;],</span><br><span class="line">    emits: [&#x27;update:num&#x27;],</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="äºŒåé€ä¼ -attr">äºŒåã€é€ä¼  Attr</h2>
<p>é€ä¼ AttræŒ‡çš„æ˜¯ä¼ é€’ç»™ä¸€ä¸ªç»„ä»¶ï¼Œå´æ²¡æœ‰è¢«è¯¥ç»„ä»¶å£°æ˜ä¸º<code>props</code>æˆ–è€…<code>emits</code>çš„å±æ€§æˆ–<code>v-on</code>ç›‘å¬äº‹ä»¶ã€‚å¸¸è§çš„ä¾‹å­å°±æ˜¯<code>id</code>ï¼Œ<code>class</code>å’Œ<code>style</code>ã€‚</p>
<p>å¦‚æœç»„ä»¶ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ä¸ºæ ¹å…ƒç´ ï¼Œé‚£ä¹ˆç›´æ¥ä¼ å…¥å±æ€§å°±ä¼šä½œä¸ºæ ¹å…ƒç´ çš„å±æ€§ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;t1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>Click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å°è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;t1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span>&gt;</span>Click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title class_">Counter</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">template</span>: <span class="string">`#t1`</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">counter</span> <span class="attr">title</span>=<span class="string">&quot;Click Me!&quot;</span> <span class="attr">class</span>=<span class="string">&quot;color&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">counter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> &#123;createApp, ref&#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">components</span>: &#123;<span class="title class_">Counter</span>&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.color</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">20%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">20%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.color</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">3px</span> solid pink;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.color</span><span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">135</span>, <span class="number">207</span>, <span class="number">235</span>, <span class="number">0.562</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é¡µé¢æ•ˆæœï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/image-20250219074923642.png"
alt="Click" />
<figcaption aria-hidden="true">Click</figcaption>
</figure>
<h3 id="é€ä¼ åˆå¹¶">20.1 é€ä¼ åˆå¹¶</h3>
<p>å¦‚æœåœ¨æ ¹å…ƒç´ ä¸Šè®¾ç½®äº†<code>class</code>æˆ–è€…<code>style</code>ç­‰é€ä¼ å±æ€§ï¼Œä»–ä¼šå’Œæ ¹ç»„ä»¶ä¸Šçš„è¯¥å±æ€§åˆå¹¶ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;t1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;big&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px;&quot;</span>&gt;</span>ClickMe<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title class_">MyButton</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">template</span>: <span class="string">`#t1`</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-button</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: aliceblue;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123;createApp, ref&#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">components</span>: &#123;<span class="title class_">MyButton</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.center</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.big</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">20%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">10%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆæ¸²æŸ“å‡ºçš„æ–‡ä»¶ç»“æ„ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/image-20250219085433457.png"
alt="image-20250219085433457" />
<figcaption aria-hidden="true">image-20250219085433457</figcaption>
</figure>
<p>ç±»ä¼¼çš„ï¼Œå¦‚æœå°†ä¸€ä¸ªæœªåœ¨<code>props</code>ä¸­å®šä¹‰çš„<code>v-on</code>ç›´æ¥ä½¿ç”¨åœ¨ç»„ä»¶ä¸Šï¼Œå°±ä¼šå‘ç”Ÿé€ä¼ <code>Attr</code>ã€‚ä¾‹å¦‚ï¼Œ<code>@click</code>ä¼šè¢«é€ä¼ åˆ°<code>button</code>å…ƒç´ ä¸Šã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="ç¦ç”¨è‡ªåŠ¨-attr-é€ä¼ ">20.2 ç¦ç”¨è‡ªåŠ¨ Attr é€ä¼ </h3>
<p>åœ¨ç»„ä»¶ä¸­ç¦ç”¨ Attr
éœ€è¦æ·»åŠ ä¸€ä¸ªé…ç½®é¡¹<code>inheritAttrs: false</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MyButton</span> = &#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`#t1`</span>,</span><br><span class="line">    <span class="attr">inheritAttrs</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‰‹åŠ¨-attr-é€ä¼ ">20.3 æ‰‹åŠ¨ Attr é€ä¼ </h3>
<p>åœ¨ç¦ç”¨äº†è‡ªåŠ¨çš„<code>Attr</code>ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨åœ¨ç»„ä»¶å†…çš„å…ƒç´ ä¸Šæ·»åŠ <code>v-bind="$attrs"</code>æ¥<code>Attr</code>é€ä¼ ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰ç»„ä»¶ä½ è¦é€ä¼ ç»™è°ï¼š
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;ta&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span>&gt;</span>æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>å¾ˆæ˜æ˜¾ï¼Œåœ¨ç»„ä»¶æœ‰å¤šä¸ªæ ¹å…ƒç´ çš„æƒ…å†µä¸‹æ˜¯å¼ºåˆ¶æ‰‹åŠ¨é€ä¼ çš„ã€‚</p>
<h2 id="äºŒåä¸€ç»„ä»¶æ’æ§½">äºŒåä¸€ã€ç»„ä»¶æ’æ§½</h2>
<p>å°½ç®¡ç»„ä»¶å·²ç»å¦‚æ­¤é«˜åº¦è‡ªå®šä¹‰äº†ï¼Œä½†ä»–è¿˜æ˜¯ç¼ºå°‘ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½ï¼šDOMç»“æ„çš„è‡ªå®šä¹‰ã€‚å¦‚æœå°†æ’æ§½æ¯”ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆæ’æ§½å·²ç»å…·å¤‡äº†ä¼ é€’æ™®é€šæ•°æ®ä½œä¸ºå‚æ•°çš„åŠŸèƒ½ï¼Œä½†ä»–è¿˜ä¸èƒ½å°†DOMå…ƒç´ ç›´æ¥ä½œä¸ºå‚æ•°ä¼ é€’å¹¶æ”¾åˆ°ç»„ä»¶DOMçš„æŸä¸ªä½ç½®ã€‚
ä¸ºæ­¤ï¼Œè¯ç”Ÿäº†ç»„ä»¶æ’æ§½ã€‚</p>
<p>ç»„ä»¶æ’æ§½å°±æ˜¯åœ¨ç»„ä»¶ä¸­å®šä¹‰å¤–éƒ¨DOMæ’å…¥çš„å…¥å£ï¼Œç»„ä»¶æ’æ§½åˆ†ä¸ºä¸¤ç§ï¼š -
åŒ¿åæ’æ§½ - å…·åæ’æ§½</p>
<h3 id="åŒ¿åæ’æ§½">21.1 åŒ¿åæ’æ§½</h3>
<p>ç®€å•æ¥è¯´ï¼ŒæŒ‡å®šåå­—çš„æ’æ§½å°±æ˜¯å…·åæ’æ§½ï¼Œä¸æŒ‡å®šåå­—çš„æ’æ§½å°±æ˜¯åŒ¿åæ’æ§½ã€‚åŒ¿åæ’æ§½çš„åç§°ä¼šè¢«éšå¼åœ°è®¾ç½®ä¸º<code>default</code>ã€‚
å†™æ³•å¦‚ä¸‹ï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åŒ¿åæ’æ§½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å…·åæ’æ§½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;slotName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br></pre></td></tr></table></figure>
ä½¿ç”¨æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œåœ¨ç»„ä»¶å†…é¡¶ä¸€ä¸ªä¸€ä¸ªæ’æ§½å…¥å£å³å¯ï¼Œæ¯”å¦‚ï¼š
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;t1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;abs-center bd pd radius bgc&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;clear-link&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>Sy&#x27;personal Container<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure> ç„¶åç›´æ¥æŒ‰ç…§ä¼ ç»Ÿçš„ODMæ–¹æ³•æ’å…¥ï¼š &gt; ç»„ä»¶åä¸º:
my-container <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-container</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æ˜¯ä¸´æ—¶æ’è¿›æ¥çš„ï¼<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">my-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure> ### 21.2 å…·åæ’æ§½
è¿™æ˜¯äº¬ä¸œç§»åŠ¨å•†åŸçš„æœç´¢æ ï¼š <img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/20250219123353.png"
alt="20250219123353" /> ç‚¹å‡»è¿›å…¥æœç´¢é¡µåä¼šå‘ç°è¿˜æœ‰ä¸€ä¸ªæœç´¢æ ï¼š <img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/20250219123418.png"
alt="20250219123418" />
è¿›å…¥ä»»æ„ä¸€ä¸ªæœç´¢åˆ—è¡¨åè¿˜èƒ½æ‰¾åˆ°å¦ä¸€ç§å½¢æ€çš„æœç´¢æ ï¼š <img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/20250219123453.png"
alt="20250219123453" /></p>
<p>å…¶ä¸­ï¼Œç¬¬ä¸‰ç§æœç´¢æ æœ€å³è¾¹è¢«é—²ç½®äº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ç§åŠæ³•èƒ½é€‰æ‹©æ€§åœ°åœ¨ç»„ä»¶ä¸­æ’å…¥ä¸‰ä¸ªå…ƒç´ ã€‚è¿™å°±å¼•å‡ºäº†å…·åæ’æ§½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å…·åæ’æ§½æ¥å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„<code>MyHeader</code>ç»„ä»¶ï¼š</p>
<p>æ ¸å¿ƒåˆ†ä¸ºä¸¤æ­¥èµ°ï¼š</p>
<ol type="1">
<li>åœ¨ç»„ä»¶ä¸­å®šä¹‰å…·åæ’æ§½ï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>åœ¨ç»„ä»¶å¤–è¿™æ ·æ¥æ’å…¥ï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:right</span>&gt;</span>å³<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>å…·ä½“çš„ä»£ç å°±æ˜¯ï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;t1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;abs-center bd pd radius bgc&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Sy&#x27;personal Container<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bd pd radius bgc flex-horizontal&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-container</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:left</span>&gt;</span>å·¦<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:center</span>&gt;</span>ä¸­<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:right</span>&gt;</span>å³<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">my-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>ä¸<code>v-on</code>ä¸€æ ·ï¼Œ<code>v-slog</code>ä¹Ÿæœ‰ç¼©å†™ï¼Œå¯ä»¥ç¼©å†™ä¸ºï¼š<code>#</code>ï¼Œæ‰€ä»¥ä¸Šè¿°ä»£ç å¯ä»¥ä¿®æ”¹ä¸ºï¼š
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-container</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">left</span>&gt;</span>å·¦<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">center</span>&gt;</span>ä¸­<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">right</span>&gt;</span>å³<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">my-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="æ’æ§½ä½œç”¨åŸŸ">21.3 æ’æ§½ä½œç”¨åŸŸ</h3>
<p>æˆ‘ä»¬å¯ä»¥åœ¨æ’æ§½ä¸­ä½¿ç”¨æ–‡æœ¬æ’å€¼ï¼Œç„¶ååœ¨æ’æ§½å†…éƒ¨ä¸­ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼è®¿é—®çˆ¶ç»„ä»¶çš„ä½œç”¨åŸŸï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-container</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">left</span>&gt;</span><span class="symbol">&amp;lt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">center</span>&gt;</span><span class="tag">&lt;<span class="name">input</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">right</span>&gt;</span><span class="tag">&lt;<span class="name">button</span>&gt;</span>&#123;&#123;buttonText&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">my-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title class_">MyContainer</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">template</span>: <span class="string">`#t1`</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> buttonText = <span class="title function_">ref</span>(<span class="string">&quot;æœç´¢&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;buttonText&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">components</span>: &#123;<span class="title class_">MyContainer</span>&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯æ’æ§½æ— æ³•è®¿é—®æ’æ§½å†…çš„ä½œç”¨åŸŸï¼Œè¯·è®°ä½ï¼š<strong>çˆ¶æ¨¡æ¿çš„æ‰€æœ‰ä½œç”¨åŸŸåœ¨çˆ¶æ¨¡æ¿ä¸­ç¼–è¯‘ï¼Œå­æ¨¡æ¿çš„æ‰€æœ‰ä½œç”¨åŸŸåœ¨å­æ¨¡ç‰ˆä¸­è¿›è¡Œç¼–è¯‘</strong>ã€‚</p>
<h2 id="äºŒåäºŒä¾èµ–æ³¨å…¥">äºŒåäºŒã€ä¾èµ–æ³¨å…¥</h2>
<p>å‰é¢è¯´åˆ°ï¼ŒVueæä¾›äº†<code>props</code>å’Œäº‹ä»¶ä½œä¸ºå­ç»„ä»¶å’Œçˆ¶ç»„ä»¶çš„æ•°æ®ä¼ é€’æ–¹å¼ï¼Œä½†è¿™ç§ä¼ é€’æ–¹å¼æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ä¸è¶³ï¼šåªèƒ½é€å±‚ä¼ é€’æ•°æ®ã€‚</p>
<p>Vueæä¾›äº†<code>provide()</code>å’Œ<code>inject()</code>æ¥å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬è¦åšä¸€ä¸ªå¹¿å‘Šå¼¹çª—ç»„ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªè·³è¿‡æŒ‰é’®ã€‚å¹¿å‘Šä¼šåœ¨ä¸€å®šæ—¶é—´åè‡ªå·±å…³é—­ï¼Œç‚¹å‡»è·³è¿‡æŒ‰é’®ç«‹åˆ»å…³é—­ã€‚
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼¹çª—ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;t1-ban&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å¹¿å‘Šå€’è®¡æ—¶ &#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;stop&#x27;)&quot;</span>&gt;</span>Skip<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ ¹ç»„ä»¶å®ä¾‹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-banner</span> <span class="attr">v-if</span>=<span class="string">&quot;count&gt;0&quot;</span> @<span class="attr">stop</span>=<span class="string">&quot;stop&quot;</span> <span class="attr">:count</span>=<span class="string">&quot;count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-banner</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// å¼¹çª—ç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="title class_">MyBanner</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">template</span>: <span class="string">`#t1-ban`</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">props</span>: [<span class="string">&#x27;count&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">emits</span>: [<span class="string">&#x27;stop&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ ¹ç»„ä»¶å®ä¾‹</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> &#123; createApp, ref, onMounted &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">stop</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                count.<span class="property">value</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    count.<span class="property">value</span>--;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (count.<span class="property">value</span> == <span class="number">0</span>) <span class="built_in">clearInterval</span>(timer)</span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">5</span>)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;count, stop&#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">components</span>: &#123; <span class="title class_">MyBanner</span> &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.banner</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: <span class="number">#000000bf</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">inset</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†æŒ‰é’®å®šä¹‰åœ¨äº†å¼¹çª—ç»„ä»¶å†…ï¼Œåˆ©ç”¨çˆ¶ç»„ä»¶æ¥æ›´æ–°<code>count</code>å¹¶ä¼ é€’ç»™äº†å¼¹çª—ç»„ä»¶ã€‚è·³è¿‡æŒ‰é’®çš„å®ç°æˆ‘ä»¬ä½¿ç”¨<code>emit</code>æ¥é€šçŸ¥çˆ¶ç»„ä»¶å…³é—­è‡ªå·±ã€‚</p>
<p>æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„åŠŸèƒ½è¿™æ ·æ¥å®ç°éå¸¸éº»çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¾èµ–æ³¨å…¥ã€‚</p>
<p>Vueæä¾›çš„<code>inject()</code>å’Œ<code>provide()</code>å°±æ˜¯ä¸ºäº†è§£å†³æ·±åº¦åµŒå¥—ä¼ é€’æ•°æ®çš„é—®é¢˜ã€‚ä»–ä»¬é…åˆåœ¨ä¸€èµ·å¯ä»¥è½»æ¾è§£å†³ç»„ä»¶ä¹‹é—´çš„æ·±åº¦ä¼ é€’æ•°æ®ã€‚
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/20250220084227.png"
alt="20250220084227" /></p>
<p>å†™èµ·æ¥ä¹Ÿéå¸¸ç®€å•ï¼š</p>
<ol type="1">
<li><p>å¼•å…¥<code>prove</code>å’Œ<code>inject</code>å‡½æ•°ï¼š
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createApp, ref, onMounted, inject, provide &#125; = <span class="title class_">Vue</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>åœ¨éœ€è¦ä¼ é€’æ•°æ®çš„ç»„ä»¶ï¼ˆå‡ºå‘ç‚¹ï¼‰æä¾›<code>provide</code>å‡½æ•°ï¼š
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">closeBanner</span>(<span class="params"></span>) &#123;</span><br><span class="line">    count.<span class="property">value</span> = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">provide</span>(<span class="string">&quot;closeBanner&quot;</span>, closeBanner)</span><br></pre></td></tr></table></figure></p></li>
</ol>
<p>æ¯”å¦‚è¿™é‡Œåœ¨æ ¹ç»„ä»¶çš„<code>setup</code>ä¸­æä¾›å…³é—­<code>Banner</code>çš„æ¥å£ã€‚</p>
<ol start="3" type="1">
<li><p>åœ¨éœ€è¦ä½¿ç”¨æ¥å£çš„ç»„ä»¶çš„<code>setup</code>ä¸­æ¥æ”¶ï¼ˆæ³¨å…¥ï¼‰<code>inject</code>æ•°æ®ï¼š
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> closeBanner = <span class="title function_">inject</span>(<span class="string">&quot;closeBanner&quot;</span>)</span><br></pre></td></tr></table></figure></p></li>
<li><p>æœ€åç›´æ¥åœ¨<code>Banner</code>ç»„ä»¶ä¸­returnå¹¶å°†å‡½æ•°ç»‘å®šåœ¨æŒ‰é’®ä¸Šå³å¯ï¼š
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼¹çª—ç»„ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;t1-ban&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å¹¿å‘Šå€’è®¡æ—¶ &#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;closeBanner&quot;</span>&gt;</span>Skip<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ ¹ç»„ä»¶å®ä¾‹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">my-banner</span> <span class="attr">v-if</span>=<span class="string">&quot;count&gt;0&quot;</span> <span class="attr">:count</span>=<span class="string">&quot;count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-banner</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// å¼¹çª—ç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title class_">MyBanner</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">template</span>: <span class="string">`#t1-ban`</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">props</span>: [<span class="string">&#x27;count&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> closeBanner = <span class="title function_">inject</span>(<span class="string">&quot;closeBanner&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> &#123;closeBanner&#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ ¹ç»„ä»¶å®ä¾‹</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> &#123; createApp, ref, onMounted, inject, provide &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">function</span> <span class="title function_">closeBanner</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    count.<span class="property">value</span> = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">provide</span>(<span class="string">&quot;closeBanner&quot;</span>, closeBanner)</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        count.<span class="property">value</span>--;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (count.<span class="property">value</span> == <span class="number">0</span>) <span class="built_in">clearInterval</span>(timer)</span></span><br><span class="line"><span class="language-javascript">                    &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">5</span>)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> &#123;count, stop&#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">components</span>: &#123; <span class="title class_">MyBanner</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.banner</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#000000bf</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">inset</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p></li>
</ol>
<h3 id="ä½¿ç”¨æ–¹æ³•-2">22.1 ä½¿ç”¨æ–¹æ³•</h3>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>provide</code>å®é™…ä¸Šæ˜¯å°†æ•°æ®æä¾›ç»™æ‰€æœ‰åä»£å±æ€§ï¼Œæ‰€ä»¥åœ¨æ ¹ç»„ä»¶ä¸­<code>provide</code>çš„æ•°æ®å¯ä»¥åœ¨æ‰€ä»¥åº”ç”¨å®ä¾‹ä¸­è®¿é—®åˆ°ã€‚</p>
<p>ä¸Šé¢ä½¿ç”¨åˆ°çš„æ˜¯ç”¨<code>provide</code>æä¾›ä¸€ä¸ªå‡½æ•°çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨<code>provide</code>æ¥æä¾›ä¸€ä¸ªå…¶ä»–å˜é‡ï¼Œæ–¹æ³•ç±»ä¼¼ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">provide</span>(<span class="string">&quot;æ–¹æ³•å&quot;</span>, æ•°æ®)</span><br></pre></td></tr></table></figure>
<h3 id="ä¾èµ–æ³¨å…¥çš„é»˜è®¤å€¼">22.2 ä¾èµ–æ³¨å…¥çš„é»˜è®¤å€¼</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">inject</span>(<span class="string">&quot;å˜é‡å&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µï¼Œ<code>inject</code>ä¼šé»˜è®¤ç¥–å…ˆæä¾›äº†è¯¥æ³¨å…¥ï¼Œå¦‚æœè®¿é—®çš„å˜é‡æ²¡æœ‰è¢«æä¾›åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªè­¦å‘Šã€‚</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/20250220092745.png"
alt="20250220092745" />
<figcaption aria-hidden="true">20250220092745</figcaption>
</figure>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ç¬¬äºŒä¸ªå‚æ•°æ¥æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> message = <span class="title function_">inject</span>(<span class="string">&#x27;æ¥å—çš„å˜é‡å&#x27;</span>, <span class="string">&#x27;æˆ‘æ˜¯é»˜è®¤å€¼&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="äºŒåä¸‰é€‰é¡¹å¼api">äºŒåä¸‰ã€é€‰é¡¹å¼API</h2>
<p>ä¹‹å‰çš„ä»£ç ç”±äºå¯è¯»æ€§ä¸€ç›´é‡‡ç”¨çš„æ˜¯ç»„åˆå¼APIæ¥ç¼–å†™ã€‚å…¶å®Vueè¿˜æä¾›äº†é€‰é¡¹å¼çš„APIã€‚ä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼Œé€‰é¡¹å¼APIé€‚åˆå¿«é€Ÿç”¨äºæ„å»ºå°å‹é¡¹ç›®ï¼Œä½†æ˜¯ä¸€æ—¦é¡¹ç›®åºå¤§èµ·æ¥å°±å¾ˆéš¾é˜…è¯»äº†ã€‚ç»„åˆå¼APIçš„å¯è¯»æ€§å°±ç›¸å¯¹è¦å¥½å¾ˆå¤šã€‚</p>
<p>ç›´æ¥è¿™ä¹ˆè¯´å¯èƒ½æ²¡æœ‰ä»€ä¹ˆç›´è§‚çš„æ„Ÿå—ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥å¯¹æ¯”ä¸€ä¸‹ã€‚æ¯”å¦‚æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªç”¨æŒ‰é’®åˆ‡æ¢èƒŒæ™¯è‰²çš„å°ç»„ä»¶ï¼š</p>
<h3 id="ç»„åˆå¼apiå†™æ³•">23.1 ç»„åˆå¼Apiå†™æ³•</h3>
<p>ç»„åˆå¼APIçš„å†™æ³•ï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡æ¡£<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>èƒŒæ™¯åˆ‡æ¢äº†ï¼š&#123;&#123; count &#125;&#125; æ¬¡<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-for</span>=<span class="string">&quot;color in colors&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;color&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;change(color)&quot;</span>&gt;</span></span><br><span class="line">          &#123;&#123; color &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; height: &#x27;200px&#x27;, background: divBG &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; createApp, ref &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// åˆ‡æ¢èƒŒæ™¯è‰²åŠŸèƒ½</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> colors = <span class="title function_">ref</span>([<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> divBG = <span class="title function_">ref</span>(<span class="string">&#x27;red&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">function</span> <span class="title function_">change</span>(<span class="params">color</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            divBG.<span class="property">value</span> = color</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// è®¡æ•°åŠŸèƒ½</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            count.<span class="property">value</span>++</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123; colors, divBG, change, count, increment &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure> ### 23.2 é€‰é¡¹å¼Apiå†™æ³•</p>
<p>é€‰é¡¹å¼APIçš„å†™æ³•ï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡æ¡£<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>èƒŒæ™¯åˆ‡æ¢äº†ï¼š&#123;&#123; count &#125;&#125; æ¬¡<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-for</span>=<span class="string">&quot;color in colors&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;color&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;change(color)&quot;</span>&gt;</span></span><br><span class="line">          &#123;&#123; color &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; height: &#x27;200px&#x27;, background: divBG &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; createApp &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// åˆ‡æ¢èƒŒæ™¯è‰²åŠŸèƒ½</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">colors</span>: [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;green&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">divBG</span>: <span class="string">&#x27;red&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// è®¡æ•°åŠŸèƒ½</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">count</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// åˆ‡æ¢èƒŒæ™¯è‰²åŠŸèƒ½</span></span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">change</span>(<span class="params">color</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">divBG</span> = color</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// è®¡æ•°åŠŸèƒ½</span></span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">count</span>++</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="ä¸¤ç§apiçš„å¯¹æ¯”">23.3 ä¸¤ç§Apiçš„å¯¹æ¯”</h3>
<p>åœ¨åŠŸèƒ½ä¸Šä¸¤è€…å¹¶æ— å·®è·ï¼Œä½†æ˜¯å¯ä»¥çœ‹åˆ°ï¼Œç»„åˆå¼çš„ä»£ç é£æ ¼ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/20250222080035.png"
alt="20250222080035" />
<figcaption aria-hidden="true">20250222080035</figcaption>
</figure>
<p>é€‰é¡¹å¼Apiçš„é£æ ¼ï¼š</p>
<figure>
<img
src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/20250222080219.png"
alt="20250222080219" />
<figcaption aria-hidden="true">20250222080219</figcaption>
</figure>
<p>å…¶ä¸­é€‰é¡¹å¼APiæŠŠå‡½æ•°å’Œæ•°æ®éƒ½åˆ†å¼€å­˜æ”¾ï¼Œå¯¼è‡´åŒä¸€ä¸ªé€»è¾‘çš„ä»£ç ä¼šè¢«åˆ†å¼€ï¼Œå¥½å¤„æ˜¯å¯»æ‰¾å‡½æ•°ä¹Ÿä¼šå˜å¿«ã€‚åå¤„æ˜¯æ‰€æœ‰é€»è¾‘çš„å‡½æ•°éƒ½ä¼šæ‚ç³…åˆ°ä¸€èµ·ã€‚</p>
<p>å¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªåŒºåˆ«ï¼Œé€‰é¡¹å¼Apiä¸éœ€è¦ä½¿ç”¨<code>ref</code>ã€<code>reactive</code>ç­‰å‡½æ•°æ¥å®ç°å“åº”å¼æ•°æ®çš„åŒ…è£…ã€‚ç›´æ¥å°†æ•°æ®æ”¾åœ¨<code>data</code>å‡½æ•°çš„è¿”å›å€¼ä¸­å³å¯ã€‚</p>
<p>è€Œç»„åˆå¼Apiå°±æŠŠæ‰€æœ‰é€»è¾‘ç»„åˆåˆ°ä¸€èµ·äº†ï¼Œå¯ä»¥ç›´è§‚åœ°çœ‹åˆ°æŸä¸€ä¸ªé€»è¾‘çš„æ‰€æœ‰ä»£ç ã€‚</p>
<p>æ¥ä¸‹æ¥ç»§ç»­çœ‹çœ‹é€‰é¡¹å¼Apiçš„å†™æ³•ã€‚</p>
<h3 id="è®¡ç®—å±æ€§å’Œç›‘å¬å™¨">23.4 è®¡ç®—å±æ€§å’Œç›‘å¬å™¨</h3>
<p>åœ¨<code>createApp</code>çš„é…ç½®é¡¹ä¸­æ·»åŠ ä¸€ä¸ªå¦‚ä¸‹é…ç½®ï¼š <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">totalGoodsNum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">goodsList</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, goods</span>) =&gt;</span> sum + goods.<span class="property">num</span>, <span class="number">0</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
è¿™å°±æ˜¯æ‰€æœ‰çš„è®¡ç®—å±æ€§ï¼Œå…¶ä¸­è¿™é‡Œçš„<code>totalGoodsNum</code>å°±æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ã€‚</p>
<p>ç›‘å¬å™¨ä¹Ÿæ˜¯ä¸€æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">  <span class="title function_">num</span>(<span class="params">newNum, oldNum</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;num å‘ç”Ÿäº†å˜åŒ–ï¼š&#x27;</span>, newNum, oldNum)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">goodsList</span>: &#123;</span><br><span class="line">    <span class="title function_">handler</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;goodsList å‘ç”Ÿäº†å˜åŒ–ï¼&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    è®¡æ•°å™¨ï¼š&#123;&#123; num &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>ç‚¹æˆ‘è®¡æ•°<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;addGoods&quot;</span>&gt;</span>æ·»åŠ å•†å“<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>çƒ­é—¨å•†å“ï¼Œå…± &#123;&#123; totalGoodsNum &#125;&#125; ä¸ª<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;goods in goodsList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;goods.id&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; goods.name &#125;&#125;ï¼ˆæ•°é‡ï¼š&#123;&#123; goods.num &#125;&#125;ï¼‰</span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;goods.num++&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; createApp &#125; = <span class="title class_">Vue</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">num</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">goodsList</span>: [</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;è‹¹æœ&#x27;</span>, <span class="attr">num</span>: <span class="number">1</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;æ¡ƒå­&#x27;</span>, <span class="attr">num</span>: <span class="number">1</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">num</span>++</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">addGoods</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">goodsList</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;é¦™è•‰&#x27;</span>, <span class="attr">num</span>: <span class="number">1</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">totalGoodsNum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">goodsList</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, goods</span>) =&gt;</span> sum + goods.<span class="property">num</span>, <span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">num</span>(<span class="params">newNum, oldNum</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;num å‘ç”Ÿäº†å˜åŒ–ï¼š&#x27;</span>, newNum, oldNum)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">goodsList</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">handler</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;goodsList å‘ç”Ÿäº†å˜åŒ–ï¼&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">deep</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="ç”Ÿå‘½å‘¨æœŸé’©å­-1">23.5 ç”Ÿå‘½å‘¨æœŸé’©å­</h3>
<p>ä¸¤ä¸ªApiçš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¹Ÿæœ‰æ‰€ä¸åŒã€‚</p>
<p>é€‰é¡¹å¼Apiçš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¹Ÿæ˜¯é‡‡ç”¨é…ç½®é¡¹å½¢å¼é…ç½®çš„ï¼Œå¹¶ä¸”é’©å­åä¸åŒä¸ç»„åˆå¼ã€‚è¿˜å¤šå‡ºäº†ä¸¤ä¸ªé’©å­ï¼š<code>beforeCreate</code>å’Œ<code>created</code>ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</p>
<p>åœ¨ç»„åˆå¼Apiä¸­çš„<code>onUpdated</code>åœ¨é€‰é¡¹å¼APiä¸­å»æ‰äº†<code>on</code>å«åšï¼š<code>updated</code>ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•å¯ä»¥åœ¨ä¸Šä¸€ä¸ªä»£ç çš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ï¼š</p>
<blockquote>
<p>æ·»åŠ ä¸€ä¸ªä¸<code>watch</code>å¹³è¡Œçš„é…ç½®é¡¹</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç»„ä»¶å·²æ›´æ–°ï¼&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ¯æ¬¡ç»„ä»¶çš„å“åº”å¼è§¦å‘é‡æ–°æ¸²æŸ“çš„æ—¶å€™å°±ä¼šè°ƒç”¨<code>updated</code>ã€‚</p>
<h2 id="äºŒåå››å•æ–‡ä»¶ç»„ä»¶">äºŒåå››ã€å•æ–‡ä»¶ç»„ä»¶</h2>
<p>è®°å¾—ä¸Šä¸€æ¬¡å­¦Vue2çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å­¦åˆ°è¿™é‡Œå¼€å§‹å¾ˆå¤šä¸œè¥¿å°±è®°ä¸æ¸…äº†ã€‚è¿™ä¸€æ¬¡å°±æŠŠè¿™äº›å†…å®¹å®Œæ•´è®°å½•ä¸‹æ¥ï¼Œä»¥ä¾¿å¤ä¹ ã€‚</p>
<p>ä¹‹å‰æˆ‘ä»¬ä¸€ç›´åœ¨<code>index.html</code>ä¸­å®Œæˆæˆ‘ä»¬çš„Vueç¨‹åºï¼Œä½†æ˜¯éšç€ç»„ä»¶æ•°é‡çš„å¢åŠ ï¼Œè¿™æ ·æ˜¾ç„¶ä¸æ˜¯é•¿ä¹…ä¹‹è®¡ã€‚å¦‚æœæŠŠç»„ä»¶çš„ä»£ç å•ç‹¬å°è£…åˆ°å•ç‹¬çš„<code>js</code>å’Œ<code>css</code>æ–‡ä»¶ä¸­åˆä¼šå‡ºç°ä»æœ‰<code>template</code>æ®‹ç•™åœ¨<code>index.html</code>æ–‡ä»¶ä¸­çš„é—®é¢˜ã€‚</p>
<p>è§£å†³åŠæ³•ä¹Ÿç®€å•ï¼Œä½¿ç”¨æ¨¡æ¿æ—¶é‡‡ç”¨å­—ç¬¦ä¸²å½¢å¼ç¼–å†™ã€‚</p>
<ul>
<li>ç»„ä»¶ä¸­æ¨¡æ¿é…ç½®æ—¶ï¼Œå¦‚æœä½¿ç”¨<code>#...</code>å¼€å¤´ï¼Œé‚£ä¹ˆç›¸å½“äºä½¿ç”¨é€‰æ‹©å™¨å»é€‰æ‹©htmlå…ƒç´ ä½œä¸ºæ¨¡æ¿ã€‚</li>
<li>å¦‚æœä¸ä»¥<code>#</code>å¼€å¤´å°†è¢«ä½œä¸ºå­—ç¬¦ä¸²æ¨¡æ¿ä½¿ç”¨ã€‚æ­¤æ—¶è¿˜å¯ä»¥ä½¿ç”¨å¤§é©¼å³°ã€å•æ ‡ç­¾ç»„ä»¶ç­‰åŠŸèƒ½ã€‚</li>
</ul>
<p>ç„¶è€Œï¼Œè¿™æ ·çš„å°è£…æ˜¾ç„¶æ²¡æœ‰æ ¹æœ¬æ€§çš„è§£å†³é—®é¢˜ã€‚æ‰€ä»¥Vueæ¨å‡ºäº†å•æ–‡ä»¶ç»„ä»¶çš„åŠŸèƒ½ï¼Œè¿™ä¹Ÿæ˜¯Vueçš„æ€æ‰‹çº§åŠŸèƒ½ä¹‹ä¸€ã€‚</p>
<h3 id="æ‹‰å–é¡¹ç›®">24.1 æ‹‰å–é¡¹ç›®</h3>
<p>ä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶å¿…é¡»å®‰è£…<code>node.js</code>åç”¨<code>npm</code>ä¸‹è½½å®˜æ–¹çš„é¡¹ç›®è„šæ‰‹æ¶å·¥å…·æ¥åˆ›å»ºé¡¹ç›®ã€‚ä¸è¿‡ä»æœ‰ä¸€ä¸ª
JavaScript
çš„å·¥å…·åº“<code>vue3-sfc-loader</code>å¯ä»¥è®©æˆ‘ä»¬å…äºè¿™äº›ç¹ççš„æ­¥éª¤ã€‚å¹¶ä¸”ä»ç„¶ç”¨<code>&lt;script&gt;</code>æ¥æä¾›æ”¯æŒã€‚</p>
<blockquote>
<p>ä»¥ä¸‹é¡¹ç›®æ„å»ºè¿‡ç¨‹é€‚ç”¨äºè“æ¡¥æ¯çš„webå¼€å‘ç¯å¢ƒï¼Œå¦‚æœåœ¨æœ¬åœ°è®¡ç®—æœºæˆ‘å»ºè®®ä»ä½¿ç”¨npmåŒ…æ„å»ºã€‚</p>
</blockquote>
<ol type="1">
<li>åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè·å–åŸºæœ¬çš„Vueé¡¹ç›®æ¡†æ¶ï¼š <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://labfile.oss.aliyuncs.com/courses/40606/vue3-sfc-loader-demo.zip</span><br><span class="line">unzip vue3-sfc-loader-demo.zip</span><br><span class="line"><span class="built_in">rm</span> vue3-sfc-loader-demo.zip</span><br></pre></td></tr></table></figure></li>
</ol>
<p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ components</span><br><span class="line">â”‚   â”œâ”€â”€ App.vue</span><br><span class="line">â”‚   â””â”€â”€ Counter.vue</span><br><span class="line">â”œâ”€â”€ js</span><br><span class="line">â”‚   â”œâ”€â”€ vue3.global.js</span><br><span class="line">â”‚   â””â”€â”€ vue3-sfc-loader.js</span><br><span class="line">â””â”€â”€ index.html</span><br></pre></td></tr></table></figure></p>
<h3 id="å¼€å§‹ä½¿ç”¨">24.2 å¼€å§‹ä½¿ç”¨</h3>
<p>åœ¨<code>components</code>ä¸­åˆ›å»ºä¸€ä¸ª<code>MyButton.vue</code>æ–‡ä»¶ï¼Œå†™å…¥ï¼š
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;closeBanner&quot;</span>&gt;</span>&#123;&#123; text &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&#x27;text&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> closeBanner = <span class="title function_">inject</span>(<span class="string">&#x27;closeBanner&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123; closeBanner &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>å†åˆ›å»ºä¸€ä¸ª<code>Banner.vue</code>ï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å¹¿å‘Šå¼¹çª—å€’è®¡æ—¶ï¼š&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MyButton</span> <span class="attr">text</span>=<span class="string">&quot;è·³è¿‡&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">MyButton</span> <span class="keyword">from</span> <span class="string">&#x27;./MyButton.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123; <span class="title class_">MyButton</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&#x27;count&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.banner</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">inset</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">z-index</span>: <span class="number">999</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="number">#000000bf</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>å°†<code>App.vue</code>ä¿®æ”¹ä¸ºï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Banner</span> <span class="attr">v-if</span>=<span class="string">&quot;showBanner&quot;</span> <span class="attr">:count</span>=<span class="string">&quot;counter&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref, provide, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Banner</span> <span class="keyword">from</span> <span class="string">&#x27;./Banner.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123; <span class="title class_">Banner</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> showBanner = <span class="title function_">ref</span>(<span class="literal">true</span>) <span class="comment">// å¹¿å‘Šå¼¹çª—æ˜¯å¦æ˜¾ç¤º</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> counter = <span class="title function_">ref</span>(<span class="number">5</span>) <span class="comment">// å¹¿å‘Šå¼¹çª—å€’è®¡æ—¶</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">closeBanner</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      showBanner.<span class="property">value</span> = <span class="literal">false</span> <span class="comment">// å…³é—­å¹¿å‘Šå¼¹çª—</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">provide</span>(<span class="string">&#x27;closeBanner&#x27;</span>, closeBanner) <span class="comment">// å°†æ–¹æ³•ä¼ é€’ç»™åä»£ç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// åœ¨ç»„ä»¶æ¸²æŸ“å®Œæˆæ—¶å¼€å¯å€’è®¡æ—¶</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        counter.<span class="property">value</span>--</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (counter.<span class="property">value</span> &lt;= <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          showBanner.<span class="property">value</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">          <span class="built_in">clearInterval</span>(timer)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">1000</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123; showBanner, counter &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>å³é”®<code>index.html</code>é€‰æ‹©<code>Open With Live Server</code>æ‰“å¼€å³å¯æŸ¥çœ‹æ•ˆæœã€‚</p>
<blockquote>
<p>æ‰€æœ‰çš„ç»„ä»¶å’Œå‡½æ•°éœ€è¦é‡‡ç”¨ES6çš„<code>import</code>è¯­å¥å¯¼å…¥æ‰å¯ä»¥ä½¿ç”¨ï¼Œè€Œä¸æ˜¯è§£æ„èµ‹å€¼ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<code>index.html</code>æ–‡ä»¶çš„ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å•æ–‡ä»¶ç»„ä»¶ | vue3-sfc-loader<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue3.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue3-sfc-loader.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; loadModule &#125; = <span class="variable language_">window</span>[<span class="string">&#x27;vue3-sfc-loader&#x27;</span>]</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> options = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">template</span>: <span class="string">&#x27;&lt;App /&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title class_">App</span>: <span class="title class_">Vue</span>.<span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">loadModule</span>(<span class="string">&#x27;./components/App.vue&#x27;</span>, options)</span></span><br><span class="line"><span class="language-javascript">          ),</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">      app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>vue3-sfc-loader</code>ä¸ä¹‹å‰æˆ‘ä»¬æ‰€å†™çš„ä»£ç ä¸åŒä¹‹å¤„åœ¨äºï¼š -
ä½¿ç”¨<code>&lt;script&gt;</code>æ ‡ç­¾å¼•å…¥<code>vue3-sfc-loader</code>ä»£ç æ–‡ä»¶ã€‚
-
å¯¼å…¥<code>vue3-sfc-loader</code>ä¸­çš„<code>loadModule()</code>å‡½æ•°ï¼Œå¹¶å‡†å¤‡å¥½åŸºæœ¬çš„<code>option</code>é…ç½®é€‰é¡¹ã€‚
- <code>Vue.defineAsyncComponent()</code>å°†ç»„ä»¶<code>App</code>ä»¥<a
target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/components/async">å¼‚æ­¥ç»„ä»¶</a>çš„å½¢å¼æ³¨å†Œï¼Œå¹¶è®¾ç½®æ¨¡æ¿å†…å®¹ä¸º<code>&lt;App /&gt;</code>
- Vue.defineAsyncComponent() æ¥æ”¶ä¸€ä¸ªè¿”å› Promise
çš„åŠ è½½å‡½æ•°ã€‚æˆ‘ä»¬éœ€è¦æ­é… loadModule()
å‡½æ•°ä½¿ç”¨ï¼Œä¼ å…¥æƒ³è¦åŠ è½½çš„å•æ–‡ä»¶ç»„ä»¶çš„è·¯å¾„å’Œoptions é…ç½®é€‰é¡¹ã€‚</p>
<p>å…³äºVueçš„å•æ–‡ä»¶ç»„ä»¶å†…å®¹ï¼Œè§Vue<a
target="_blank" rel="noopener" href="https://cn.vuejs.org/api/sfc-spec">å®˜æ–¹æ–‡æ¡£çš„ä»‹ç»</a>ã€‚</p>

  </div>

  
  <div class="about" data-pagefind-ignore>
    <h1>About this Post</h1>
    <div class="details">
      <p>This post is written by Sy, licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc/4.0">CC BY-NC 4.0</a>.</p>
    </div>
    
    <p class="tags">
      <i class="bi bi-tags icon"></i>
      
      <a href="/tags/Vue/" class="tag">#Vue</a>
      
    </p>
    
    
  </div>
  

  <div class="container post-prev-next" data-pagefind-ignore>
    
    <a href="/2025/02/12/%E5%8D%9A%E5%AE%A2/Hexo%E5%A4%9A%E7%AB%AF%E9%83%A8%E7%BD%B2%E7%BB%88%E6%9E%81%E6%96%B9%E6%A1%88%EF%BC%81/" class="next">
      <div class="text">
        <p class="label">Next</p>
        <h3 class="title">Hexoå¤šç«¯éƒ¨ç½²ç»ˆææ–¹æ¡ˆ</h3>
      </div>
    </a>
    
    
    <a href="/2025/02/02/%E5%85%B6%E4%BB%96/%E9%80%9F%E9%80%9AOllama%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2DeepSeek-r1/" class="prev">
      <div class="text">
        <p class="label">Previous</p>
        <h3 class="title">é€Ÿé€šOllamaæœ¬åœ°éƒ¨ç½²DeepSeek-r1</h3>
      </div>
    </a>
    
  </div>

  
    
    
  
</article>


    </main>
    <footer>
  <div class="inner">
    <div class="links">
      
      <div class="group">
        <h2 class="title">Blog</h2>
        
        <a href="/" class="item">Home</a>
        
        <a href="/archives" class="item">Archives</a>
        
        <a href="/tags" class="item">Tags</a>
        
        <a href="/categories" class="item">Categories</a>
        
        <a href="/search" class="item">Search</a>
        
        <a href="/atom.xml" class="item">RSS</a>
        
      </div>
      
      <div class="group">
        <h2 class="title">Source Code</h2>
        
        <a target="_blank" rel="noopener" href="https://github.com/MrWillCom/hexo-theme-cupertino" class="item">GitHub</a>
        
      </div>
      
      <div class="group">
        <h2 class="title">Related</h2>
        
        <a target="_blank" rel="noopener" href="https://hexo.io/" class="item">Hexo</a>
        
        <a target="_blank" rel="noopener" href="https://sass-lang.com/" class="item">Sass</a>
        
      </div>
      
    </div>
    <span>&copy; 2025 Sy<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></span>
    
    
      <br>
      <div class="color-scheme-toggle" role="radiogroup" id="theme-color-scheme-toggle">
        <label>
          <input type="radio" value="light">
          <span>Light</span>
        </label>
        <label>
          <input type="radio" value="dark">
          <span>Dark</span>
        </label>
        <label>
          <input type="radio" value="auto">
          <span>Auto</span>
        </label>
      </div>
    
  </div>
</footer>


    
<script src="/js/main.js"></script>


    

    
    
<script src="/js/scroll-reveal.js"></script>

    

    

    

    
  </body>
</html>
