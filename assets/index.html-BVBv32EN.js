import{_ as a,b as i,k as n,o as p}from"./app-oiS3pDlr.js";const l={};function e(c,s){return p(),i("div",null,s[0]||(s[0]=[n(`<h2 id="ä¸€ã€ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ä»‹ç»"><span>ä¸€ã€ä»‹ç»</span></a></h2><p>åœ¨ä¸Šä¸€ç¯‡ç¬”è®°ä¸­ç®€å•ä»‹ç»äº†<code>MongoDb</code>çš„ä½¿ç”¨æ–¹æ³•ï¼Œæƒ³å¿…ä»»ä½•ä¸€ä¸ªç¬¬ä¸€æ¬¡å­¦è¿™ä¸ªæ•°æ®åº“çš„å‰ç«¯å¼€å‘è€…æ—©å·²æ— æ¯”ç«çƒ­äº†ï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥ç›´æ¥å¼€ğŸ¦Œä¸€ä¸ª <code>Restful API</code>è§„èŒƒçš„åº”ç”¨å§ã€‚</p><h2 id="äºŒã€å®‰è£…é©±åŠ¨" tabindex="-1"><a class="header-anchor" href="#äºŒã€å®‰è£…é©±åŠ¨"><span>äºŒã€å®‰è£…é©±åŠ¨</span></a></h2><p>è¿™é‡Œè¯´çš„æ‰€è°“çš„å®‰è£…é©±åŠ¨ï¼Œå°±æ˜¯åœ¨<code>node.js</code>ä¸­å®‰è£…è¿™ä¸ªæ¨¡å—ï¼Œè¿™é‡Œå‡è®¾ä½ è¿˜æ²¡æœ‰å®‰è£…<code>express</code>æ¨¡å—ã€‚</p><p>æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œ</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="å¤åˆ¶ä»£ç " data-copied="å·²å¤åˆ¶"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npm</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">init</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">å›è½¦è·³è¿‡é¡¹ç›®ä¿¡æ¯é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npm</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">i</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">express</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mongodb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸‰ã€é…ç½®è¿æ¥" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€é…ç½®è¿æ¥"><span>ä¸‰ã€é…ç½®è¿æ¥</span></a></h2><p>åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªé…ç½®ä¿¡æ¯çš„æ–‡ä»¶å¤¹ï¼š<code>config</code>ï¼Œå¹¶åˆ›å»ºæ–‡ä»¶<code>config/mongoDbConnection.js</code>ï¼š</p><div class="language-js line-numbers-mode" data-ext="js" data-title="js"><button class="copy" title="å¤åˆ¶ä»£ç " data-copied="å·²å¤åˆ¶"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">MongoClient</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">require</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mongodb</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">Replace</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">the</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">uri</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">string</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">with</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">your</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">connection</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">string.</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">uri</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mongodb://localhost:27017/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dbName</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">myBlog</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_db</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">async</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">connectDb</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_db</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">try</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">client</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">new</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">MongoClient</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">url</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">useUnifiedTopology</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">});</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">await</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">client</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">connect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_db</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">await</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">client</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">db</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dbName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">catch</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">err</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">throw</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">è¿æ¥åˆ°æ•°æ®åº“å‡ºé”™</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">return</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_db</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getCollection</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">collection</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=&gt;</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">let</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_col</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">return</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">async</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=&gt;</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">try</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_col</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">db</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">await</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">connectDb</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_col</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">await</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">db</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">collection</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">collection</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">catch</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">err</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">throw</span><span class="space"> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">è¿æ¥</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">connection</span><span class="space"> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">å‡ºé”™</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">return</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_col</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œè¯´ä¸€ä¸ªæˆ‘åœ¨å®˜æ–¹æ–‡æ¡£çœ‹åˆ°çš„å°æŠ€å·§ï¼Œ<code>url</code>å¯ä»¥åœ¨<code>Mongo Compass</code>ä¸­é€šè¿‡ç²˜è´´è·å¾—ï¼š</p><p><img src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/image-20250325214747615.png" alt="image-20250325214747615"></p><p>è¿™æ®µä»£ç å¾ˆé•¿ï¼Œçœ‹èµ·æ¥éå¸¸åŠé€€ï¼Œä½†æ˜¯ç¨å¾®æ‰’ä¸€ä¸‹å°±èƒ½å‘ç°ä¸€ç‚¹å„¿ä¹Ÿä¸éš¾ã€‚</p><p>å› ä¸ºå…¶ä¸­ç”¨åˆ°äº†å¾ˆå¤šé˜²å¾¡æ€§ç¼–ç¨‹ï¼Œæ‰€ä»¥çœ‹èµ·æ¥è¾ƒä¸ºè‡ƒè‚¿ï¼Œæˆ‘æ¥ç†ä¸€ç†æ ¸å¿ƒé€»è¾‘ï¼š</p><ul><li>é€šè¿‡è§£æ„èµ‹å€¼å¯¼å…¥<code>mongodb</code>æ¨¡å—ä¸‹çš„<code>MongoClient</code>ç±»åé¢ç”¨äºåˆ›å»ºæœåŠ¡é“¾æ¥ã€‚</li><li><code>url</code>å­˜æ”¾æ•°æ®åº“çš„åœ°å€ã€‚</li><li>å®šä¹‰äº†ä¸€ä¸ª<code>connectDb()</code>æ–¹æ³•é“¾æ¥æ•°æ®åº“è¿”å›å¹¶å­˜åˆ°<code>_db</code>ä¸­ä»¥ä¾¿å¤ç”¨ã€‚è¿æ¥å¤±è´¥æŠ¥é”™ï¼ˆé˜²å¾¡æ€§ç¼–ç¨‹ï¼‰ã€‚</li><li><code>_db</code>ç”¨äºå­˜æ”¾è¿æ¥åˆ°çš„æ•°æ®åº“ï¼Œä¾¿äºå…¨å±€å¤šæ¬¡å¤ç”¨ã€‚</li></ul><h3 id="_3-1-connectdb-æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_3-1-connectdb-æ–¹æ³•"><span>3.1 connectDb() æ–¹æ³•</span></a></h3><p>è¿™é‡Œç”¨åˆ°äº†å‡ ä¸ªæˆ‘æ¯”è¾ƒé™Œç”Ÿçš„APIï¼Œä¹Ÿæ¥æ‰’ä¸€ä¸‹ï¼š</p><div class="language-js line-numbers-mode" data-ext="js" data-title="js"><button class="copy" title="å¤åˆ¶ä»£ç " data-copied="å·²å¤åˆ¶"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">client</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span class="space"> </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">new</span><span class="space"> </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">MongoClient</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">url</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span class="space"> </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">useUnifiedTopology</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span class="space"> </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">});</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">å¯ä»¥çœ‹å‡ºï¼ŒMongoClientåŠŸèƒ½ç±»ä¼¼äºè¿æ¥æ•°æ®åº“å®¢æˆ·ç«¯</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">await</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">client</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">connect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">ä¸€ä¸ªPromise</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">è¿”å›å®¢æˆ·ç«¯è¿æ¥åˆ°çš„ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">await</span><span class="space"> </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">client</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">db</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">dbName</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">//</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">ä¸€ä¸ªPromise</span><span class="space"> </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">è¿”å›å®¢æˆ·ç«¯ä¸­çš„ä¸€ä¸ªæ•°æ®åº“</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å·®ç‚¹å°±å»æŸ¥èµ„æ–™äº†ï¼Œè¿˜å¥½æˆ‘çªç„¶ç†è§£äº†~</p><p>å¯¹ç…§è¿™æˆ‘ä»¬çš„<code>MongoDB Compass</code>å…¶å®å°±å¾ˆå¥½ç†è§£äº†ï¼š</p><p><img src="https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/image-20250325220135877.png" alt="image-20250325220135877"></p><ul><li>æˆ‘ä»¬ç”¨å¯¼å…¥çš„ç±»<code>MongoClient</code>åˆ›å»ºäº†ä¸€ä¸ªå®¢æˆ·ç«¯çš„å¯¹è±¡ï¼Œå¹¶ä¼ å…¥å®¢æˆ·ç«¯çš„<code>url</code>å‚æ•°ä½œä¸ºå®¢æˆ·ç«¯å¯»å€ã€‚</li><li>åˆ›å»ºå®Œ<code>client</code>åå¹¶ä¸ä¼šç›´æ¥è¿æ¥å®¢æˆ·ç«¯ï¼Œéœ€è¦å¼‚æ­¥åœ°è°ƒç”¨<code>client.connect()</code>æ–¹æ³•æ¥è¿æ¥ã€‚</li><li>è¿æ¥åæˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€ä¸ªæ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥å¼‚æ­¥åœ°è°ƒç”¨äº†<code>client.db(dbName)</code>å¹¶ä¼ å…¥æˆ‘ä»¬éœ€è¦è®¿é—®çš„æ•°æ®åº“åã€‚</li></ul><p>å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒä¹‹å‰é‚£æ ·ï¼Œç”¨<code>db.xxx</code>æ¥è¿›è¡Œä¸€ç³»åˆ—é›†åˆä¸æ–‡æ¡£çš„æ“ä½œäº†ï¼Œè¯­æ³•ç”šè‡³éƒ½å®Œå…¨ä¸€æ ·ã€‚</p><h3 id="_3-2-getcollection-æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_3-2-getcollection-æ–¹æ³•"><span>3.2 getCollection() æ–¹æ³•</span></a></h3><p>æˆ‘ä»¬åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­è¿˜åˆ›å»ºäº†ä¸€ä¸ªç”¨äºè·å–é›†åˆçš„æ–¹æ³•ï¼Œå¹¶å°†å…¶å¯¼å‡ºä¸ºæ¨¡å—ã€‚</p><p>è¿™ä¸ªæ–¹æ³•ä»£ç æ›´åŠ ç®€å•ï¼Œé€šè¿‡<code>getCollection</code>æ–¹æ³•æ¥å¾—åˆ°äº†<code>db</code>æ•°æ®åº“ï¼Œå¹¶è·å–<code>collection</code>é›†åˆè¿”å›ï¼Œå°†å‡½æ•°é—­åŒ…å¹¶å°†è·å–çš„é›†åˆå­˜å…¥<code>_col</code>ã€‚</p>`,25)]))}const h=a(l,[["render",e],["__file","index.html.vue"]]),k=JSON.parse('{"path":"/demo/blc8jgxs/","title":"é€šè¿‡Expresså’ŒMongoDbå®ç°RestfulAPIåº”ç”¨","lang":"zh-CN","frontmatter":{"title":"é€šè¿‡Expresså’ŒMongoDbå®ç°RestfulAPIåº”ç”¨","createTime":"2025/03/25 21:41:10","permalink":"/demo/blc8jgxs/","description":"ä¸€ã€ä»‹ç» åœ¨ä¸Šä¸€ç¯‡ç¬”è®°ä¸­ç®€å•ä»‹ç»äº†MongoDbçš„ä½¿ç”¨æ–¹æ³•ï¼Œæƒ³å¿…ä»»ä½•ä¸€ä¸ªç¬¬ä¸€æ¬¡å­¦è¿™ä¸ªæ•°æ®åº“çš„å‰ç«¯å¼€å‘è€…æ—©å·²æ— æ¯”ç«çƒ­äº†ï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥ç›´æ¥å¼€ğŸ¦Œä¸€ä¸ª Restful APIè§„èŒƒçš„åº”ç”¨å§ã€‚ äºŒã€å®‰è£…é©±åŠ¨ è¿™é‡Œè¯´çš„æ‰€è°“çš„å®‰è£…é©±åŠ¨ï¼Œå°±æ˜¯åœ¨node.jsä¸­å®‰è£…è¿™ä¸ªæ¨¡å—ï¼Œè¿™é‡Œå‡è®¾ä½ è¿˜æ²¡æœ‰å®‰è£…expressæ¨¡å—ã€‚ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œ ä¸‰ã€é…ç½®è¿æ¥ åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªé…ç½®ä¿¡...","head":[["meta",{"property":"og:url","content":"https://shenying.online/demo/blc8jgxs/"}],["meta",{"property":"og:site_name","content":"Sy_blogSite"}],["meta",{"property":"og:title","content":"é€šè¿‡Expresså’ŒMongoDbå®ç°RestfulAPIåº”ç”¨"}],["meta",{"property":"og:description","content":"ä¸€ã€ä»‹ç» åœ¨ä¸Šä¸€ç¯‡ç¬”è®°ä¸­ç®€å•ä»‹ç»äº†MongoDbçš„ä½¿ç”¨æ–¹æ³•ï¼Œæƒ³å¿…ä»»ä½•ä¸€ä¸ªç¬¬ä¸€æ¬¡å­¦è¿™ä¸ªæ•°æ®åº“çš„å‰ç«¯å¼€å‘è€…æ—©å·²æ— æ¯”ç«çƒ­äº†ï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥ç›´æ¥å¼€ğŸ¦Œä¸€ä¸ª Restful APIè§„èŒƒçš„åº”ç”¨å§ã€‚ äºŒã€å®‰è£…é©±åŠ¨ è¿™é‡Œè¯´çš„æ‰€è°“çš„å®‰è£…é©±åŠ¨ï¼Œå°±æ˜¯åœ¨node.jsä¸­å®‰è£…è¿™ä¸ªæ¨¡å—ï¼Œè¿™é‡Œå‡è®¾ä½ è¿˜æ²¡æœ‰å®‰è£…expressæ¨¡å—ã€‚ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œ ä¸‰ã€é…ç½®è¿æ¥ åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªé…ç½®ä¿¡..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/image-20250325214747615.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-17T16:58:04.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-17T16:58:04.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"é€šè¿‡Expresså’ŒMongoDbå®ç°RestfulAPIåº”ç”¨\\",\\"image\\":[\\"https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/image-20250325214747615.png\\",\\"https://ccccooh.oss-cn-hangzhou.aliyuncs.com/img/image-20250325220135877.png\\"],\\"dateModified\\":\\"2025-04-17T16:58:04.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":2.67,"words":802},"git":{"updatedTime":1744909084000,"contributors":[{"name":"CCCCOOH","username":"CCCCOOH","email":"c3156298376@163.com","commits":2,"avatar":"https://avatars.githubusercontent.com/CCCCOOH?v=4","url":"https://github.com/CCCCOOH"},{"name":"sy","username":"sy","email":"c3156298376@163.com","commits":1,"avatar":"https://avatars.githubusercontent.com/sy?v=4","url":"https://github.com/sy"}]},"autoDesc":true,"filePathRelative":"notes/demo/10.Mongodb/2.é€šè¿‡Expresså’ŒMongoDbå®ç°RestfulAPIåº”ç”¨.md"}');export{h as comp,k as data};
